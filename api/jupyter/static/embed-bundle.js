define("@upsetjs/jupyter_widget",["@jupyter-widgets/base"],(function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t,n){!function(e){"use strict";function t(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=0;return t}function n(e,t){for(var n=0,r=0;r<e.length;++r)n+=e[r]*t[r];return n}function r(e){return Math.sqrt(n(e,e))}function o(e,t,n){for(var r=0;r<t.length;++r)e[r]=t[r]*n}function i(e,t,n,r,o){for(var i=0;i<e.length;++i)e[i]=t*n[i]+r*o[i]}function a(e,t,r,o,a,s,l){var c=r.fx,u=n(r.fxprime,t),f=c,d=c,m=u,y=0;function p(d,y,p){for(var h=0;h<16;++h)if(a=(d+y)/2,i(o.x,1,r.x,a,t),f=o.fx=e(o.x,o.fxprime),m=n(o.fxprime,t),f>c+s*a*u||f>=p)y=a;else{if(Math.abs(m)<=-l*u)return a;m*(y-d)>=0&&(y=d),d=a,p=f}return 0}a=a||1,s=s||1e-6,l=l||.1;for(var h=0;h<10;++h){if(i(o.x,1,r.x,a,t),f=o.fx=e(o.x,o.fxprime),m=n(o.fxprime,t),f>c+s*a*u||h&&f>=d)return p(y,a,d);if(Math.abs(m)<=-l*u)return a;if(m>=0)return p(a,y,f);d=f,y=a,a*=2}return a}e.bisect=function(e,t,n,r){var o=(r=r||{}).maxIterations||100,i=r.tolerance||1e-10,a=e(t),s=e(n),l=n-t;if(a*s>0)throw"Initial bisect points must have opposite signs";if(0===a)return t;if(0===s)return n;for(var c=0;c<o;++c){var u=t+(l/=2),f=e(u);if(f*a>=0&&(t=u),Math.abs(l)<i||0===f)return u}return t+l},e.nelderMead=function(e,t,n){var r,o=(n=n||{}).maxIterations||200*t.length,a=n.nonZeroDelta||1.05,s=n.zeroDelta||.001,l=n.minErrorDelta||1e-6,c=n.minErrorDelta||1e-5,u=void 0!==n.rho?n.rho:1,f=void 0!==n.chi?n.chi:2,d=void 0!==n.psi?n.psi:-.5,m=void 0!==n.sigma?n.sigma:.5,y=t.length,p=new Array(y+1);p[0]=t,p[0].fx=e(t),p[0].id=0;for(var h=0;h<y;++h){var x=t.slice();x[h]=x[h]?x[h]*a:s,p[h+1]=x,p[h+1].fx=e(x),p[h+1].id=h+1}function g(e){for(var t=0;t<e.length;t++)p[y][t]=e[t];p[y].fx=e.fx}for(var v=function(e,t){return e.fx-t.fx},b=t.slice(),_=t.slice(),w=t.slice(),S=t.slice(),E=0;E<o;++E){if(p.sort(v),n.history){var k=p.map((function(e){var t=e.slice();return t.fx=e.fx,t.id=e.id,t}));k.sort((function(e,t){return e.id-t.id})),n.history.push({x:p[0].slice(),fx:p[0].fx,simplex:k})}for(r=0,h=0;h<y;++h)r=Math.max(r,Math.abs(p[0][h]-p[1][h]));if(Math.abs(p[0].fx-p[y].fx)<l&&r<c)break;for(h=0;h<y;++h){b[h]=0;for(var M=0;M<y;++M)b[h]+=p[M][h];b[h]/=y}var C=p[y];if(i(_,1+u,b,-u,C),_.fx=e(_),_.fx<p[0].fx)i(S,1+f,b,-f,C),S.fx=e(S),S.fx<_.fx?g(S):g(_);else if(_.fx>=p[y-1].fx){var A=!1;if(_.fx>C.fx?(i(w,1+d,b,-d,C),w.fx=e(w),w.fx<C.fx?g(w):A=!0):(i(w,1-d*u,b,d*u,C),w.fx=e(w),w.fx<_.fx?g(w):A=!0),A){if(m>=1)break;for(h=1;h<p.length;++h)i(p[h],1-m,p[0],m,p[h]),p[h].fx=e(p[h])}}else g(_)}return p.sort(v),{fx:p[0].fx,x:p[0]}},e.conjugateGradient=function(e,t,s){var l,c,u,f={x:t.slice(),fx:0,fxprime:t.slice()},d={x:t.slice(),fx:0,fxprime:t.slice()},m=t.slice(),y=1;u=(s=s||{}).maxIterations||20*t.length,f.fx=e(f.x,f.fxprime),o(l=f.fxprime.slice(),f.fxprime,-1);for(var p=0;p<u;++p){if(y=a(e,l,f,d,y),s.history&&s.history.push({x:f.x.slice(),fx:f.fx,fxprime:f.fxprime.slice(),alpha:y}),y){i(m,1,d.fxprime,-1,f.fxprime);var h=n(f.fxprime,f.fxprime);i(l,Math.max(0,n(m,d.fxprime)/h),l,-1,d.fxprime),c=f,f=d,d=c}else o(l,f.fxprime,-1);if(r(f.fxprime)<=1e-5)break}return s.history&&s.history.push({x:f.x.slice(),fx:f.fx,fxprime:f.fxprime.slice(),alpha:y}),f},e.gradientDescent=function(e,t,n){for(var o=(n=n||{}).maxIterations||100*t.length,a=n.learnRate||.001,s={x:t.slice(),fx:0,fxprime:t.slice()},l=0;l<o&&(s.fx=e(s.x,s.fxprime),n.history&&n.history.push({x:s.x.slice(),fx:s.fx,fxprime:s.fxprime.slice()}),i(s.x,1,s.x,-a,s.fxprime),!(r(s.fxprime)<=1e-5));++l);return s},e.gradientDescentLineSearch=function(e,t,n){n=n||{};var i,s={x:t.slice(),fx:0,fxprime:t.slice()},l={x:t.slice(),fx:0,fxprime:t.slice()},c=n.maxIterations||100*t.length,u=n.learnRate||1,f=t.slice(),d=n.c1||.001,m=n.c2||.1,y=[];if(n.history){var p=e;e=function(e,t){return y.push(e.slice()),p(e,t)}}s.fx=e(s.x,s.fxprime);for(var h=0;h<c&&(o(f,s.fxprime,-1),u=a(e,f,s,l,u,d,m),n.history&&(n.history.push({x:s.x.slice(),fx:s.fx,fxprime:s.fxprime.slice(),functionCalls:y,learnRate:u,alpha:u}),y=[]),i=s,s=l,l=i,!(0===u||r(s.fxprime)<1e-5));++h);return s},e.zeros=t,e.zerosM=function(e,n){return t(e).map((function(){return t(n)}))},e.norm2=r,e.weightedSum=i,e.scale=o}(t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MODULE_NAME=t.MODULE_VERSION=void 0,t.MODULE_VERSION="1.6.0",t.MODULE_NAME="@upsetjs/jupyter_widget"},function(e,t,n){!function(e){"use strict";var t,n,r,o,i,a,s,l={},c=[],u=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function f(e,t){for(var n in t)e[n]=t[n];return e}function d(e){var t=e.parentNode;t&&t.removeChild(e)}function m(e,t,n){var r,o=arguments,i={};for(r in t)"key"!==r&&"ref"!==r&&(i[r]=t[r]);if(arguments.length>3)for(n=[n],r=3;r<arguments.length;r++)n.push(o[r]);if(null!=n&&(i.children=n),"function"==typeof e&&null!=e.defaultProps)for(r in e.defaultProps)void 0===i[r]&&(i[r]=e.defaultProps[r]);return y(e,i,t&&t.key,t&&t.ref,null)}function y(e,n,r,o,i){var a={type:e,props:n,key:r,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:i};return null==i&&(a.__v=a),t.vnode&&t.vnode(a),a}function p(e){return e.children}function h(e,t){this.props=e,this.context=t}function x(e,t){if(null==t)return e.__?x(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?x(e):null}function g(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return g(e)}}function v(e){(!e.__d&&(e.__d=!0)&&n.push(e)&&!r++||i!==t.debounceRendering)&&((i=t.debounceRendering)||o)(b)}function b(){for(var e;r=n.length;)e=n.sort((function(e,t){return e.__v.__b-t.__v.__b})),n=[],e.some((function(e){var t,n,r,o,i,a,s;e.__d&&(a=(i=(t=e).__v).__e,(s=t.__P)&&(n=[],(r=f({},i)).__v=r,o=M(s,i,r,t.__n,void 0!==s.ownerSVGElement,null,n,null==a?x(i):a),C(n,i),o!=a&&g(i)))}))}function _(e,t,n,r,o,i,a,s,u,f){var m,h,g,v,b,_,w,S,E,k=r&&r.__k||c,C=k.length;for(u==l&&(u=null!=a?a[0]:C?x(r,0):null),n.__k=[],m=0;m<t.length;m++)if(null!=(v=n.__k[m]=null==(v=t[m])||"boolean"==typeof v?null:"string"==typeof v||"number"==typeof v?y(null,v,null,null,v):Array.isArray(v)?y(p,{children:v},null,null,null):null!=v.__e||null!=v.__c?y(v.type,v.props,v.key,null,v.__v):v)){if(v.__=n,v.__b=n.__b+1,null===(g=k[m])||g&&v.key==g.key&&v.type===g.type)k[m]=void 0;else for(h=0;h<C;h++){if((g=k[h])&&v.key==g.key&&v.type===g.type){k[h]=void 0;break}g=null}if(b=M(e,v,g=g||l,o,i,a,s,u,f),(h=v.ref)&&g.ref!=h&&(S||(S=[]),g.ref&&S.push(g.ref,null,v),S.push(h,v.__c||b,v)),null!=b){if(null==w&&(w=b),E=void 0,void 0!==v.__d)E=v.__d,v.__d=void 0;else if(a==g||b!=u||null==b.parentNode){e:if(null==u||u.parentNode!==e)e.appendChild(b),E=null;else{for(_=u,h=0;(_=_.nextSibling)&&h<C;h+=2)if(_==b)break e;e.insertBefore(b,u),E=u}"option"==n.type&&(e.value="")}u=void 0!==E?E:b.nextSibling,"function"==typeof n.type&&(n.__d=u)}else u&&g.__e==u&&u.parentNode!=e&&(u=x(g))}if(n.__e=w,null!=a&&"function"!=typeof n.type)for(m=a.length;m--;)null!=a[m]&&d(a[m]);for(m=C;m--;)null!=k[m]&&O(k[m],k[m]);if(S)for(m=0;m<S.length;m++)N(S[m],S[++m],S[++m])}function w(e){return null==e||"boolean"==typeof e?[]:Array.isArray(e)?c.concat.apply([],e.map(w)):[e]}function S(e,t,n){"-"===t[0]?e.setProperty(t,n):e[t]="number"==typeof n&&!1===u.test(t)?n+"px":null==n?"":n}function E(e,t,n,r,o){var i,a,s,l,c;if(o?"className"===t&&(t="class"):"class"===t&&(t="className"),"style"===t)if(i=e.style,"string"==typeof n)i.cssText=n;else{if("string"==typeof r&&(i.cssText="",r=null),r)for(l in r)n&&l in n||S(i,l,"");if(n)for(c in n)r&&n[c]===r[c]||S(i,c,n[c])}else"o"===t[0]&&"n"===t[1]?(a=t!==(t=t.replace(/Capture$/,"")),s=t.toLowerCase(),t=(s in e?s:t).slice(2),n?(r||e.addEventListener(t,k,a),(e.l||(e.l={}))[t]=n):e.removeEventListener(t,k,a)):"list"!==t&&"tagName"!==t&&"form"!==t&&"type"!==t&&"size"!==t&&!o&&t in e?e[t]=null==n?"":n:"function"!=typeof n&&"dangerouslySetInnerHTML"!==t&&(t!==(t=t.replace(/^xlink:?/,""))?null==n||!1===n?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),n):null==n||!1===n&&!/^ar/.test(t)?e.removeAttribute(t):e.setAttribute(t,n))}function k(e){this.l[e.type](t.event?t.event(e):e)}function M(e,n,r,o,i,a,s,l,c){var u,d,m,y,x,g,v,b,w,S,E,k=n.type;if(void 0!==n.constructor)return null;(u=t.__b)&&u(n);try{e:if("function"==typeof k){if(b=n.props,w=(u=k.contextType)&&o[u.__c],S=u?w?w.props.value:u.__:o,r.__c?v=(d=n.__c=r.__c).__=d.__E:("prototype"in k&&k.prototype.render?n.__c=d=new k(b,S):(n.__c=d=new h(b,S),d.constructor=k,d.render=j),w&&w.sub(d),d.props=b,d.state||(d.state={}),d.context=S,d.__n=o,m=d.__d=!0,d.__h=[]),null==d.__s&&(d.__s=d.state),null!=k.getDerivedStateFromProps&&(d.__s==d.state&&(d.__s=f({},d.__s)),f(d.__s,k.getDerivedStateFromProps(b,d.__s))),y=d.props,x=d.state,m)null==k.getDerivedStateFromProps&&null!=d.componentWillMount&&d.componentWillMount(),null!=d.componentDidMount&&d.__h.push(d.componentDidMount);else{if(null==k.getDerivedStateFromProps&&b!==y&&null!=d.componentWillReceiveProps&&d.componentWillReceiveProps(b,S),!d.__e&&null!=d.shouldComponentUpdate&&!1===d.shouldComponentUpdate(b,d.__s,S)||n.__v===r.__v){for(d.props=b,d.state=d.__s,n.__v!==r.__v&&(d.__d=!1),d.__v=n,n.__e=r.__e,n.__k=r.__k,d.__h.length&&s.push(d),u=0;u<n.__k.length;u++)n.__k[u]&&(n.__k[u].__=n);break e}null!=d.componentWillUpdate&&d.componentWillUpdate(b,d.__s,S),null!=d.componentDidUpdate&&d.__h.push((function(){d.componentDidUpdate(y,x,g)}))}d.context=S,d.props=b,d.state=d.__s,(u=t.__r)&&u(n),d.__d=!1,d.__v=n,d.__P=e,u=d.render(d.props,d.state,d.context),null!=d.getChildContext&&(o=f(f({},o),d.getChildContext())),m||null==d.getSnapshotBeforeUpdate||(g=d.getSnapshotBeforeUpdate(y,x)),E=null!=u&&u.type==p&&null==u.key?u.props.children:u,_(e,Array.isArray(E)?E:[E],n,r,o,i,a,s,l,c),d.base=n.__e,d.__h.length&&s.push(d),v&&(d.__E=d.__=null),d.__e=!1}else null==a&&n.__v===r.__v?(n.__k=r.__k,n.__e=r.__e):n.__e=A(r.__e,n,r,o,i,a,s,c);(u=t.diffed)&&u(n)}catch(e){n.__v=null,t.__e(e,n,r)}return n.__e}function C(e,n){t.__c&&t.__c(n,e),e.some((function(n){try{e=n.__h,n.__h=[],e.some((function(e){e.call(n)}))}catch(e){t.__e(e,n.__v)}}))}function A(e,t,n,r,o,i,a,s){var u,f,d,m,y,p=n.props,h=t.props;if(o="svg"===t.type||o,null!=i)for(u=0;u<i.length;u++)if(null!=(f=i[u])&&((null===t.type?3===f.nodeType:f.localName===t.type)||e==f)){e=f,i[u]=null;break}if(null==e){if(null===t.type)return document.createTextNode(h);e=o?document.createElementNS("http://www.w3.org/2000/svg",t.type):document.createElement(t.type,h.is&&{is:h.is}),i=null,s=!1}if(null===t.type)p!==h&&e.data!=h&&(e.data=h);else{if(null!=i&&(i=c.slice.call(e.childNodes)),d=(p=n.props||l).dangerouslySetInnerHTML,m=h.dangerouslySetInnerHTML,!s){if(null!=i)for(p={},y=0;y<e.attributes.length;y++)p[e.attributes[y].name]=e.attributes[y].value;(m||d)&&(m&&d&&m.__html==d.__html||(e.innerHTML=m&&m.__html||""))}(function(e,t,n,r,o){var i;for(i in n)"children"===i||"key"===i||i in t||E(e,i,null,n[i],r);for(i in t)o&&"function"!=typeof t[i]||"children"===i||"key"===i||"value"===i||"checked"===i||n[i]===t[i]||E(e,i,t[i],n[i],r)})(e,h,p,o,s),m?t.__k=[]:(u=t.props.children,_(e,Array.isArray(u)?u:[u],t,n,r,"foreignObject"!==t.type&&o,i,a,l,s)),s||("value"in h&&void 0!==(u=h.value)&&u!==e.value&&E(e,"value",u,p.value,!1),"checked"in h&&void 0!==(u=h.checked)&&u!==e.checked&&E(e,"checked",u,p.checked,!1))}return e}function N(e,n,r){try{"function"==typeof e?e(n):e.current=n}catch(e){t.__e(e,r)}}function O(e,n,r){var o,i,a;if(t.unmount&&t.unmount(e),(o=e.ref)&&(o.current&&o.current!==e.__e||N(o,null,n)),r||"function"==typeof e.type||(r=null!=(i=e.__e)),e.__e=e.__d=void 0,null!=(o=e.__c)){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(e){t.__e(e,n)}o.base=o.__P=null}if(o=e.__k)for(a=0;a<o.length;a++)o[a]&&O(o[a],n,r);null!=i&&d(i)}function j(e,t,n){return this.constructor(e,n)}function I(e,n,r){var o,i,s;t.__&&t.__(e,n),i=(o=r===a)?null:r&&r.__k||n.__k,e=m(p,null,[e]),s=[],M(n,(o?n:r||n).__k=e,i||l,l,void 0!==n.ownerSVGElement,r&&!o?[r]:i?null:n.childNodes.length?c.slice.call(n.childNodes):null,s,r||l,o),C(s,e)}function z(e,t){I(e,t,a)}function L(e,t){var n,r;for(r in t=f(f({},e.props),t),arguments.length>2&&(t.children=c.slice.call(arguments,2)),n={},t)"key"!==r&&"ref"!==r&&(n[r]=t[r]);return y(e.type,n,t.key||e.key,t.ref||e.ref,null)}t={__e:function(e,t){for(var n,r;t=t.__;)if((n=t.__c)&&!n.__)try{if(n.constructor&&null!=n.constructor.getDerivedStateFromError&&(r=!0,n.setState(n.constructor.getDerivedStateFromError(e))),null!=n.componentDidCatch&&(r=!0,n.componentDidCatch(e)),r)return v(n.__E=n)}catch(t){e=t}throw e}},h.prototype.setState=function(e,t){var n;n=this.__s!==this.state?this.__s:this.__s=f({},this.state),"function"==typeof e&&(e=e(n,this.props)),e&&f(n,e),null!=e&&this.__v&&(t&&this.__h.push(t),v(this))},h.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),v(this))},h.prototype.render=p,n=[],r=0,o="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,a=l,s=0;var T,P,q,F=0,R=[],H=t.__r,B=t.diffed,U=t.__c,D=t.unmount;function K(e,n){t.__h&&t.__h(P,e,F||n),F=0;var r=P.__H||(P.__H={__:[],__h:[]});return e>=r.__.length&&r.__.push({}),r.__[e]}function W(e){return F=1,V(te,e)}function V(e,t,n){var r=K(T++,2);return r.t=e,r.__c||(r.__c=P,r.__=[n?n(t):te(void 0,t),function(e){var t=r.t(r.__[0],e);r.__[0]!==t&&(r.__[0]=t,r.__c.setState({}))}]),r.__}function Q(e,n){var r=K(T++,4);!t.__s&&ee(r.__H,n)&&(r.__=e,r.__H=n,P.__h.push(r))}function $(e){return F=5,G((function(){return{current:e}}),[])}function G(e,t){var n=K(T++,7);return ee(n.__H,t)?(n.__H=t,n.__h=e,n.__=e()):n.__}function J(e,t){return F=8,G((function(){return e}),t)}function Y(){R.some((function(e){if(e.__P)try{e.__H.__h.forEach(Z),e.__H.__h.forEach(X),e.__H.__h=[]}catch(n){return e.__H.__h=[],t.__e(n,e.__v),!0}})),R=[]}function Z(e){"function"==typeof e.u&&e.u()}function X(e){e.u=e.__()}function ee(e,t){return!e||t.some((function(t,n){return t!==e[n]}))}function te(e,t){return"function"==typeof t?t(e):t}function ne(e,t){for(var n in t)e[n]=t[n];return e}function re(e,t){for(var n in e)if("__source"!==n&&!(n in t))return!0;for(var r in t)if("__source"!==r&&e[r]!==t[r])return!0;return!1}t.__r=function(e){H&&H(e),T=0;var t=(P=e.__c).__H;t&&(t.__h.forEach(Z),t.__h.forEach(X),t.__h=[])},t.diffed=function(e){B&&B(e);var n=e.__c;n&&n.__H&&n.__H.__h.length&&(1!==R.push(n)&&q===t.requestAnimationFrame||((q=t.requestAnimationFrame)||function(e){var t,n=function(){clearTimeout(r),cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);"undefined"!=typeof window&&(t=requestAnimationFrame(n))})(Y))},t.__c=function(e,n){n.some((function(e){try{e.__h.forEach(Z),e.__h=e.__h.filter((function(e){return!e.__||X(e)}))}catch(r){n.some((function(e){e.__h&&(e.__h=[])})),n=[],t.__e(r,e.__v)}})),U&&U(e,n)},t.unmount=function(e){D&&D(e);var n=e.__c;if(n&&n.__H)try{n.__H.__.forEach(Z)}catch(e){t.__e(e,n.__v)}};var oe=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).isPureReactComponent=!0,n}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.shouldComponentUpdate=function(e,t){return re(this.props,e)||re(this.state,t)},r}(h);function ie(e,t){function n(e){var n=this.props.ref,r=n==e.ref;return!r&&n&&(n.call?n(null):n.current=null),t?!t(this.props,e)||!r:re(this.props,e)}function r(t){return this.shouldComponentUpdate=n,m(e,t)}return r.prototype.isReactComponent=!0,r.displayName="Memo("+(e.displayName||e.name)+")",r.t=!0,r}var ae=t.__b;t.__b=function(e){e.type&&e.type.t&&e.ref&&(e.props.ref=e.ref,e.ref=null),ae&&ae(e)};var se="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function le(e){function t(t,n){var r=ne({},t);return delete r.ref,e(r,t.ref||n)}return t.$$typeof=se,t.render=t,t.prototype.isReactComponent=t.t=!0,t.displayName="ForwardRef("+(e.displayName||e.name)+")",t}var ce=function(e,t){return e?w(e).reduce((function(e,n,r){return e.concat(t(n,r))}),[]):null},ue={map:ce,forEach:ce,count:function(e){return e?w(e).length:0},only:function(e){if(1!==(e=w(e)).length)throw new Error("Children.only() expects only one child.");return e[0]},toArray:w},fe=t.__e;function de(e){return e&&((e=ne({},e)).__c=null,e.__k=e.__k&&e.__k.map(de)),e}function me(){this.__u=0,this.o=null,this.__b=null}function ye(e){var t=e.__.__c;return t&&t.u&&t.u(e)}function pe(){this.i=null,this.l=null}t.__e=function(e,t,n){if(e.then)for(var r,o=t;o=o.__;)if((r=o.__c)&&r.__c)return r.__c(e,t.__c);fe(e,t,n)},(me.prototype=new h).__c=function(e,t){var n=this;null==n.o&&(n.o=[]),n.o.push(t);var r=ye(n.__v),o=!1,i=function(){o||(o=!0,r?r(a):a())};t.__c=t.componentWillUnmount,t.componentWillUnmount=function(){i(),t.__c&&t.__c()};var a=function(){var e;if(!--n.__u)for(n.__v.__k[0]=n.state.u,n.setState({u:n.__b=null});e=n.o.pop();)e.forceUpdate()};n.__u++||n.setState({u:n.__b=n.__v.__k[0]}),e.then(i,i)},me.prototype.render=function(e,t){return this.__b&&(this.__v.__k[0]=de(this.__b),this.__b=null),[m(h,null,t.u?null:e.children),t.u&&e.fallback]};var he=function(e,t,n){if(++n[1]===n[0]&&e.l.delete(t),e.props.revealOrder&&("t"!==e.props.revealOrder[0]||!e.l.size))for(n=e.i;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.i=n=n[2]}};(pe.prototype=new h).u=function(e){var t=this,n=ye(t.__v),r=t.l.get(e);return r[0]++,function(o){var i=function(){t.props.revealOrder?(r.push(o),he(t,e,r)):o()};n?n(i):i()}},pe.prototype.render=function(e){this.i=null,this.l=new Map;var t=w(e.children);e.revealOrder&&"b"===e.revealOrder[0]&&t.reverse();for(var n=t.length;n--;)this.l.set(t[n],this.i=[1,0,this.i]);return e.children},pe.prototype.componentDidUpdate=pe.prototype.componentDidMount=function(){var e=this;e.l.forEach((function(t,n){he(e,n,t)}))};var xe=function(){function e(){}var t=e.prototype;return t.getChildContext=function(){return this.props.context},t.render=function(e){return e.children},e}();function ge(e){var t=this,n=e.container,r=m(xe,{context:t.context},e.vnode);return t.s&&t.s!==n&&(t.v.parentNode&&t.s.removeChild(t.v),O(t.h),t.p=!1),e.vnode?t.p?(n.__k=t.__k,I(r,n),t.__k=n.__k):(t.v=document.createTextNode(""),z("",n),n.appendChild(t.v),t.p=!0,t.s=n,I(r,n,t.v),t.__k=t.v.__k):t.p&&(t.v.parentNode&&t.s.removeChild(t.v),O(t.h)),t.h=r,t.componentWillUnmount=function(){t.v.parentNode&&t.s.removeChild(t.v),O(t.h)},null}var ve=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/;h.prototype.isReactComponent={};var be="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,_e=t.event;function we(e,t){e["UNSAFE_"+t]&&!e[t]&&Object.defineProperty(e,t,{configurable:!1,get:function(){return this["UNSAFE_"+t]},set:function(e){this["UNSAFE_"+t]=e}})}t.event=function(e){_e&&(e=_e(e)),e.persist=function(){};var t=!1,n=!1,r=e.stopPropagation;e.stopPropagation=function(){r.call(e),t=!0};var o=e.preventDefault;return e.preventDefault=function(){o.call(e),n=!0},e.isPropagationStopped=function(){return t},e.isDefaultPrevented=function(){return n},e.nativeEvent=e};var Se={configurable:!0,get:function(){return this.class}},Ee=t.vnode;function ke(e){return!!e&&e.$$typeof===be}t.vnode=function(e){e.$$typeof=be;var t=e.type,n=e.props;if(t){if(n.class!=n.className&&(Se.enumerable="className"in n,null!=n.className&&(n.class=n.className),Object.defineProperty(n,"className",Se)),"function"!=typeof t){var r,o,i;for(i in n.defaultValue&&void 0!==n.value&&(n.value||0===n.value||(n.value=n.defaultValue),delete n.defaultValue),Array.isArray(n.value)&&n.multiple&&"select"===t&&(w(n.children).forEach((function(e){-1!=n.value.indexOf(e.props.value)&&(e.props.selected=!0)})),delete n.value),n)if(r=ve.test(i))break;if(r)for(i in o=e.props={},n)o[ve.test(i)?i.replace(/[A-Z0-9]/,"-$&").toLowerCase():i]=n[i]}!function(t){var n=e.type,r=e.props;if(r&&"string"==typeof n){var o={};for(var i in r)/^on(Ani|Tra|Tou)/.test(i)&&(r[i.toLowerCase()]=r[i],delete r[i]),o[i.toLowerCase()]=i;if(o.ondoubleclick&&(r.ondblclick=r[o.ondoubleclick],delete r[o.ondoubleclick]),o.onbeforeinput&&(r.onbeforeinput=r[o.onbeforeinput],delete r[o.onbeforeinput]),o.onchange&&("textarea"===n||"input"===n.toLowerCase()&&!/^fil|che|ra/i.test(r.type))){var a=o.oninput||"oninput";r[a]||(r[a]=r[o.onchange],delete r[o.onchange])}}}(),"function"==typeof t&&!t.m&&t.prototype&&(we(t.prototype,"componentWillMount"),we(t.prototype,"componentWillReceiveProps"),we(t.prototype,"componentWillUpdate"),t.m=!0)}Ee&&Ee(e)};var Me={useState:W,useReducer:V,useEffect:function(e,n){var r=K(T++,3);!t.__s&&ee(r.__H,n)&&(r.__=e,r.__H=n,P.__H.__h.push(r))},useLayoutEffect:Q,useRef:$,useImperativeHandle:function(e,t,n){F=6,Q((function(){"function"==typeof e?e(t()):e&&(e.current=t())}),null==n?n:n.concat(e))},useMemo:G,useCallback:J,useContext:function(e){var t=P.context[e.__c],n=K(T++,9);return n.__c=e,t?(null==n.__&&(n.__=!0,t.sub(P)),t.props.value):e.__},useDebugValue:function(e,n){t.useDebugValue&&t.useDebugValue(n?n(e):e)},version:"16.8.0",Children:ue,render:function(e,t,n){if(null==t.__k)for(;t.firstChild;)t.removeChild(t.firstChild);return I(e,t),"function"==typeof n&&n(),e?e.__c:null},hydrate:function(e,t,n){return z(e,t),"function"==typeof n&&n(),e?e.__c:null},unmountComponentAtNode:function(e){return!!e.__k&&(I(null,e),!0)},createPortal:function(e,t){return m(ge,{vnode:e,container:t})},createElement:m,createContext:function(e){var t={},n={__c:"__cC"+s++,__:e,Consumer:function(e,t){return e.children(t)},Provider:function(e){var r,o=this;return this.getChildContext||(r=[],this.getChildContext=function(){return t[n.__c]=o,t},this.shouldComponentUpdate=function(e){o.props.value!==e.value&&r.some((function(t){t.context=e.value,v(t)}))},this.sub=function(e){r.push(e);var t=e.componentWillUnmount;e.componentWillUnmount=function(){r.splice(r.indexOf(e),1),t&&t.call(e)}}),e.children}};return n.Consumer.contextType=n,n.Provider.__=n,n},createFactory:function(e){return m.bind(null,e)},cloneElement:function(e){return ke(e)?L.apply(null,arguments):e},createRef:function(){return{}},Fragment:p,isValidElement:ke,findDOMNode:function(e){return e&&(e.base||1===e.nodeType&&e)||null},Component:h,PureComponent:oe,memo:ie,forwardRef:le,unstable_batchedUpdates:function(e,t){return e(t)},StrictMode:p,Suspense:me,SuspenseList:pe,lazy:function(e){var t,n,r;function o(o){if(t||(t=e()).then((function(e){n=e.default||e}),(function(e){r=e})),r)throw r;if(!n)throw t;return m(n,o)}return o.displayName="Lazy",o.t=!0,o}};function Ce(e){return e instanceof Set?e.size:e.length}function Ae(e,t){var n=t?new Set((e instanceof Set?Array.from(e):e).map(t)):e instanceof Set?e:new Set(e),r=n.size,o={setA:r,setB:r,union:r,intersection:r};return function(i){if(i===e)return o;var a=0;i.forEach((function(e){(t&&n.has(t(e))||!t&&n.has(e))&&a++}));var s=Ce(i);return{setA:r,setB:s,intersection:a,union:r+s-a}}}function Ne(e,t){var n=t?new Set((e instanceof Set?Array.from(e):e).map(t)):e instanceof Set?e:new Set(e),r=Array.isArray(e)?e:Array.from(e),o={setA:r,setB:r,union:r,intersection:r};return function(i){if(i===e)return o;var a=[],s=r.slice();return i.forEach((function(e){t&&n.has(t(e))||!t&&n.has(e)?a.push(e):s.push(e)})),{setA:r,setB:Array.isArray(i)?i:Array.from(i),intersection:a,union:s}}}function Oe(e,t){var n=e instanceof Set?Array.from(e):e,r=t?new Set(n.map(t)):e instanceof Set?e:new Set(e);return function(o){if(o===e)return n;var i=[];return o.forEach((function(e){(t&&r.has(t(e))||!t&&r.has(e))&&i.push(e)})),i}}function je(e){return Array.isArray(e.elems)}function Ie(e){return"function"==typeof e.overlap}function ze(e){return null!=e.set}function Le(e,t,n){if(Ie(e))return e.overlap;if(ze(e)&&e.set.overlap)return e.set.overlap;var r=Ae(je(e)?e.elems:e.set.elems,n);return function(n){return n.overlap&&je(e)&&Array.isArray(e.elems)?n.overlap(e.elems):n.overlap&&ze(e)?n.overlap(e.set):r(n.elems)[t]}}function Te(e,t,n){if(Ie(e))return function(){return null};if("intersection"===t){var r=Oe(je(e)?e.elems:e.set.elems,n);return function(e){return r(e.elems)}}var o=Ne(je(e)?e.elems:e.set.elems,n);return function(e){return o(e.elems)[t]}}function Pe(e){return null!=e&&"number"==typeof e.cardinality&&"string"==typeof e.name&&Array.isArray(e.elems)}function qe(e){return Pe(e)&&"set"===e.type}function Fe(e){var t=e;return Pe(e)&&["composite","union","intersection","distinctIntersection"].includes(t.type)&&t.sets instanceof Set&&"number"==typeof t.degree}function Re(e){return qe(e)||Fe(e)}function He(e){return null!=e&&(null==e.type||["intersection","union"].includes(e.type))}function Be(e){var t=e;return null!=e&&"string"==typeof t.name&&"string"==typeof t.color&&(je(t)||ze(t)||Ie(t))}function Ue(){return(Ue=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function De(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ke(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return De(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?De(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}function We(e,t){return e.name.localeCompare(t.name)}function Ve(e,t){return t.cardinality-e.cardinality}function Qe(e,t){return e.degree-t.degree}function $e(e){return function(t,n){return e.reduce((function(e,r){return 0===e?r(t,n):e}),0)}}function Ge(e){return function(t,n){return-e(t,n)}}function Je(e){return function(t,n){var r=function(e){return e<0?Number.POSITIVE_INFINITY:e};return r(e.findIndex((function(e){return t.sets.has(e)})))-r(e.findIndex((function(e){return n.sets.has(e)})))}}function Ye(e,t,n){void 0===n&&(n={});var r=t;return n.order&&(r=r.sort(function(e,t){if(!t)return We;var n=Array.isArray(t)?t:[t];return 0===n.length?We:$e(n.map((function(t){switch(t){case"cardinality":case"cardinality:desc":return Ve;case"cardinality:asc":return Ge(Ve);case"name:desc":return Ge(We);case"degree":case"degree:asc":return Qe;case"degree:desc":return Ge(Qe);case"group":case"group:asc":return Je(e);case"group:desc":return Ge(Je(e));default:return We}})))}(e,n.order))),null!=n.limit?r.slice(0,n.limit):r}function Ze(e,t,n){var r=n(e);return Object.assign({type:t,cardinality:e.elems.length,sets:new Set(r),degree:r.length},e)}var Xe={distinctIntersection:" ∩ ",intersection:" ∩ ",union:" ∪ ",composite:","};function et(e){if(!e)return[255,255,255];var t=e.match(/#([\da-f]{2})([\da-f]{2})([\da-f]{2})/i);if(t)return[Number.parseInt(t[1],16),Number.parseInt(t[2],16),Number.parseInt(t[3],16)];var n=e.match(/\(([\d]+)[, ]([\d]+)[, ]([\d]+)\)/i);return n?[Number.parseInt(n[1],10),Number.parseInt(n[2],10),Number.parseInt(n[3],10)]:[255,255,255]}function tt(e){if(1===e.length)return e[0];if(!e.every((function(e){return null==e}))){var t=e.map(et),n=Math.floor(t.reduce((function(e,t){return e+t[0]}),0)/t.length),r=Math.floor(t.reduce((function(e,t){return e+t[1]}),0)/t.length),o=Math.floor(t.reduce((function(e,t){return e+t[2]}),0)/t.length);return"#"+n.toString(16)+r.toString(16)+o.toString(16)}}function nt(e,t,n){var r=Array.from(e).sort((function(e,n){return t.get(e)-t.get(n)}));return 1===r.length?r[0].name:"("+r.map((function(e){return e.name})).join(n)+")"}function rt(e,t,n,r,o){return{type:0===n.size?"composite":e,elems:r,color:o(Array.from(n).map((function(e){return e.color}))),sets:n,name:t,cardinality:r.length,degree:n.size}}function ot(e,t,n,r,o,i,a){var s=new Set(e.sets);t.sets.forEach((function(e){return s.add(e)}));var l=nt(s,o,Xe[i]);if(0===e.cardinality||0===t.cardinality)return rt(i,l,s,[],a);var c=e,u=t;e.cardinality>t.cardinality&&(c=t,u=e);for(var f=new Set,d=n.get(u),m=[],y=c.elems.length,p=0;p<y;p++){var h=c.elems[p],x=r(h);d.has(x)&&(f.add(x),m.push(h))}var g=rt(i,l,s,m,a);return n.set(g,f),g}function it(e,t,n,r,o,i,a){var s=new Set(e.sets);t.sets.forEach((function(e){return s.add(e)}));var l=nt(s,o,Xe[i]);if(0===e.cardinality){var c=rt(i,l,s,t.elems,a);return n.set(c,n.get(t)),c}if(0===t.cardinality){var u=rt(i,l,s,e.elems,a);return n.set(u,n.get(e)),u}var f=e,d=t;e.cardinality>t.cardinality&&(f=t,d=e);var m=new Set(n.get(d)),y=n.get(d),p=d.elems.slice();f.elems.forEach((function(e){var t=r(e);y.has(t)||(m.add(t),p.push(e))}));var h=rt(i,l,s,p,a);return n.set(h,m),h}function at(e,t,n,r,o,i){if("number"==typeof t)return{type:"composite",elems:[],color:i?i([]):void 0,sets:new Set,name:"()",cardinality:t,overlap:function(e){return e===this||Re(e)&&e.name===this.name&&e.cardinality===this.cardinality?this.cardinality:0},degree:0};if(Array.isArray(t))return rt(e,"()",new Set,t,i);var a=Array.from(r.values()),s=n.filter((function(e){var t=o(e);return a.every((function(e){return!e.has(t)}))}));return rt(e,"()",new Set,s,i)}function st(e,t){var n=void 0===t?{}:t,r=n.type,o=void 0===r?"intersection":r,i=n.min,a=void 0===i?0:i,s=n.max,l=void 0===s?1/0:s,c=n.empty,u=void 0!==c&&c,f=n.elems,d=void 0===f?[]:f,m=n.notPartOfAnySet,y=n.toElemKey,p=n.mergeColors,h=void 0===p?tt:p,x=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t.indexOf(n=i[r])>=0||(o[n]=e[n]);return o}(n,["type","min","max","empty","elems","notPartOfAnySet","toElemKey","mergeColors"]),g=[],v=new Map(e.map((function(e,t){return[e,t]}))),b=new Map(e.map((function(e){return[e,y?new Set(e.elems.map(y)):new Set(e.elems)]}))),_=y?null:b,w=y?b:null,S="union"===o?it:ot;function E(t){if(!(t.degree<a||t.degree>l||0===t.cardinality&&!u))if("distinctIntersection"===o){var n=e.filter((function(e){return!t.sets.has(e)})),r=t.elems.filter(y?function(e){var t=y(e);return n.every((function(e){return!w.get(e).has(t)}))}:function(e){return n.every((function(t){return!_.get(t).has(e)}))});if(r.length!==t.cardinality){var i=rt(o,t.name,t.sets,r,h);(0!==i.cardinality||u)&&g.push(i)}else g.push(t)}else g.push(t)}function k(e,t,n,r){if(!(t>l))for(var i=e.length,a=0;a<i;a++){for(var s=e[a],c=[],f=a+1;f<i;f++){var d=S(s,e[f],n,r,v,o,h);E(d),("union"===o||d.cardinality>0||u)&&c.push(d)}c.length>1&&k(c,t+1,n,r)}}a<=0&&E(y?at(o,m,d,w,y,h):at(o,m,d,_,(function(e){return e}),h));var M=e.map((function(e){var t=rt(o,e.name,new Set([e]),e.elems,h);return b.set(t,b.get(e)),E(t),t}));return y?k(M,2,w,y):k(M,2,_,(function(e){return e})),Ye(e,g,x)}function lt(e){return Object.assign({type:"set",cardinality:e.elems.length},e)}function ct(e,t){void 0===t&&(t={});var n=e;if(t.order){var r=function(e){if(!e)return We;switch(e){case"cardinality":case"cardinality:desc":return $e([Ve,We]);case"cardinality:asc":return $e([Ge(Ve),We]);case"name:desc":return Ge(We);default:return We}}(t.order);n=n.slice().sort(r)}return null!=t.limit?n.slice(0,t.limit):n}function ut(e){return e.name+":"+e.type+"#"+e.cardinality}function ft(e){return 0===e.sets.size}function dt(e,t,n){void 0===n&&(n=ut);var r={done:null,aKey:"",bKey:"",aIsSet:!1,bIsSet:!1,toKey:n};return e===t?(r.done=e.cardinality,r):0===e.cardinality||0===t.cardinality?(r.done=0,r):(r.aKey=n(e),r.bKey=n(t),r.aKey===r.bKey?(r.done=e.cardinality,r):(r.aIsSet=qe(e),r.bIsSet=qe(t),!r.aIsSet&&ft(e)||!r.bIsSet&&ft(t)?(r.done=0,r):r))}function mt(e,t){return!(t.bIsSet||!t.aIsSet)&&Array.from(e.sets).map(t.toKey).includes(t.aKey)}function yt(e,t){return!(!t.bIsSet||t.aIsSet)&&Array.from(e.sets).map(t.toKey).includes(t.bKey)}function pt(e,t){return void 0===t&&(t=ut),e.map((function(e){var n=Array.from(e.sets).map(t).sort();return{key:n.join("&"),s:n,sets:new Set(n),degree:e.degree,cardinality:e.cardinality}}))}function ht(e,t,n){var r=new Set;if(n.aIsSet)r.add(n.aKey);else for(var o=0,i=Array.from(e.sets);o<i.length;o++)r.add(n.toKey(i[o]));if(n.bIsSet)r.add(n.bKey);else for(var a=0,s=Array.from(t.sets);a<s.length;a++)r.add(n.toKey(s[a]));return Array.from(r).sort().join("&")}var xt=function(e,t,n){var r=t/Math.max(1,e.length+n),o=t-r*e.length,i=new Map(e.map((function(e,t){return[e,t]}))),a=r/(1+n),s=function(e){var t=i.get(e);if(null!=t)return o+r*t};return s.bandwidth=function(){return a},s};function gt(e,t,n){void 0===n&&(n=1);for(var r=0;r<e.length-n;r+=n){var o=e[r],i=e[r+1];if(o<i){if(o+t[r]/2>i-t[r+1]/2)return!0}else if(i+t[r+1]/2>o-t[r]/2)return!0}return!1}function vt(e,t,n,r,o){var i=e[e.length-1];if(!i.label)for(var a=e.length-2;a>0;--a)if(e[a].label){i=e[a];break}if(i.value<t){var s=n(i.value),l=n(t);if(s<l)s+r(i.value)/2<l-r(t)/2&&e.push({value:t,label:o(t)});else{var c=s-r(i.value)/2;l+r(t)/2<c&&e.push({value:t,label:o(t)})}}return e}function bt(e,t,n){return void 0===t&&(t=String),void 0===n&&(n=1),e.map((function(e,r){return{value:e,label:1===n||r%n==0?t(e):void 0}}))}function _t(e,t,n,r,o){var i=e.map((function(e){return t(e)})),a=e.map((function(e){return n(e)}));return gt(i,a)&&gt(i,a,2)?null:vt(bt(e,o),r,t,n,o)}function wt(e){return e.toLocaleString()}function St(e,t){void 0===t&&(t=1);for(var n=[],r=0;r<=e;r+=t)n.push(r);return n}function Et(e,t,n,r){if(t<=0)return[];for(var o=function(e,t){void 0===t&&(t=11);var n=Math.max(0,Math.floor(Math.log10(e)-.5)),r=Math.pow(10,n),o=[1,2,5],i=o.map((function(e){return e*r}));n>0&&i.unshift(o[o.length-1]*Math.pow(10,n-1)),i.push(o[0]*Math.pow(10,n+1));var a=Math.ceil(e/t);return i.filter((function(t){return t>=a&&t<=e}))}(e,t),i=0;i<o.length;i++){var a=_t(St(e,o[i]),n,r,e,wt);if(a)return a}return bt([0,e],wt)}var kt=function(e,t,n){var r=t[1]-t[0],o=e,i=function(e){return t[0]+e/o*r};return i.ticks=function(t){if(void 0===t&&(t=10),"vertical"===n.orientation){var r=Math.ceil(1.4*n.fontSizeHint);return Et(e,t+1,i,(function(){return r}))}var o=n.fontSizeHint/1.4;return Et(e,t+1,i,(function(e){return Math.ceil(wt(e).length*o)}))},i.tickFormat=function(){return wt},i};function Mt(e){var t=["","k","M","G"],n=Math.max(0,Math.min(Math.floor(Math.log10(e)/3),t.length-1));return""+(Math.round(e/Math.pow(10,3*n-1))/10).toLocaleString()+t[n]}function Ct(e,t){for(var n=[],r=Math.pow(10,t),o=1;o<=e;o*=r)n.push(o);return n}function At(e,t){for(var n=[],r=1,o=0;r<=e;r*=10,o++){n.push({value:r,label:1===t||o%t==0?Mt(r):void 0});for(var i=r+r;i<10*r&&i<e;i+=r*t)n.push({value:i})}return n}function Nt(e,t,n,r){if(t<=0)return[];for(var o=0,i=[1,2,5];o<i.length;o++){var a=i[o];if(_t(Ct(e,a),n,r,e,Mt))return vt(At(e,a),e,n,r,Mt)}return bt([0,e],Mt)}var Ot=function(e,t,n){var r=t[1]-t[0],o=e<1?1:Math.log10(e),i=function(e){var n=e<=1?0:Math.log10(e)/o;return t[0]+n*r};return i.ticks=function(t){if(void 0===t&&(t=10),"vertical"===n.orientation){var r=Math.ceil(1.4*n.fontSizeHint);return Nt(e,t+1,i,(function(){return r}))}var o=n.fontSizeHint/1.4;return Nt(e,t+1,i,(function(e){return Math.ceil(Mt(e).length*o)}))},i.tickFormat=function(){return Mt},i};function jt(e,t,n){var r=void 0===n?{}:n,o=r.sortAble,i=r.compress,a=void 0===i?"auto":i;if(0===e.length)return[];var s=e.map((function(e){return t(e)}));if("no"===a)return s;o&&s.sort((function(e,t){return e-t}));var l=function(e){if(0===e.length)return"";for(var t=[],n=0,r=function(r){return t.push(r===n+1?e[n].toString():r===n+2&&r<10?e[n]+","+e[n+1]:e[n]+"+"+(r-n-1)),r},o=1;o<e.length;o++)e[o]!==e[o-1]+1&&(n=r(o),n=o);return r(e.length),t.join(",")}(s),c=JSON.stringify(s).length,u=l.length+2;return u<.6*c||c-u>50||"yes"===a&&u<c?l:s}function It(e,t){return"string"==typeof e?0===e.length?[]:e.split(",").map((function(e){if(e.includes("+")){var n=e.split("+").map((function(e){return Number.parseInt(e,10)})),r=n[0];return t.slice(r,r+n[1]+1)}return t[Number.parseInt(e,10)]})).flat():e.map((function(e){return t[e]}))}function zt(e,t){return t.color&&(e.color=t.color),e}function Lt(e,t){var n;void 0===t&&(t={});var r=Ue({sortAble:!0},t),o=null!==(n=t.toKey)&&void 0!==n?n:ut,i=new Map(e.sets.map((function(e,t){return[o(e),t]}))),a=new Map(e.combinations.map((function(e,t){return[o(e),t]}))),s=function(t){if("set"===t.type)return{type:t.type,index:i.get(o(t))};var n=a.get(o(t));return null==n||n<0?jt(t.elems,e.toElemIndex,r):{type:t.type,index:n}},l=e.sets.map((function(e,t){return{key:o(e),i:t}}));return{sets:e.sets.map((function(t){return zt({name:t.name,cardinality:t.cardinality,elems:jt(t.elems,e.toElemIndex,r)},t)})),combinations:"no"===t.compress?e.combinations.map((function(t){var n=new Set(Array.from(t.sets).map(o));return zt({name:t.name,type:t.type,cardinality:t.cardinality,degree:t.degree,sets:l.filter((function(e){return n.has(e.key)})).map((function(e){return e.i})),elems:jt(t.elems,e.toElemIndex,r)},t)})):void 0,combinationOptions:e.combinationOptions,selection:e.selection?Array.isArray(e.selection)?jt(e.selection,e.toElemIndex,r):s(e.selection):void 0,queries:e.queries.map((function(t){var n=ze(t)?s(t.set):jt(Array.from(t.elems),e.toElemIndex,r);return{name:t.name,color:t.color,set:"string"==typeof n||Array.isArray(n)?void 0:n,elems:"string"==typeof n||Array.isArray(n)?n:void 0}}))}}function Tt(e,t){return 1===e.length?e[0].name:"("+e.map((function(e){return e.name})).join(Xe[t])+")"}function Pt(e,t){var n;void 0===t&&(t={});var r=null!==(n=t.toKey)&&void 0!==n?n:ut,o=new Map(e.sets.map((function(e,t){return[r(e),t]}))),i=new Map(e.combinations.map((function(e,t){return[r(e),t]}))),a=function(t){if(Re(t)){if("set"===t.type)return{type:t.type,index:o.get(r(t))};var n=i.get(r(t));if(null!=n&&n>=0)return{type:t.type,index:n}}var a=Ae(Re(t)?t.elems:t);return e.sets.map((function(e){return a(e.elems).intersection})).concat(e.combinations.map((function(e){return a(e.elems).intersection})))},s=new Map(e.sets.map((function(e,t){return[r(e),t]}))),l=function(e,t,n){var r=void 0===n?{}:n,o=r.toElemKey,i=r.what,a=void 0===i?"intersection":i,s=r.compress,l=void 0===s?"auto":s,c=e.concat(t),u=c.map((function(e,t){for(var n=function(e){if(e.overlap)return e.overlap;var t=Ae(e.elems,o);return function(n){return n.overlap?n.overlap(e):t(n.elems)[a]}}(e),r=[],i=t+1;i<c.length;i++)r.push(n(c[i]));return r}));if(u.pop(),"no"===l)return u;var f=function(e){return 0===e.length?"":e.length+";"+function(e){if(0===e.length)return"";for(var t=[],n=e[0],r=1,o=1;o<e.length;o++){var i=e[o];i===n?r++:(t.push(r>1?n+"="+(r-1):0===n?"":n.toString()),n=i,r=1)}return t.push(r>1?n+"="+r:0===n?"":n.toString()),t.join(",")}(e.flat())}(u);if("yes"===l)return f;var d=JSON.stringify(u).length;return f.length+2<.6*d?f:u}(e.sets,e.combinations,t),c="yes"===t.compress;return{sets:e.sets.map(c?function(e){return{n:e.name,cc:e.color,c:e.cardinality}}:function(e){return zt({name:e.name,cardinality:e.cardinality},e)}),combinations:e.combinations.map(c?function(t){var n=Array.from(t.sets).map((function(e){return s.get(r(e))})).sort((function(e,t){return e-t})),o={c:t.cardinality,s:n.reduce((function(e,t){return e+Math.pow(2,t)}),0)};return t.name!==Tt(n.map((function(t){return e.sets[t]})),t.type)&&(o.n=t.name),"intersection"!==t.type&&(o.type=t.type[0]),t.color&&(o.cc=t.color),o}:function(e){return zt({name:e.name,cardinality:e.cardinality,type:e.type,sets:Array.from(e.sets).map((function(e){return s.get(r(e))})).sort((function(e,t){return e-t}))},e)}),overlaps:l,selection:e.selection?a(e.selection):void 0,queries:e.queries.map((function(t){if(ze(t)){var n=a(t.set);return Array.isArray(n)?{name:t.name,color:t.color,overlaps:n}:{name:t.name,color:t.color,set:n}}var r=Ae(t.elems),o=e.sets.map((function(e){return r(e.elems).intersection})).concat(e.combinations.map((function(e){return r(e.elems).intersection})));return{name:t.name,color:t.color,overlaps:o}}))}}function qt(e){return"number"==typeof e.c}function Ft(e){return"number"==typeof e.c}var Rt=function(e,t,n){return function(e){var t=function(){var e=String.fromCharCode,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",r={};function o(e,t){if(!r[e]){r[e]={};for(var n=0;n<e.length;n++)r[e][e.charAt(n)]=n}return r[e][t]}var i={compressToBase64:function(e){if(null==e)return"";var n=i._compress(e,6,(function(e){return t.charAt(e)}));switch(n.length%4){default:case 0:return n;case 1:return n+"===";case 2:return n+"==";case 3:return n+"="}},decompressFromBase64:function(e){return null==e?"":""==e?null:i._decompress(e.length,32,(function(n){return o(t,e.charAt(n))}))},compressToUTF16:function(t){return null==t?"":i._compress(t,15,(function(t){return e(t+32)}))+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:i._decompress(e.length,16384,(function(t){return e.charCodeAt(t)-32}))},compressToUint8Array:function(e){for(var t=i.compress(e),n=new Uint8Array(2*t.length),r=0,o=t.length;r<o;r++){var a=t.charCodeAt(r);n[2*r]=a>>>8,n[2*r+1]=a%256}return n},decompressFromUint8Array:function(t){if(null==t)return i.decompress(t);for(var n=new Array(t.length/2),r=0,o=n.length;r<o;r++)n[r]=256*t[2*r]+t[2*r+1];var a=[];return n.forEach((function(t){a.push(e(t))})),i.decompress(a.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":i._compress(e,6,(function(e){return n.charAt(e)}))},decompressFromEncodedURIComponent:function(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),i._decompress(e.length,32,(function(t){return o(n,e.charAt(t))})))},compress:function(t){return i._compress(t,16,(function(t){return e(t)}))},_compress:function(e,t,n){if(null==e)return"";var r,o,i,a={},s={},l="",c="",u="",f=2,d=3,m=2,y=[],p=0,h=0;for(i=0;i<e.length;i+=1)if(l=e.charAt(i),Object.prototype.hasOwnProperty.call(a,l)||(a[l]=d++,s[l]=!0),c=u+l,Object.prototype.hasOwnProperty.call(a,c))u=c;else{if(Object.prototype.hasOwnProperty.call(s,u)){if(u.charCodeAt(0)<256){for(r=0;r<m;r++)p<<=1,h==t-1?(h=0,y.push(n(p)),p=0):h++;for(o=u.charCodeAt(0),r=0;r<8;r++)p=p<<1|1&o,h==t-1?(h=0,y.push(n(p)),p=0):h++,o>>=1}else{for(o=1,r=0;r<m;r++)p=p<<1|o,h==t-1?(h=0,y.push(n(p)),p=0):h++,o=0;for(o=u.charCodeAt(0),r=0;r<16;r++)p=p<<1|1&o,h==t-1?(h=0,y.push(n(p)),p=0):h++,o>>=1}0==--f&&(f=Math.pow(2,m),m++),delete s[u]}else for(o=a[u],r=0;r<m;r++)p=p<<1|1&o,h==t-1?(h=0,y.push(n(p)),p=0):h++,o>>=1;0==--f&&(f=Math.pow(2,m),m++),a[c]=d++,u=String(l)}if(""!==u){if(Object.prototype.hasOwnProperty.call(s,u)){if(u.charCodeAt(0)<256){for(r=0;r<m;r++)p<<=1,h==t-1?(h=0,y.push(n(p)),p=0):h++;for(o=u.charCodeAt(0),r=0;r<8;r++)p=p<<1|1&o,h==t-1?(h=0,y.push(n(p)),p=0):h++,o>>=1}else{for(o=1,r=0;r<m;r++)p=p<<1|o,h==t-1?(h=0,y.push(n(p)),p=0):h++,o=0;for(o=u.charCodeAt(0),r=0;r<16;r++)p=p<<1|1&o,h==t-1?(h=0,y.push(n(p)),p=0):h++,o>>=1}0==--f&&(f=Math.pow(2,m),m++),delete s[u]}else for(o=a[u],r=0;r<m;r++)p=p<<1|1&o,h==t-1?(h=0,y.push(n(p)),p=0):h++,o>>=1;0==--f&&(f=Math.pow(2,m),m++)}for(o=2,r=0;r<m;r++)p=p<<1|1&o,h==t-1?(h=0,y.push(n(p)),p=0):h++,o>>=1;for(;;){if(p<<=1,h==t-1){y.push(n(p));break}h++}return y.join("")},decompress:function(e){return null==e?"":""==e?null:i._decompress(e.length,32768,(function(t){return e.charCodeAt(t)}))},_decompress:function(t,n,r){var o,i,a,s,l,c,u,f=[],d=4,m=4,y=3,p="",h=[],x={val:r(0),position:n,index:1};for(o=0;o<3;o+=1)f[o]=o;for(a=0,l=Math.pow(2,2),c=1;c!=l;)s=x.val&x.position,x.position>>=1,0==x.position&&(x.position=n,x.val=r(x.index++)),a|=(s>0?1:0)*c,c<<=1;switch(a){case 0:for(a=0,l=Math.pow(2,8),c=1;c!=l;)s=x.val&x.position,x.position>>=1,0==x.position&&(x.position=n,x.val=r(x.index++)),a|=(s>0?1:0)*c,c<<=1;u=e(a);break;case 1:for(a=0,l=Math.pow(2,16),c=1;c!=l;)s=x.val&x.position,x.position>>=1,0==x.position&&(x.position=n,x.val=r(x.index++)),a|=(s>0?1:0)*c,c<<=1;u=e(a);break;case 2:return""}for(f[3]=u,i=u,h.push(u);;){if(x.index>t)return"";for(a=0,l=Math.pow(2,y),c=1;c!=l;)s=x.val&x.position,x.position>>=1,0==x.position&&(x.position=n,x.val=r(x.index++)),a|=(s>0?1:0)*c,c<<=1;switch(u=a){case 0:for(a=0,l=Math.pow(2,8),c=1;c!=l;)s=x.val&x.position,x.position>>=1,0==x.position&&(x.position=n,x.val=r(x.index++)),a|=(s>0?1:0)*c,c<<=1;f[m++]=e(a),u=m-1,d--;break;case 1:for(a=0,l=Math.pow(2,16),c=1;c!=l;)s=x.val&x.position,x.position>>=1,0==x.position&&(x.position=n,x.val=r(x.index++)),a|=(s>0?1:0)*c,c<<=1;f[m++]=e(a),u=m-1,d--;break;case 2:return h.join("")}if(0==d&&(d=Math.pow(2,y),y++),f[u])p=f[u];else{if(u!==m)return null;p=i+i.charAt(0)}h.push(p),f[m++]=i+p.charAt(0),i=p,0==--d&&(d=Math.pow(2,y),y++)}}};return i}();null!=e&&(e.exports=t)}(n={path:void 0,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}}),n.exports}();function Ht(e){return Array.from(e.classList).find((function(e){return e.startsWith("root-")})).slice("root-".length)}function Bt(e,t){var n,r;return null!==(n=null===(r=e.querySelector("titleTextStyle-"+t))||void 0===r?void 0:r.textContent)&&void 0!==n?n:"UpSetJS"}function Ut(e,t){var n,r;return null!==(n=null===(r=e.querySelector("descTextStyle-"+t))||void 0===r?void 0:r.textContent)&&void 0!==n?n:""}var Dt={},Kt=[],Wt={setLabel:"16px",axisTick:"10px",chartLabel:"16px",barLabel:"10px",legend:"10px",description:"16px",title:"24px",valueLabel:"12px",exportLabel:"10px"},Vt=[.18,.12,.7],Qt=[.6,.4],$t={type:"intersection",order:["cardinality:desc","name:asc"]},Gt=Object.keys(Wt),Jt=["axisTick","bar","barLabel","chartLabel","dot","legend","title","description","setLabel","set","valueLabel"],Yt=["dump","png","share","svg","vega"],Zt={sets:[],intersections:[],bb:{x:0,y:0,width:10,height:10}},Xt={sets:[{cx:0,cy:0,r:5,text:{x:3.5,y:-4},align:"start",verticalAlign:"bottom"}],intersections:[{sets:[0],x1:0,y1:5,arcs:[{mode:"i",ref:0,x2:0,y2:-5,sweep:!1,large:!1},{mode:"i",ref:0,x2:0,y2:5,sweep:!1,large:!1}],text:{x:0,y:0}}],bb:{x:-5,y:-5,width:10,height:10}},en={sets:[{cx:-4,cy:0,r:5,text:{x:-7.5,y:4},align:"end",verticalAlign:"top"},{cx:4,cy:0,r:5,text:{x:7.5,y:-4},align:"start",verticalAlign:"bottom"}],intersections:[{sets:[0],x1:0,y1:-3,arcs:[{mode:"i",ref:0,x2:0,y2:3,sweep:!1,large:!0},{mode:"o",ref:1,x2:0,y2:-3,sweep:!0,large:!1}],text:{x:-4,y:0}},{sets:[1],x1:0,y1:3,arcs:[{mode:"i",ref:1,x2:0,y2:-3,sweep:!1,large:!0},{mode:"o",ref:0,x2:0,y2:3,sweep:!0,large:!1}],text:{x:4,y:0}},{sets:[0,1],x1:0,y1:3,arcs:[{mode:"i",ref:0,x2:0,y2:-3,sweep:!1,large:!1},{mode:"i",ref:1,x2:0,y2:3,sweep:!1,large:!1}],text:{x:0,y:0}}],bb:{x:-9,y:-5,width:18,height:10}},tn={sets:[{cx:-3.464,cy:-2,r:5,text:{x:-7,y:-6},align:"end"},{cx:3.464,cy:-2,r:5,text:{x:7,y:-6},align:"start"},{cx:0,cy:4,r:5,text:{x:4,y:7.5},align:"start",verticalAlign:"top"}],intersections:[{sets:[0],x1:-4.855,y1:2.803,arcs:[{mode:"o",ref:2,x2:-1.39,y2:-.803,sweep:!0,large:!1},{mode:"o",ref:1,x2:0,y2:-5.606,sweep:!0,large:!1},{mode:"i",ref:0,x2:-4.855,y2:2.803,sweep:!1,large:!0}],text:{x:-4.216,y:-2.434}},{sets:[1],x1:0,y1:-5.606,arcs:[{mode:"o",ref:0,x2:1.39,y2:-.803,sweep:!0,large:!1},{mode:"o",ref:2,x2:4.855,y2:2.803,sweep:!0,large:!1},{mode:"i",ref:1,x2:0,y2:-5.606,sweep:!1,large:!0}],text:{x:4.216,y:-2.434}},{sets:[2],x1:-4.855,y1:2.803,arcs:[{mode:"o",ref:0,x2:0,y2:1.606,sweep:!1,large:!1},{mode:"o",ref:1,x2:4.855,y2:2.803,sweep:!1,large:!1},{mode:"i",ref:2,x2:-4.855,y2:2.803,sweep:!0,large:!0}],text:{x:0,y:4.869}},{sets:[0,1],x1:0,y1:-5.606,arcs:[{mode:"i",ref:1,x2:-1.39,y2:-.803,sweep:!1,large:!1},{mode:"o",ref:2,x2:1.39,y2:-.803,sweep:!0,large:!1},{mode:"i",ref:0,x2:0,y2:-5.606,sweep:!1,large:!1}],text:{x:0,y:-2.404}},{sets:[0,2],x1:-4.855,y1:2.803,arcs:[{mode:"i",ref:2,x2:-1.39,y2:-.803,sweep:!0,large:!1},{mode:"o",ref:1,x2:0,y2:1.606,sweep:!1,large:!1},{mode:"i",ref:0,x2:-4.855,y2:2.803,sweep:!0,large:!1}],text:{x:-2.082,y:1.202}},{sets:[1,2],x1:4.855,y1:2.803,arcs:[{mode:"i",ref:2,x2:1.39,y2:-.803,sweep:!1,large:!1},{mode:"o",ref:0,x2:0,y2:1.606,sweep:!0,large:!1},{mode:"i",ref:1,x2:4.855,y2:2.803,sweep:!1,large:!1}],text:{x:2.082,y:1.202}},{sets:[0,1,2],x1:1.39,y1:-.803,arcs:[{mode:"i",ref:0,x2:0,y2:1.606,sweep:!0,large:!1},{mode:"i",ref:1,x2:-1.39,y2:-.803,sweep:!0,large:!1},{mode:"i",ref:2,x2:1.39,y2:-.803,sweep:!0,large:!1}],text:{x:0,y:0}}],bb:{x:-8.464,y:-7,width:16.928,height:16}},nn={sets:[{cx:.439,cy:-1.061,rx:2.5,ry:5,rotation:45,text:{x:4.5,y:-4.5},align:"start",verticalAlign:"bottom"},{cx:2.561,cy:1.061,rx:2.5,ry:5,rotation:45,text:{x:4,y:3.75},align:"start",verticalAlign:"top"},{cx:-2.561,cy:1.061,rx:2.5,ry:5,rotation:-45,text:{x:-4,y:3.7},align:"end",verticalAlign:"top"},{cx:-.439,cy:-1.061,rx:2.5,ry:5,rotation:-45,text:{x:-4.5,y:-4.5},align:"end",verticalAlign:"bottom"}],intersections:[{sets:[0],x1:0,y1:-3.94,arcs:[{ref:0,mode:"i",x2:4.328,y2:-2.828,sweep:!0,large:!1},{ref:1,mode:"o",x2:2.179,y2:-1.858,large:!1},{ref:3,mode:"o",x2:0,y2:-3.94,large:!1}],text:{x:2.914,y:-3.536}},{sets:[1],x1:4.328,y1:-2.828,arcs:[{ref:1,mode:"i",x2:0,y2:5.006,sweep:!0,large:!0},{ref:2,mode:"o",x2:1.328,y2:2.828},{ref:3,mode:"o",x2:3.108,y2:-.328},{ref:0,mode:"o",x2:4.328,y2:-2.828}],text:{x:5.036,y:-1.414}},{sets:[2],x1:0,y1:5.006,arcs:[{ref:2,mode:"i",x2:-4.328,y2:-2.828,sweep:!0,large:!0},{ref:3,mode:"o",x2:-3.108,y2:-.328},{ref:0,mode:"o",x2:-1.328,y2:2.828},{ref:1,mode:"o",x2:0,y2:5.006}],text:{x:-5.036,y:-1.414}},{sets:[3],x1:-4.328,y1:-2.828,arcs:[{ref:3,mode:"i",x2:0,y2:-3.94,sweep:!0,large:!1},{ref:0,mode:"o",x2:-2.179,y2:-1.858,large:!1},{ref:2,mode:"o",x2:-4.328,y2:-2.828,large:!1}],text:{x:-2.914,y:-3.536}},{sets:[0,1],x1:4.328,y1:-2.828,arcs:[{ref:1,mode:"i",x2:3.108,y2:-.328,sweep:!0,large:!1},{ref:3,mode:"o",x2:2.179,y2:-1.858,sweep:!1,large:!1},{ref:0,mode:"i",x2:4.328,y2:-2.828,sweep:!0,large:!1}],text:{x:3.205,y:-1.672}},{sets:[0,2],x1:-1.328,y1:2.828,arcs:[{ref:0,mode:"i",x2:-3.108,y2:-.328,sweep:!0,large:!1},{ref:3,mode:"o",x2:-.969,y2:1.755,large:!1},{ref:1,mode:"o",x2:-1.328,y2:2.828,large:!1}],text:{x:-2.212,y:1.591}},{sets:[0,3],x1:0,y1:-3.94,arcs:[{ref:3,mode:"i",x2:2.179,y2:-1.858,sweep:!0,large:!1},{ref:1,mode:"o",x2:0,y2:.188,sweep:!1,large:!1},{ref:2,mode:"o",x2:-2.179,y2:-1.858,sweep:!1,large:!1},{ref:0,mode:"i",x2:0,y2:-3.94,sweep:!0}],text:{x:0,y:-1.87}},{sets:[1,2],x1:1.328,y1:2.828,arcs:[{ref:2,mode:"i",x2:0,y2:5.006,sweep:!0,large:!1},{ref:1,mode:"i",x2:-1.328,y2:2.828,sweep:!0,large:!1},{ref:0,mode:"o",x2:0,y2:2.346,large:!1},{ref:3,mode:"o",x2:1.328,y2:2.828}],text:{x:0,y:3.393}},{sets:[1,3],x1:3.108,y1:-.328,arcs:[{ref:3,mode:"i",x2:1.328,y2:2.828,sweep:!0,large:!1},{ref:2,mode:"o",x2:.969,y2:1.755,large:!1},{ref:1,mode:"i",x2:3.108,y2:-.328,large:!1}],text:{x:2.212,y:1.591}},{sets:[2,3],x1:-3.108,y1:-.328,arcs:[{ref:3,mode:"i",x2:-4.328,y2:-2.828,sweep:!0,large:!1},{ref:2,mode:"i",x2:-2.179,y2:-1.858,sweep:!0,large:!1},{ref:0,mode:"o",x2:-3.108,y2:-.328,large:!1}],text:{x:-3.205,y:-1.672}},{sets:[0,1,2],x1:0,y1:2.346,arcs:[{ref:0,mode:"i",x2:-1.328,y2:2.828,sweep:!0,large:!1},{ref:1,mode:"i",x2:-.969,y2:1.755,sweep:!0,large:!1},{ref:3,mode:"o",x2:0,y2:2.346,large:!1}],text:{x:-.766,y:2.31}},{sets:[0,1,3],x1:2.179,y1:-1.858,arcs:[{ref:3,mode:"i",x2:3.108,y2:-.328,sweep:!0,large:!1},{ref:0,mode:"i",x2:.969,y2:1.755,sweep:!0,large:!1},{ref:2,mode:"o",x2:0,y2:.188,sweep:!1,large:!1},{ref:1,mode:"i",x2:2.179,y2:-1.858,sweep:!0}],text:{x:1.558,y:-.056}},{sets:[0,2,3],x1:-.969,y1:1.755,arcs:[{ref:3,mode:"i",x2:-3.108,y2:-.328,sweep:!0,large:!1},{ref:0,mode:"i",x2:-2.179,y2:-1.858,sweep:!0,large:!1},{ref:2,mode:"i",x2:0,y2:.188,sweep:!0,large:!1},{ref:1,mode:"o",x2:-.969,y2:1.755}],text:{x:-1.558,y:-.056}},{sets:[1,2,3],x1:1.328,y1:2.828,arcs:[{ref:3,mode:"i",x2:0,y2:2.346,sweep:!0,large:!1},{ref:0,mode:"o",x2:.969,y2:1.755,sweep:!1,large:!1},{ref:2,mode:"i",x2:1.328,y2:2.828,sweep:!0,large:!1}],text:{x:.766,y:2.31}},{sets:[0,1,2,3],x1:0,y1:.188,arcs:[{ref:2,mode:"i",x2:.969,y2:1.755,sweep:!0,large:!1},{ref:0,mode:"i",x2:0,y2:2.346,sweep:!0,large:!1},{ref:3,mode:"i",x2:-.969,y2:1.755,sweep:!0,large:!1},{ref:1,mode:"i",x2:0,y2:.188,sweep:!0}],text:{x:0,y:1.43}}],bb:{x:-6.5,y:-5,width:13,height:10}},rn={sets:[{cx:.5,cy:-1,rx:2.5,ry:5,rotation:0,text:{x:2.25,y:-5},align:"start",verticalAlign:"bottom"},{cx:1.106,cy:.167,rx:2.5,ry:5,rotation:72,text:{x:4.5,y:1.5},align:"start",verticalAlign:"top"},{cx:.183,cy:1.103,rx:2.5,ry:5,rotation:144,text:{x:4,y:4},align:"start",verticalAlign:"bottom"},{cx:-.992,cy:.515,rx:2.5,ry:5,rotation:216,text:{x:-4.7,y:2},align:"end",verticalAlign:"bottom"},{cx:-.797,cy:-.785,rx:2.5,ry:5,rotation:288,text:{x:-4,y:-3.6},align:"end",verticalAlign:"bottom"}],intersections:[{sets:[0],x1:-1.653,y1:-3.541,arcs:[{ref:0,mode:"i",x2:2.857,y2:-2.666,sweep:!0,large:!1},{ref:1,mode:"o",x2:2.5,y2:-2.648,large:!1},{ref:3,mode:"o",x2:-.495,y2:-3.303,large:!1},{ref:4,mode:"o",x2:-1.653,y2:-3.541}],text:{x:.5,y:-5}},{sets:[1],x1:2.857,y1:-2.666,arcs:[{ref:1,mode:"i",x2:3.419,y2:1.893,sweep:!0,large:!1},{ref:2,mode:"o",x2:3.291,y2:1.559,large:!1},{ref:4,mode:"o",x2:2.988,y2:-1.492,large:!1},{ref:0,mode:"o",x2:2.857,y2:-2.666}],text:{x:4.91,y:-1.07}},{sets:[2],x1:3.419,y1:1.893,arcs:[{ref:2,mode:"i",x2:-.744,y2:3.837,sweep:!0,large:!1},{ref:3,mode:"o",x2:-.466,y2:3.612,large:!1},{ref:0,mode:"o",x2:2.342,y2:2.381,large:!1},{ref:1,mode:"o",x2:3.419,y2:1.893}],text:{x:2.534,y:4.339}},{sets:[3],x1:-.744,y1:3.837,arcs:[{ref:3,mode:"i",x2:-3.879,y2:.478,sweep:!0,large:!1},{ref:4,mode:"o",x2:-3.579,y2:.673,large:!1},{ref:1,mode:"o",x2:-1.54,y2:2.963,large:!1},{ref:2,mode:"o",x2:-.744,y2:3.837}],text:{x:-3.343,y:3.751}},{sets:[4],x1:-3.879,y1:.478,arcs:[{ref:4,mode:"i",x2:-1.653,y2:-3.541,sweep:!0,large:!1},{ref:0,mode:"o",x2:-1.746,y2:-3.196,large:!1},{ref:2,mode:"o",x2:-3.294,y2:-.549,large:!1},{ref:3,mode:"o",x2:-3.879,y2:.478}],text:{x:-4.601,y:-2.021}},{sets:[0,1],x1:2.5,y1:-2.648,arcs:[{ref:1,mode:"i",x2:2.857,y2:-2.666,sweep:!0,large:!1},{ref:0,mode:"i",x2:2.988,y2:-1.492,sweep:!0,large:!1},{ref:4,mode:"o",x2:2.572,y2:-1.839,large:!1},{ref:3,mode:"o",x2:2.5,y2:-2.648}],text:{x:2.741,y:-2.152}},{sets:[0,2],x1:2.342,y1:2.381,arcs:[{ref:0,mode:"i",x2:-.466,y2:3.612,sweep:!0,large:!1},{ref:3,mode:"o",x2:.257,y2:2.922,large:!1},{ref:1,mode:"o",x2:2.342,y2:2.381,large:!1}],text:{x:.5,y:3.5}},{sets:[0,3],x1:-.495,y1:-3.303,arcs:[{ref:3,mode:"i",x2:2.5,y2:-2.648,sweep:!0,large:!1},{ref:1,mode:"o",x2:1.51,y2:-2.515,large:!1},{ref:4,mode:"o",x2:-.495,y2:-3.303,large:!1}],text:{x:1.653,y:-3.125}},{sets:[0,4],x1:-1.653,y1:-3.541,arcs:[{ref:4,mode:"i",x2:-.495,y2:-3.303,sweep:!0,large:!1},{ref:3,mode:"o",x2:-.954,y2:-3.015,large:!1},{ref:2,mode:"o",x2:-1.746,y2:-3.196,large:!1},{ref:0,mode:"i",x2:-1.653,y2:-3.541}],text:{x:-1.199,y:-3.272}},{sets:[1,2],x1:3.291,y1:1.559,arcs:[{ref:2,mode:"i",x2:3.419,y2:1.893,sweep:!0,large:!1},{ref:1,mode:"i",x2:2.342,y2:2.381,sweep:!0,large:!1},{ref:0,mode:"o",x2:2.544,y2:1.878,large:!1},{ref:4,mode:"o",x2:3.291,y2:1.559}],text:{x:2.894,y:1.942}},{sets:[1,3],x1:-1.54,y1:2.963,arcs:[{ref:1,mode:"i",x2:-3.579,y2:.673,sweep:!0,large:!1},{ref:4,mode:"o",x2:-2.7,y2:1.147,large:!1},{ref:2,mode:"o",x2:-1.54,y2:2.963,large:!1}],text:{x:-3.174,y:1.557}},{sets:[1,4],x1:2.988,y1:-1.492,arcs:[{ref:4,mode:"i",x2:3.291,y2:1.559,sweep:!0,large:!1},{ref:2,mode:"o",x2:2.858,y2:.659,large:!1},{ref:0,mode:"o",x2:2.988,y2:-1.492,large:!1}],text:{x:3.483,y:.606}},{sets:[2,3],x1:-.466,y1:3.612,arcs:[{ref:3,mode:"i",x2:-.744,y2:3.837,sweep:!0,large:!1},{ref:2,mode:"i",x2:-1.54,y2:2.963,sweep:!0,large:!1},{ref:1,mode:"o",x2:-1,y2:3,large:!1},{ref:0,mode:"o",x2:-.466,y2:3.612}],text:{x:-.953,y:3.352}},{sets:[2,4],x1:-3.294,y1:-.549,arcs:[{ref:2,mode:"i",x2:-1.746,y2:-3.196,sweep:!0},{ref:0,mode:"o",x2:-1.925,y2:-2.213},{ref:3,mode:"o",x2:-3.294,y2:-.549}],text:{x:-2.462,y:-2.538}},{sets:[3,4],x1:-3.579,y1:.673,arcs:[{ref:4,mode:"i",x2:-3.879,y2:.478,sweep:!0,large:!1},{ref:3,mode:"i",x2:-3.294,y2:-.549,sweep:!0,large:!1},{ref:2,mode:"o",x2:-3.162,y2:-.024,large:!1},{ref:1,mode:"o",x2:-3.579,y2:.673}],text:{x:-3.483,y:.13}},{sets:[0,1,2],x1:2.544,y1:1.878,arcs:[{ref:0,mode:"i",x2:2.342,y2:2.381,sweep:!0,large:!1},{ref:1,mode:"i",x2:.257,y2:2.922,sweep:!0,large:!1},{ref:3,mode:"o",x2:.983,y2:2.049,large:!1},{ref:4,mode:"o",x2:2.544,y2:1.878}],text:{x:1.457,y:2.331}},{sets:[0,1,3],x1:1.51,y1:-2.515,arcs:[{ref:1,mode:"i",x2:2.5,y2:-2.648,sweep:!0,large:!1},{ref:3,mode:"i",x2:2.572,y2:-1.839,sweep:!0,large:!1},{ref:4,mode:"o",x2:1.51,y2:-2.515,large:!1}],text:{x:2.194,y:-2.334}},{sets:[0,1,4],x1:2.572,y1:-1.839,arcs:[{ref:4,mode:"i",x2:2.988,y2:-1.492,sweep:!0,large:!1},{ref:0,mode:"i",x2:2.858,y2:.659,sweep:!0,large:!1},{ref:2,mode:"o",x2:2.253,y2:-.302,large:!1},{ref:3,mode:"o",x2:2.572,y2:-1.839}],text:{x:2.667,y:-.665}},{sets:[0,2,3],x1:.257,y1:2.922,arcs:[{ref:3,mode:"i",x2:-.466,y2:3.612,sweep:!0,large:!1},{ref:0,mode:"i",x2:-1,y2:3,sweep:!0,large:!1},{ref:1,mode:"o",x2:.257,y2:2.922,large:!1}],text:{x:-.403,y:3.178}},{sets:[0,2,4],x1:-1.746,y1:-3.196,arcs:[{ref:2,mode:"i",x2:-.954,y2:-3.015,sweep:!0,large:!1},{ref:3,mode:"o",x2:-1.925,y2:-2.213,sweep:!1,large:!1},{ref:0,mode:"i",x2:-1.746,y2:-3.196,sweep:!0,large:!1}],text:{x:-1.542,y:-2.808}},{sets:[0,3,4],x1:-.495,y1:-3.303,arcs:[{ref:4,mode:"i",x2:1.51,y2:-2.515,sweep:!0,large:!1},{ref:1,mode:"o",x2:.409,y2:-2.236,large:!1},{ref:2,mode:"o",x2:-.954,y2:-3.015,large:!1},{ref:3,mode:"i",x2:-.495,y2:-3.303}],text:{x:.192,y:-2.742}},{sets:[1,2,3],x1:-1.54,y1:2.963,arcs:[{ref:2,mode:"i",x2:-2.7,y2:1.147,sweep:!0,large:!1},{ref:4,mode:"o",x2:-1.645,y2:1.568,large:!1},{ref:0,mode:"o",x2:-1,y2:3,large:!1},{ref:1,mode:"i",x2:-1.54,y2:2.963}],text:{x:-1.767,y:2.106}},{sets:[1,2,4],x1:2.858,y1:.659,arcs:[{ref:2,mode:"i",x2:3.291,y2:1.559,sweep:!0,large:!1},{ref:4,mode:"i",x2:2.544,y2:1.878,sweep:!0,large:!1},{ref:0,mode:"o",x2:2.858,y2:.659,large:!1}],text:{x:2.898,y:1.365}},{sets:[1,3,4],x1:-2.7,y1:1.147,arcs:[{ref:4,mode:"i",x2:-3.579,y2:.673,sweep:!0,large:!1},{ref:1,mode:"i",x2:-3.162,y2:-.024,sweep:!0,large:!1},{ref:2,mode:"o",x2:-2.7,y2:1.147,large:!1}],text:{x:-3.147,y:.599}},{sets:[2,3,4],x1:-3.294,y1:-.549,arcs:[{ref:3,mode:"i",x2:-1.925,y2:-2.213,sweep:!0,large:!1},{ref:0,mode:"o",x2:-2,y2:-1.08,large:!1},{ref:1,mode:"o",x2:-3.162,y2:-.024,large:!1},{ref:2,mode:"i",x2:-3.294,y2:-.549}],text:{x:-2.548,y:-1.029}},{sets:[0,1,2,3],x1:.983,y1:2.049,arcs:[{ref:3,mode:"i",x2:.257,y2:2.922,sweep:!0,large:!1},{ref:1,mode:"i",x2:-1,y2:3,sweep:!0,large:!1},{ref:0,mode:"i",x2:-1.645,y2:1.568,sweep:!0,large:!1},{ref:4,mode:"o",x2:.983,y2:2.049}],text:{x:-.407,y:2.31}},{sets:[0,1,2,4],x1:2.253,y1:-.302,arcs:[{ref:2,mode:"i",x2:2.858,y2:.659,sweep:!0,large:!1},{ref:0,mode:"i",x2:2.544,y2:1.878,sweep:!0,large:!1},{ref:4,mode:"i",x2:.983,y2:2.049,sweep:!0,large:!1},{ref:3,mode:"o",x2:2.253,y2:-.302}],text:{x:2.071,y:1.101}},{sets:[0,1,3,4],x1:1.51,y1:-2.515,arcs:[{ref:4,mode:"i",x2:2.572,y2:-1.839,sweep:!0,large:!1},{ref:3,mode:"i",x2:2.253,y2:-.302,sweep:!0,large:!1},{ref:2,mode:"o",x2:.409,y2:-2.236,sweep:!1,large:!1},{ref:1,mode:"i",x2:1.51,y2:-2.515,sweep:!0}],text:{x:1.687,y:-1.63}},{sets:[0,2,3,4],x1:-2,y1:-1.08,arcs:[{ref:0,mode:"i",x2:-1.925,y2:-2.213,sweep:!0,large:!1},{ref:3,mode:"i",x2:-.954,y2:-3.015,sweep:!0,large:!1},{ref:2,mode:"i",x2:.409,y2:-2.236,sweep:!0,large:!1},{ref:1,mode:"o",x2:-2,y2:-1.08}],text:{x:-1.028,y:-2.108}},{sets:[1,2,3,4],x1:-1.645,y1:1.568,arcs:[{ref:4,mode:"i",x2:-2.7,y2:1.147,sweep:!0,large:!1},{ref:2,mode:"i",x2:-3.162,y2:-.024,sweep:!0,large:!1},{ref:1,mode:"i",x2:-2,y2:-1.08,sweep:!0,large:!1},{ref:0,mode:"o",x2:-1.645,y2:1.568}],text:{x:-2.323,y:.327}},{sets:[0,1,2,3,4],x1:.409,y1:-2.236,arcs:[{ref:2,mode:"i",x2:2.253,y2:-.302,sweep:!0,large:!1},{ref:3,mode:"i",x2:.983,y2:2.049,sweep:!0,large:!1},{ref:4,mode:"i",x2:-1.645,y2:1.568,sweep:!0,large:!1},{ref:0,mode:"i",x2:-2,y2:-1.08,sweep:!0},{ref:1,mode:"i",x2:.409,y2:-2.236,sweep:!0}],text:{x:0,y:0}}],bb:{x:-5.5,y:-6,width:11.6,height:11.8}};function on(e){return"number"==typeof e.rx}var an={maxSets:5,compute:function(e,t,n,r){return sn(e.length,n,r)}};function sn(e,t,n){var r=[Zt,Xt,en,tn,nn,rn],o=r[Math.min(r.length-1,e)],i=Math.min(t/o.bb.width,n/o.bb.height),a=i*-o.bb.x+(t-i*o.bb.width)/2,s=i*-o.bb.y+(n-i*o.bb.height)/2,l=function(e){return a+i*e},c=function(e){return s+i*e};return{sets:o.sets.map((function(e){return Object.assign({},e,{cx:l(e.cx),cy:c(e.cy),text:{x:l(e.text.x),y:c(e.text.y)}},on(e)?{rx:e.rx*i,ry:e.ry*i}:{r:e.r*i})})),intersections:o.intersections.map((function(e){return{text:{x:l(e.text.x),y:c(e.text.y)},x1:l(e.x1),y1:c(e.y1),sets:e.sets,arcs:e.arcs.map((function(e){return Object.assign({},e,{x2:l(e.x2),y2:c(e.y2)})}))}}))}}var ln={selectionColor:"#ffa500",color:"#000000",hasSelectionColor:"",opacity:1,hasSelectionOpacity:-1,textColor:"#000000",hoverHintColor:"#cccccc",notMemberColor:"#d3d3d3",alternatingBackgroundColor:"rgba(0,0,0,0.05)",valueTextColor:"#000000",strokeColor:"#000000",backgroundColor:"#ffffff",filled:!1},cn={selectionColor:"#ffa500",color:"#cccccc",hasSelectionColor:"",opacity:1,hasSelectionOpacity:-1,textColor:"#ffffff",hoverHintColor:"#d9d9d9",notMemberColor:"#666666",alternatingBackgroundColor:"rgba(255, 255, 255, 0.2)",valueTextColor:"#ffffff",strokeColor:"#ffffff",backgroundColor:"#303030",filled:!1},un={selectionColor:"#4c78a8",color:"#4c78a8",hasSelectionColor:"#c9d6e5",opacity:1,hasSelectionOpacity:-1,textColor:"#000000",hoverHintColor:"#cccccc",notMemberColor:"#d3d3d3",alternatingBackgroundColor:"rgba(0,0,0,0.05)",valueTextColor:"#000000",strokeColor:"#000000",backgroundColor:"#ffffff",filled:!0};function fn(e){return"vega"===e?un:"dark"===e?cn:ln}function dn(e,t,n){void 0===n&&(n={});var r=fn(t.theme);return Object.assign(e,{queryLegend:null!=t.queries&&t.queries.length>0,theme:"light",padding:20,selection:null,title:"",description:"",fontFamily:"sans-serif",queries:Kt,exportButtons:!0,className:"",fontSizes:Wt,classNames:Dt,style:Dt,styles:Dt,toKey:ut,tooltips:!0},r,t,n,t.fontSizes?{fontSizes:Object.assign({},Wt,t.fontSizes)}:Dt)}function mn(e){return e.toLocaleString()}function yn(e){return function(e){return dn({barPadding:.3,dotPadding:.7,combinations:$t,combinationName:null==e.combinations||(t=e.combinations,Array.isArray(t))||"union"!==e.combinations.type?"Intersection Size":"Union Size",barLabelOffset:2,setNameAxisOffset:"auto",combinationNameAxisOffset:"auto",setName:"Set Size",widthRatios:Vt,heightRatios:Qt,numericScale:"linear",bandScale:"band",childrenFactories:Dt,setAddons:Kt,combinationAddons:Kt,setAddonPadding:1,combinationAddonPadding:1,emptySelection:!0},e);var t}(e)}function pn(e){return function(e){return dn({valueFormat:mn,layout:an},e,{exportButtons:!1!==e.exportButtons&&Object.assign({},!0===e.exportButtons?{}:e.exportButtons,{vega:!1})})}(e)}function hn(e){return function(e){return dn({numericScale:"linear",barPadding:.3,barLabelOffset:2,combinationName:"Intersection Size",combinationNameAxisOffset:"auto"},e,{exportButtons:!1!==e.exportButtons&&Object.assign({},!0===e.exportButtons?{}:e.exportButtons,{vega:!1})})}(e)}function xn(e,t){var n=e.cloneNode(!0);return n.style.backgroundColor=fn(e.dataset.theme).backgroundColor,t&&Array.from(n.querySelectorAll(t)).forEach((function(e){return e.remove()})),(new XMLSerializer).serializeToString(n)}function gn(e,t){var n=t.type,r=void 0===n?"png":n,o=t.title,i=new Blob([xn(e,t.toRemove)],{type:"image/svg+xml;charset=utf-8"}),a=Ht(e),s=null!=o?o:Bt(e,a),l=URL.createObjectURL(i);return"svg"===r?(vn(l,s+"."+r,e.ownerDocument),URL.revokeObjectURL(l),Promise.resolve()):function(e,t){var n=t.ownerDocument.createElement("canvas"),r=t.getBoundingClientRect();n.width=r.width,n.height=r.height;var o=n.getContext("2d"),i=new Image(n.width,n.height);return new Promise((function(t){i.onload=function(){o.drawImage(i,0,0);var e=n.toDataURL("image/png");t(e)},i.src=e}))}(l,e).then((function(t){vn(t,s+"."+r,e.ownerDocument),URL.revokeObjectURL(l)}))}function vn(e,t,n){var r=n.createElement("a");r.href=e,r.style.position="absolute",r.style.left="-10000px",r.style.top="-10000px",r.download=t,n.body.appendChild(r),r.click(),r.remove()}function bn(){return(bn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var _n=["bandScale","numericScale"].concat(["selectionColor","color","textColor","hoverHintColor","notMemberColor","alternatingBackgroundColor","hasSelectionColor","hasSelectionOpacity","opacity","strokeColor","valueTextColor"],["padding","barPadding","dotPadding","widthRatios","heightRatios"],["fontSizes","combinationName","setName","barLabelOffset","setNameAxisOffset","combinationNameAxisOffset","theme","fontFamily","emptySelection","exportButtons","queryLegend"]);function wn(e){var t,n=yn({width:0,height:0,sets:null!==(t=e.sets)&&void 0!==t?t:[],combinations:e.combinations,theme:e.theme}),r={};return _n.forEach((function(t){var o=e[t],i=n[t];if("theme"!==t||"light"===o){if(null!=o&&o!==i)if("fontSizes"===t){var a=!0,s={};Gt.forEach((function(e){var t=o[e];t!==i[e]&&(s[e]=t,a=!1)})),a||(r[t]=s)}else r[t]=o}else r[t]=o})),r}function Sn(e,t,n,r,o){return Object.assign({$schema:"https://upset.js.org/schema.1.0.0.json",name:"string"==typeof n.title?n.title:"UpSetJS",description:"string"==typeof n.description?n.description:"",mode:o,author:r,elements:t,attrs:[],props:wn(n)},e)}function En(e,t,n,r){return Object.assign({$schema:"https://upset.js.org/schema-static.1.0.0.json",name:"string"==typeof t.title?t.title:"UpSetJS",description:"string"==typeof t.description?t.description:"",mode:r,author:n,props:wn(t)},e)}function kn(e,t,n,r){var o,i;void 0===n&&(n=!1);var a=[],s=new Map;return Sn(Lt({sets:e.sets,queries:null!==(o=null===(i=e.queries)||void 0===i?void 0:i.filter((function(e){return je(e)||ze(e)})))&&void 0!==o?o:[],toElemIndex:function(e){return s.has(e)?s.get(e):(s.set(e,a.length),a.push(e),a.length-1)},selection:e.selection&&Re(e.selection)?e.selection:void 0,combinations:t.cs.v,combinationOptions:Array.isArray(e.combinations)?{}:e.combinations},{compress:n?"yes":"no"}),a,e,void 0,r)}function Mn(e,t,n,r){var o=kn(t,n,!1,r),i=URL.createObjectURL(new Blob([JSON.stringify(o,null,2)],{type:"application/json"}));vn(i,o.name+".json",e.ownerDocument),URL.revokeObjectURL(i)}function Cn(e,t,n){var r=kn(e,t,!0,n);delete r.$schema;var o=Rt.compressToEncodedURIComponent(JSON.stringify(r)),i=new URL("https://upset.js.org/app/embed.html");if(i.searchParams.set("p",o),i.toString().length<4096)return window.open(i.toString(),"_blank"),!0;var a=function(e,t,n,r){var o,i;return void 0===n&&(n=!1),En(Pt({sets:e.sets,queries:null!==(o=null===(i=e.queries)||void 0===i?void 0:i.filter((function(e){return je(e)||ze(e)})))&&void 0!==o?o:[],selection:e.selection&&Re(e.selection)?e.selection:void 0,combinations:t.cs.v},{compress:n?"yes":"no"}),e,void 0,r)}(e,t,!0,n);delete a.$schema;var s=Rt.compressToEncodedURIComponent(JSON.stringify(a));if(i.searchParams.set("p",s),i.toString().length<4096)return window.open(i.toString(),"_blank"),!0;i.searchParams.delete("p");var l=window.open(i.toString(),"_blank");return null==l||l.addEventListener("load",(function(){null==l||l.postMessage(r,i.origin)})),!1}function An(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(" ")}function Nn(e){return"upset-"+Math.random().toString(36).slice(4)}function On(e){return null!=e&&!Array.isArray(e)}function jn(e,t){var n=Ae(e,t);return function(e){return n(e.elems).intersection}}function In(e,t){if(!e)return Ln;if("function"==typeof e)return e;if(Array.isArray(e))return jn(e,t);var n=e;if(n.overlap)return n.overlap.bind(n);var r=jn(n.elems,t);return function(e){return e.overlap?e.overlap(n):r(e)}}function zn(e){return Array.isArray(e)?"Array("+e.length+")":"function"==typeof e?"?":null==e?void 0:e.name}function Ln(){return 0}function Tn(e){return null==e?10:e.endsWith("pt")?Math.floor(4/3*Number.parseInt(e,10)):Number.parseInt(e,10)}function Pn(e){return"linear"===e?kt:"log"===e?Ot:e}function qn(e){return Array.isArray(e)}function Fn(e){var t=e.transform,n=e.styleId,r=e.exportButtons,o=e.exportChart;if(!r)return null;var i=0,a=[];return!0!==r&&!1===r.svg||(a.push(Me.createElement("g",{key:"svg",className:"exportButton-"+n,onClick:o,"data-type":"svg",transform:"translate(-"+(i+=26)+", 0)"},Me.createElement("title",null,"Download SVG Image"),Me.createElement("rect",{y:-9,width:26,height:11,rx:2,ry:2}),Me.createElement("text",{className:"exportTextStyle-"+n,x:13},"SVG"))),i+=2),!0!==r&&!1===r.png||(a.push(Me.createElement("g",{key:"png",className:"exportButton-"+n,onClick:o,"data-type":"png",transform:"translate(-"+(i+=26)+", 0)"},Me.createElement("title",null,"Download PNG Image"),Me.createElement("rect",{y:-9,width:26,height:11,rx:2,ry:2}),Me.createElement("text",{className:"exportTextStyle-"+n,x:13},"PNG"))),i+=2),!0!==r&&!1===r.vega||(a.push(Me.createElement("g",{key:"vega",className:"exportButton-"+n,onClick:o,"data-type":"vega",transform:"translate(-"+(i+=34)+", 0)"},Me.createElement("title",null,"Download VEGA-Lite Specification"),Me.createElement("rect",{y:-9,width:34,height:11,rx:2,ry:2}),Me.createElement("text",{className:"exportTextStyle-"+n,x:17},"VEGA"))),i+=2),!0!==r&&!1===r.dump||(a.push(Me.createElement("g",{key:"dump",className:"exportButton-"+n,onClick:o,"data-type":"dump",transform:"translate(-"+(i+=34)+", 0)"},Me.createElement("title",null,"Download UpSet.js JSON Dump"),Me.createElement("rect",{y:-9,width:34,height:11,rx:2,ry:2}),Me.createElement("text",{className:"exportTextStyle-"+n,x:17},"DUMP"))),i+=2),!0!==r&&!1===r.share||(a.push(Me.createElement("g",{key:"share",className:"exportButton-"+n,onClick:o,"data-type":"share",transform:"translate(-"+(i+=42)+", 0)"},Me.createElement("title",null,"Open a shareable URL"),Me.createElement("rect",{y:-9,width:42,height:11,rx:2,ry:2}),Me.createElement("text",{className:"exportTextStyle-"+n,x:21},"SHARE"))),i+=2),Me.createElement("g",{className:"exportButtons-"+n,transform:t},a)}var Rn=Me.memo((function(e){var t=e.queries,n=e.style,r=e.data;return Me.createElement("text",{transform:"translate("+e.x+",4)",style:n.styles.legend,className:An("legendTextStyle-"+n.id,n.classNames.legend)},t.map((function(e,t){var n=null;return ze(e)?n=e.set.cardinality:je(e)&&(n=e.elems instanceof Set?e.elems.size:e.elems.length),Me.createElement(Me.Fragment,{key:e.name},Me.createElement("tspan",{className:"fillQ"+t+"-"+r.id},"  ⬤ "),Me.createElement("tspan",null,e.name,null!=n?": "+r.sets.format(n):""))})))})),Hn=Me.memo((function(e){var t=e.tickSizeInner,n=e.orient,r=e.name,o=e.style,i="top"===n||"left"===n?-1:1;return Me.createElement("g",{transform:"translate(0, "+(e.pos+.5)+")"},r&&Me.createElement("text",{x:i*e.spacing,dy:"0.32em",className:An("axisTextStyle-"+o.id,"right"===n?"startText-"+o.id:"endText-"+o.id,o.classNames.axisTick),style:o.styles.axisTick},r),Me.createElement("line",{x2:i*t,className:"axisLine-"+o.id}))})),Bn=Me.memo((function(e){var t=e.name,n=e.orient,r=e.tickSizeInner,o=e.style,i="top"===n||"left"===n?-1:1;return Me.createElement("g",{transform:"translate("+(e.pos+.5)+", 0)"},t&&Me.createElement("text",{y:i*e.spacing,dy:"top"===n?"0em":"0.71em",className:An("axisTextStyle-"+o.id,o.classNames.axisTick),style:o.styles.axisTick},t),Me.createElement("line",{y2:i*r,className:"axisLine-"+o.id}))}));function Un(e){var t=e.scale,n=e.orient,r=e.tickSizeInner,o=void 0===r?6:r,i=e.tickSizeOuter,a=void 0===i?6:i,s=e.tickPadding,l=void 0===s?3:s,c=e.size,u=e.start,f=e.style,d=e.transform,m=Math.max(o,0)+l,y=u,p=c,h="top"===n||"left"===n?-1:1,x="left"===n||"right"===n?Hn:Bn,g=t.ticks().map((function(e){return"number"==typeof e?{value:e,label:String(e)}:e}));return Me.createElement("g",{transform:d},g.map((function(e){return Me.createElement(x,{key:e.value,pos:t(e.value),name:e.label,spacing:m,tickSizeInner:o,orient:n,style:f})})),Me.createElement("path",{className:"axisLine-"+f.id,d:"left"===n||"right"===n?a?"M"+h*a+","+y+"H0.5V"+p+"H"+h*a:"M0.5,"+y+"V"+p:a?"M"+y+","+h*a+"V0.5H"+p+"V"+h*a:"M"+y+",0.5H"+p}))}var Dn=Me.memo((function(e){var t=e.width,n=e.text,r=e.dy,o=e.x,i=e.style,a=e.className,s=$(null),l=W("string"==typeof n?[n]:[]),c=l[0],u=l[1];return Q((function(){u("string"==typeof n?[n]:[])}),[n]),Q((function(){if(s.current&&!(s.current.childElementCount>0)&&"string"==typeof n){for(var e=s.current.getComputedTextLength(),r=[],o=t,i=0,a=s.current.getStartPositionOfChar(0);e>o;){a.x=o;var l=s.current.getCharNumAtPosition(a),c=n.lastIndexOf(" ",l);if(c<i)break;r.push(n.slice(i,c+1)),i=c+1,o=s.current.getEndPositionOfChar(c+1).x+t}r.push(n.slice(i)),u(r)}}),[s,n,t]),n?Me.createElement("tspan",{ref:s,dy:r,style:i,x:o,className:a},c.length>1?c.map((function(e,t){return Me.createElement("tspan",{key:e,x:0,dy:t>0?"1.2em":r},e)})):n):null})),Kn=Me.memo((function(e){var t=e.width,n=e.descriptionWidth,r=void 0===n?t:n,o=e.style;return o.title||o.description?Me.createElement("text",null,Me.createElement(Dn,{text:o.title,width:t,dy:"10px",className:An("titleTextStyle-"+o.id,o.classNames.title),style:o.styles.title}),Me.createElement(Dn,{x:0,width:r,dy:o.title?"2em":"10px",text:o.description,className:An("descTextStyle-"+o.id,o.classNames.description),style:o.styles.description})):null}));function Wn(){}function Vn(e){return e?function(t,n){return function(r){return e.call(this,t,r.nativeEvent,n.map((function(e){return e.createOnHandlerData?e.createOnHandlerData(t):null})))}}:Wn}function Qn(e,t){var n=0,r=0;return function(o){var i=0;return"before"===o.position?i=-(n+=o.size+t):(i=e+r+t,r+=o.size+t),i}}function $n(e,t,n){var r,o;return void 0===n&&(n="fill"),t?e?Object.assign(((r={})[n]=t,r),e):t?((o={})[n]=t,o):void 0:e}var Gn=Me.memo((function(e){var t=e.size,n=e.style,r=e.data,o=Qn(t.sets.w+t.labels.w+t.cs.w,t.sets.addonPadding),i=Qn(t.cs.h+t.sets.h,t.cs.addonPadding),a="auto"===n.cs.offset?r.cs.labelOffset:n.cs.offset,s="auto"===n.sets.offset?r.sets.labelOffset:n.sets.offset;return Me.createElement("g",null,Me.createElement(Kn,{style:n,width:t.cs.x-a-20}),Me.createElement("g",{transform:"translate("+t.cs.x+","+t.cs.y+")","data-upset":"csaxis"},Me.createElement(Un,{scale:r.cs.y,orient:"left",size:t.cs.h,start:t.cs.h-r.cs.yAxisWidth,style:n}),Me.createElement("line",{x1:0,x2:t.cs.w,y1:t.cs.h+1,y2:t.cs.h+1,className:"axisLine-"+n.id}),Me.createElement("text",{className:An("cChartTextStyle-"+n.id,n.classNames.chartLabel),style:n.styles.chartLabel,transform:"translate("+-a+", "+t.cs.h/2+")rotate(-90)"},n.cs.name),t.cs.addons.map((function(e){return Me.createElement("text",{key:e.name,className:An("cChartTextStyle-"+n.id,n.classNames.chartLabel),style:n.styles.chartLabel,transform:"translate("+-a+", "+(i(e)+e.size/2)+")rotate(-90)"},e.name)}))),Me.createElement("g",{transform:"translate("+t.sets.x+","+t.sets.y+")","data-upset":"setaxis"},Me.createElement(Un,{scale:r.sets.x,orient:"bottom",size:t.sets.w,start:t.sets.w-r.sets.xAxisWidth,transform:"translate(0, "+t.sets.h+")",style:n}),Me.createElement("text",{className:An("sChartTextStyle-"+n.id,n.classNames.chartLabel),style:n.styles.chartLabel,transform:"translate("+t.sets.w/2+", "+(t.sets.h+s)+")"},n.sets.name),t.sets.addons.map((function(e){return Me.createElement("text",{key:e.name,className:An("sChartTextStyle-"+n.id,n.classNames.chartLabel),style:n.styles.chartLabel,transform:"translate("+(o(e)+e.size/2)+", "+(t.sets.h+s)+")"},e.name)}))))})),Jn=Me.memo((function(e){var t=e.name;return Me.createElement("circle",{r:e.r,cx:e.cx,cy:e.cy,className:e.className,style:$n(e.style,e.fill)},t&&Me.createElement("title",null,t))})),Yn=Me.memo((function(e){var t=e.d,n=e.h,r=e.className,o=e.data,i=e.size,a=e.style,s=e.children,l=o.cs.y(t.cardinality),c=Qn(i.cs.h+i.sets.h,i.cs.addonPadding);return Me.createElement("g",{transform:"translate("+o.cs.x(t)+", 0)",onMouseEnter:n.onMouseEnter(t,i.cs.addons),onMouseLeave:n.onMouseLeave,onClick:n.onClick(t,i.cs.addons),onContextMenu:n.onContextMenu(t,i.cs.addons),onMouseMove:n.onMouseMove(t,i.cs.addons),className:r,"data-cardinality":t.cardinality},a.tooltips&&Me.createElement("title",null,t.name,": ",o.cs.format(t.cardinality)),Me.createElement("rect",{y:-i.cs.before,width:o.cs.bandWidth,height:i.sets.h+i.cs.h+i.cs.before+i.cs.after,className:"hoverBar-"+a.id}),Me.createElement("rect",{y:l,height:i.cs.h-l,width:o.cs.bandWidth,className:An("fillPrimary-"+a.id,a.classNames.bar),style:$n(a.styles.bar,t.color)}),Me.createElement("text",{y:l-a.barLabelOffset,x:o.cs.bandWidth/2,style:a.styles.barLabel,className:An("cBarTextStyle-"+a.id,a.classNames.barLabel)},o.cs.format(t.cardinality)),Me.createElement("text",{y:-a.barLabelOffset-i.cs.before,x:o.cs.bandWidth/2,style:a.styles.barLabel,className:An("hoverBarTextStyle-"+a.id,a.classNames.barLabel)},t.name),o.sets.v.map((function(e,n){var r=o.cs.has(t,e);return Me.createElement(Jn,{key:o.sets.keys[n],r:o.r,cx:o.cs.cx,cy:o.sets.y(e)+o.sets.cy,name:a.tooltips?r?e.name:t.name:"",style:a.styles.dot,fill:r?t.color:void 0,className:An(r?"fillPrimary-"+a.id:"fillNotMember-"+a.id,a.classNames.dot)})})),t.sets.size>1&&Me.createElement("line",{x1:o.cs.cx,y1:o.sets.y(o.sets.v.find((function(e){return o.cs.has(t,e)})))+o.sets.cy,x2:o.cs.cx,y2:o.sets.y(o.sets.rv.find((function(e){return o.cs.has(t,e)})))+o.sets.cy,style:t.color?{stroke:t.color}:void 0,className:"upsetLine-"+o.id}),i.cs.addons.map((function(e){return Me.createElement("g",{key:e.name,transform:"translate(0,"+c(e)+")"},e.render({set:t,width:o.cs.bandWidth,height:e.size,theme:a.theme}))})),s)})),Zn=Me.memo((function(e){var t=e.d,n=e.i,r=e.h,o=e.className,i=e.size,a=e.data,s=e.style,l=e.children,c=a.sets.x(t.cardinality),u=Qn(i.sets.w+i.labels.w+i.cs.w,i.sets.addonPadding);return Me.createElement("g",{transform:"translate(0, "+a.sets.y(t)+")",onMouseEnter:r.onMouseEnter(t,i.sets.addons),onMouseLeave:r.onMouseLeave,onClick:r.onClick(t,i.sets.addons),onContextMenu:r.onContextMenu(t,i.sets.addons),onMouseMove:r.onMouseMove(t,i.sets.addons),className:o,"data-cardinality":t.cardinality},s.tooltips&&Me.createElement("title",null,t.name,": ",a.sets.format(t.cardinality)),Me.createElement("rect",{x:-i.sets.before,width:i.sets.w+i.labels.w+i.cs.w+i.sets.after,height:a.sets.bandWidth,className:"hoverBar-"+s.id}),n%2==1&&Me.createElement("rect",{x:i.sets.w,width:i.labels.w+i.cs.w+i.sets.after,height:a.sets.bandWidth,className:"fillAlternating-"+s.id}),Me.createElement("rect",{x:c,width:i.sets.w-c,height:a.sets.bandWidth,className:An("fillPrimary-"+s.id,s.classNames.bar),style:$n(s.styles.bar,t.color)}),Me.createElement("text",{x:c,dx:-s.barLabelOffset,y:a.sets.bandWidth/2,style:s.styles.barLabel,className:An("sBarTextStyle-"+s.id,s.classNames.barLabel)},a.sets.format(t.cardinality)),Me.createElement("text",{x:i.sets.w+i.labels.w/2,y:a.sets.bandWidth/2,className:An("setTextStyle-"+s.id,s.classNames.setLabel),style:s.styles.setLabel,clipPath:"url(#clip-"+i.id+")"},t.name),i.sets.addons.map((function(e){return Me.createElement("g",{key:e.name,transform:"translate("+u(e)+",0)"},e.render({set:t,width:e.size,height:a.sets.bandWidth,theme:s.theme}))})),l)})),Xn=Me.memo((function(e){var t=e.data,n=e.size,r=e.style,o=e.h,i=e.setChildrenFactory,a=e.combinationChildrenFactory;return Me.createElement("g",{className:o.hasClick?"clickAble-"+r.id:void 0},Me.createElement("g",{transform:"translate("+n.sets.x+","+n.sets.y+")","data-upset":"sets"},t.sets.v.map((function(e,a){return Me.createElement(Zn,{key:t.sets.keys[a],d:e,i:a,h:o,className:o.hasClick||o.hasHover?"interactive-"+r.id:void 0,data:t,style:r,size:n},i&&i(e))}))),Me.createElement("g",{transform:"translate("+n.cs.x+","+n.cs.y+")","data-upset":"cs"},t.cs.v.map((function(e,i){return Me.createElement(Yn,{key:t.cs.keys[i],d:e,h:o,className:o.hasClick||o.hasHover?"interactive-"+r.id:void 0,data:t,style:r,size:n},a&&a(e))}))))}));function er(e){var t=e.data,n=e.size,r=e.style,o=e.elemOverlap,i=e.secondary,a=e.tooltip,s=e.transform,l=e.empty,c=e.combinationAddons,u=t.cs.bandWidth,f=n.cs.h+n.sets.h,d=n.cs.h,m=An("fill"+e.suffix,!a&&"pnone-"+r.id,r.classNames.bar);return Me.createElement("g",{transform:s,"data-upset":i?"cs-q":"cs-s"},t.cs.v.map((function(e,s){var y=t.cs.x(e),p=t.cs.keys[s];if(l&&!i)return Me.createElement("rect",{key:p,x:y,y:d,height:0,width:u,className:m,style:$n(r.styles.bar,r.selectionColor?void 0:e.color)},a&&Me.createElement("title",null));var h=o(e);if(0===h)return null;var x=t.cs.y(h),g=a&&Me.createElement("title",null,e.name+" ∩ "+a+": "+h),v=i?Me.createElement("path",{key:p,transform:"translate("+y+", "+x+")",d:"M0,-1 l"+u+",0 l0,2 l"+-u+",0 L-"+t.triangleSize+",-"+t.triangleSize+" L-"+t.triangleSize+","+t.triangleSize+" Z",className:m,"data-i":s,"data-cardinality":h,style:$n(void 0,r.selectionColor?void 0:e.color)},g):Me.createElement("rect",{key:p,x:y,y:x,height:d-x,"data-i":s,"data-cardinality":h,width:u,className:m,style:$n(r.styles.bar,r.selectionColor?void 0:e.color)},g),b=Qn(f,n.cs.addonPadding),_=c.map((function(t){var n=b(t),o=t.render({set:e,width:u,height:t.size,theme:r.theme});return o?Me.createElement("g",{key:t.name,transform:"translate("+y+","+n+")"},o):null})).filter(Boolean);return 0===_.length?v:Me.createElement("g",{key:p},v,_)})))}function tr(e){var t=e.data,n=e.size,r=e.style,o=e.elemOverlap,i=e.secondary,a=e.empty,s=e.tooltip,l=e.setAddons,c=e.transform,u=n.sets.w,f=n.sets.w+n.labels.w+n.cs.w,d=t.sets.bandWidth,m=An("fill"+e.suffix,!s&&" pnone-"+r.id,r.classNames.bar);return Me.createElement("g",{transform:c,"data-upset":i?"sets-q":"sets-s"},t.sets.v.map((function(e,c){var y=t.sets.y(e),p=t.sets.keys[c];if(a&&!i)return Me.createElement("rect",{key:p,x:u,y:y,width:0,height:d,className:m,style:$n(r.styles.bar,r.selectionColor?void 0:e.color)},r.tooltips&&s&&Me.createElement("title",null));var h=o(e);if(0===h)return null;var x=t.sets.x(h),g=r.tooltips&&s&&Me.createElement("title",null,e.name+" ∩ "+s+": "+h),v=i?Me.createElement("path",{key:p,transform:"translate("+x+", "+(y+d)+")",d:"M1,0 l0,"+-d+" l-2,0 l0,"+d+" L-"+t.triangleSize+","+t.triangleSize+" L"+t.triangleSize+","+t.triangleSize+" Z","data-i":c,"data-cardinality":h,className:m,style:$n(void 0,r.selectionColor?void 0:e.color)},g):Me.createElement("rect",{key:p,"data-i":c,"data-cardinality":h,x:x,y:y,width:u-x,height:d,className:m,style:$n(r.styles.bar,r.selectionColor?void 0:e.color)},g),b=Qn(f,n.sets.addonPadding),_=l.map((function(t){var n=b(t),o=t.render({set:e,width:t.size,height:d,theme:r.theme});return o?Me.createElement("g",{key:t.name,transform:"translate("+n+","+y+")"},o):null})).filter(Boolean);return 0===_.length?v:Me.createElement("g",{key:p},v,_)})))}var nr=[],rr=Me.memo((function(e){var t=e.size,n=e.data,r=e.style,o=e.hasHover,i=e.secondary,a=e.queries,s=t.sets.addons.some((function(e){return null!=e.renderQuery}))||t.cs.addons.some((function(e){return null!=e.renderQuery})),l=G((function(){return a.map((function(e){return bn({},e,{overlap:Le(e,"intersection",n.toElemKey),elemOverlap:s?Te(e,"intersection",n.toElemKey):null})}))}),[a,s,n.toElemKey]);function c(e,t,n,r,o){return bn({},e,{render:function(i){var a=r(i.set);return e.renderQuery?e.renderQuery(bn({query:t,overlap:a,index:n,secondary:o},i)):null}})}return Me.createElement("g",{className:o&&!i?"pnone-"+r.id:void 0},Me.createElement("g",{transform:"translate("+t.sets.x+","+t.sets.y+")"},l.map((function(e,a){return Me.createElement(tr,{key:e.name,data:n,size:t,style:r,elemOverlap:e.overlap,suffix:"Q"+a+"-"+n.id,secondary:i||a>0,tooltip:o&&!(i||a>0)?void 0:e.name,setAddons:0===t.sets.addons.length?nr:t.sets.addons.map((function(t,n){return c(t,e,n,e.elemOverlap,i||n>0)}))})}))),Me.createElement("g",{transform:"translate("+t.cs.x+","+t.cs.y+")"},l.map((function(e,a){return Me.createElement(er,{key:e.name,data:n,size:t,style:r,elemOverlap:e.overlap,suffix:"Q"+a+"-"+n.id,secondary:i||a>0,tooltip:o&&!(i||a>0)?void 0:e.name,combinationAddons:0===t.cs.addons.length?nr:t.cs.addons.map((function(t,n){return c(t,e,n,e.elemOverlap,i||n>0)}))})}))))}));function or(e){var t=e.data,n=e.size,r=e.style,o=e.selection;return o&&"set"===o.type&&t.sets.keys.includes(t.toKey(o))?Me.createElement("rect",{y:t.sets.y(o),width:n.labels.w+n.cs.w+n.sets.after,height:t.sets.bandWidth,className:"selectionHint-"+r.id}):null}function ir(e){var t=e.data,n=e.size,r=e.style,o=e.selection,i=t.sets.bandWidth/2,a=t.cs.cx,s=t.r,l=n.sets.h+n.sets.after,c=t.cs.bandWidth;if(!o||"set"===o.type||!t.cs)return null;var u=o,f=t.cs.keys.indexOf(t.toKey(u));return f<0?null:Me.createElement("g",{transform:"translate("+(n.labels.w+t.cs.x(u))+", 0)","data-upset":"cs-ss","data-i":f},Me.createElement("rect",{width:c,height:l,className:"selectionHint-"+r.id}),t.sets.v.filter((function(e){return t.cs.has(u,e)})).map((function(e){return Me.createElement(Jn,{key:t.toKey(e),r:1.1*s,cx:a,cy:t.sets.y(e)+i,name:r.tooltips?e.name:"",className:An("fillSelection-"+r.id,"pnone-"+r.id,r.classNames.dot),style:$n(r.styles.dot,r.selectionColor?void 0:u.color)})})),u.sets.size>1&&Me.createElement("line",{x1:a,y1:t.sets.y(t.sets.v.find((function(e){return t.cs.has(u,e)})))+i,x2:a,y2:t.sets.y(t.sets.rv.find((function(e){return t.cs.has(u,e)})))+i,className:"upsetSelectionLine-"+t.id,style:$n(void 0,r.selectionColor?void 0:u.color,"stroke")}))}var ar=[];function sr(e){var t=e.size,n=e.data,r=e.style,o=e.selection,i=e.hasHover,a=r.emptySelection,s=In(o,n.toElemKey),l=zn(o),c=t.sets.addons.some((function(e){return null!=e.renderSelection}))||t.cs.addons.some((function(e){return null!=e.renderSelection})),u=o&&"function"!=typeof o&&c?function(e,t){var n=Ne(e,t);return function(e){return n(e.elems).intersection}}(Array.isArray(o)?o:o.elems,n.toElemKey):null;function f(e){return bn({},e,{render:function(t){var n=u?u(t.set):null;return e.renderSelection?e.renderSelection(bn({selection:o,selectionColor:r.selectionColor||t.set.color||"orange",overlap:n},t)):null}})}return Me.createElement("g",{className:i?"pnone-"+r.id:void 0},(o||a)&&Me.createElement(er,{data:n,size:t,style:r,transform:"translate("+t.cs.x+","+t.cs.y+")",empty:a&&!o,elemOverlap:s,suffix:"Selection-"+r.id,tooltip:i?void 0:l,combinationAddons:0===t.cs.addons.length?ar:t.cs.addons.map(f)}),(o||a)&&Me.createElement(tr,{data:n,size:t,style:r,transform:"translate("+t.sets.x+","+t.sets.y+")",empty:a&&!o,elemOverlap:s,suffix:"Selection-"+r.id,tooltip:i?void 0:l,setAddons:0===t.sets.addons.length?ar:t.sets.addons.map(f)}),Me.createElement("g",{transform:"translate("+t.labels.x+","+t.labels.y+")"},On(o)&&Me.createElement(or,{data:n,size:t,style:r,selection:o}),On(o)&&Me.createElement(ir,{data:n,size:t,style:r,selection:o})))}function lr(e,t){return void 0===t&&(t="font-size"),e?t+": "+e+";":""}function cr(e,t,n,r){var o=[];return t.hasSelectionColor&&o.push("fill: "+t.hasSelectionColor+";"),null!=t.hasSelectionOpacity&&t.hasSelectionOpacity>=0&&o.push("fill-opacity: "+t.hasSelectionOpacity+";"),{p:lr,root:"\n  .root-"+e+" {\n    "+lr(n,"font-family")+"\n  }\n  ",text:"\n  .titleTextStyle-"+e+" {\n    fill: "+t.textColor+";\n    "+lr(r.title)+"\n  }\n  .descTextStyle-"+e+" {\n    fill: "+t.textColor+";\n    "+lr(r.description)+"\n  }\n\n  .legendTextStyle-"+e+" {\n    fill: "+t.textColor+";\n    "+lr(r.legend)+"\n    text-anchor: middle;\n    dominant-baseline: hanging;\n    pointer-events: none;\n  }\n  ",hasSFill:o.join(" "),hasSStroke:o.join(" ").replace("fill:","stroke:").replace("fill-","stroke-"),fill:"\n  .fillPrimary-"+e+" { fill: "+t.color+"; fill-opacity: "+t.opacity+"; }\n  "+(o.length>0?".root-"+e+"[data-selection] .fillPrimary-"+e+" { "+o.join(" ")+" }":"")+"\n  "+(t.selectionColor?".fillSelection-"+e+" { fill: "+t.selectionColor+"; }":"")+"\n  .fillTransparent-"+e+" { fill: transparent; }\n\n  .selectionHint-"+e+" {\n    fill: transparent;\n    pointer-events: none;\n    "+lr(t.selectionColor,"stroke")+"\n  }\n  .clickAble-"+e+" {\n    cursor: pointer;\n  }\n\n  .startText-"+e+" {\n    text-anchor: start;\n  }\n  .endText-"+e+" {\n    text-anchor: end;\n  }\n  .pnone-"+e+" {\n    pointer-events: none;\n  }",export:"\n  .exportTextStyle-"+e+" {\n    fill: "+t.textColor+";\n    "+lr(r.exportLabel)+"\n  }\n  .exportButtons-"+e+" {\n    text-anchor: middle;\n  }\n  .exportButton-"+e+" {\n    cursor: pointer;\n    opacity: 0.5;\n  }\n  .exportButton-"+e+":hover {\n    opacity: 1;\n  }\n  .exportButton-"+e+" > rect {\n    fill: none;\n    stroke: "+t.textColor+";\n  }\n  "}}function ur(e){var t=e.onClick;return G((function(){return{hasClick:null!=t,hasHover:null!=e.onHover,onClick:Vn(t),onMouseEnter:Vn(e.onHover),onContextMenu:Vn(e.onContextMenu),onMouseLeave:e.onHover?function(t){return e.onHover(null,t.nativeEvent,[])}:void 0,onMouseMove:Vn(e.onMouseMove),reset:function(e){return t?t(null,e.nativeEvent,[]):null}}}),[t,e.onHover,e.onContextMenu,e.onMouseMove])}var fr=le((function(e,t){var n,r=yn(e),o=r.selection,i=void 0===o?null:o,a=r.queries,s=void 0===a?[]:a,l=r.fontSizes,c=G((function(){return r.id?r.id:Nn()}),[r.id,r.fontFamily,l.axisTick,l.barLabel,l.chartLabel,l.legend,l.setLabel,l.title,l.exportLabel,l.description,r.textColor,r.hoverHintColor,r.color,r.hasSelectionColor,r.selectionColor,r.notMemberColor,r.alternatingBackgroundColor,r.opacity,r.hasSelectionOpacity]),u=G((function(){return function(e,t,n,r,o,i,a,s,l,c,u,f,d,m){return{theme:e,styles:t,classNames:n,cs:{name:r,offset:o},sets:{name:i,offset:a},emptySelection:u,id:s,barLabelOffset:l,selectionColor:c,title:f,description:d,tooltips:m}}(r.theme,r.styles,r.classNames,r.combinationName,r.combinationNameAxisOffset,r.setName,r.setNameAxisOffset,c,r.barLabelOffset,r.selectionColor,r.emptySelection,r.title,r.description,r.tooltips)}),[r.theme,r.styles,r.classNames,r.barLabelOffset,r.combinationName,r.combinationNameAxisOffset,r.setName,r.setNameAxisOffset,c,r.selectionColor,r.emptySelection,r.title,r.description,r.tooltips]),f=G((function(){return function(e,t,n,r,o,i,a,s,l,c,u){var f=a.reduce((function(e,t){return e+("before"===t.position?t.size+c:0)}),0),d=a.reduce((function(e,t){return e+("before"!==t.position?t.size+c:0)}),0),m=s.reduce((function(e,t){return e+("before"===t.position?t.size+c:0)}),0),y=s.reduce((function(e,t){return e+("before"!==t.position?t.size+c:0)}),0),p=t-2*n-20-y-m,h=e-2*n-f-d,x=h*o[0],g=h*o[1],v=p*i[0];return{id:l||Nn(),cs:{before:m,after:y,x:f+x+g,y:m,w:h-x-g,h:v,addons:s,addonPadding:u},labels:{x:f+x,y:m+v,w:g,h:p-v},sets:{before:f,after:d,x:f,y:m+v,w:x,h:p-v,addons:a,addonPadding:c},padding:r,legend:{x:e/2},margin:n,w:e,h:t}}(r.width,r.height,r.padding,r.barPadding,r.widthRatios,r.heightRatios,r.setAddons,r.combinationAddons,r.id,r.setAddonPadding,r.combinationAddonPadding)}),[r.width,r.height,r.padding,r.barPadding,r.widthRatios,r.heightRatios,r.setAddons,r.combinationAddons,r.id,r.setAddonPadding,r.combinationAddonPadding]),d=G((function(){return function(e,t,n,r,o,i,a,s,l,c,u,f){var d=Pn(r),m=function(e){return"band"===e?xt:e}(o),y=qn(t)?t:st(e,Object.assign({toElemKey:u},$t,t)),p=m(y.map(c),n.cs.w,n.padding),h=y.reduce((function(e,t){return Math.max(e,t.cardinality)}),0),x=d(h,[n.cs.h,i],{orientation:"vertical",fontSizeHint:l}),g=function(e){return Math.floor(i/1.4*.7*x.tickFormat()(e).length)},v=e.reduce((function(e,t){return Math.max(e,t.cardinality)}),0),b=g(v),_=g(h),w=d(v,[n.sets.w,b],{orientation:"horizontal",fontSizeHint:l}),S=e.map(c),E=m(S.slice().reverse(),n.sets.h,n.padding),k=Math.min(E.bandwidth(),p.bandwidth())/2*a,M=Math.max(2,Math.min(E.bandwidth(),p.bandwidth())/2*s);return{id:f||Nn(),r:k,triangleSize:M,sets:{v:e,keys:S,rv:e.slice().reverse(),x:w,xAxisWidth:n.sets.w-b,y:function(e){return E(c(e))},bandWidth:E.bandwidth(),cy:E.bandwidth()/2+n.cs.h,format:w.tickFormat(),labelOffset:i+9+2},cs:{v:y,keys:y.map(c),x:function(e){return p(c(e))},y:x,yAxisWidth:n.cs.h-i,cx:p.bandwidth()/2,bandWidth:p.bandwidth(),format:x.tickFormat(),has:function(e,t){var n=c(t);return Array.from(e.sets).some((function(e){return c(e)===n}))},labelOffset:_+9+6},toKey:c,toElemKey:u}}(r.sets,r.combinations,f,r.numericScale,r.bandScale,r.barLabelOffset+Tn(l.barLabel),r.dotPadding,r.barPadding,Tn(l.axisTick),r.toKey,r.toElemKey,r.id)}),[r.sets,r.combinations,f,r.numericScale,r.bandScale,r.barLabelOffset,l.barLabel,r.dotPadding,r.barPadding,l.axisTick,r.toKey,r.toElemKey,r.id]),m=cr(c,r,r.fontFamily,l),y=ur(r),p="\n  "+m.root+"\n  "+m.text+"\n\n  .axisTextStyle-"+c+" {\n    fill: "+r.textColor+";\n    "+m.p(l.axisTick)+"\n    text-anchor: middle;\n  }\n  .barTextStyle-"+c+" {\n    fill: "+r.textColor+";\n    "+m.p(l.barLabel)+"\n  }\n  .cBarTextStyle-"+c+" {\n    fill: "+r.textColor+";\n    "+m.p(l.barLabel)+"\n    text-anchor: middle;\n  }\n  .sBarTextStyle-"+c+" {\n    fill: "+r.textColor+";\n    "+m.p(l.barLabel)+"\n    text-anchor: end;\n    dominant-baseline: central;\n  }\n  .hoverBarTextStyle-"+c+" {\n    "+m.p(l.barLabel)+"\n    fill: "+r.hoverHintColor+";\n    display: none;\n    text-anchor: middle;\n  }\n  .setTextStyle-"+c+" {\n    fill: "+r.textColor+";\n    "+m.p(l.setLabel)+"\n    text-anchor: middle;\n    dominant-baseline: central;\n  }\n  .cChartTextStyle-"+c+" {\n    fill: "+r.textColor+";\n    "+m.p(l.chartLabel)+"\n    text-anchor: middle;\n  }\n  .sChartTextStyle-"+c+" {\n    fill: "+r.textColor+";\n    "+m.p(l.chartLabel)+"\n    text-anchor: middle;\n    dominant-baseline: hanging;\n  }\n\n  "+m.fill+"\n  .fillNotMember-"+c+" { fill: "+r.notMemberColor+"; }\n  .fillAlternating-"+c+" { fill: "+(r.alternatingBackgroundColor||"transparent")+"; }\n\n  .axisLine-"+c+" {\n    fill: none;\n    stroke: "+r.textColor+";\n  }\n  .hoverBar-"+c+" {\n    fill: transparent;\n  }\n\n  .interactive-"+c+":hover > .hoverBar-"+c+" {\n    stroke: "+r.hoverHintColor+";\n  }\n  .interactive-"+c+":hover > .hoverBarTextStyle-"+c+" {\n    display: unset;\n  }\n\n  "+m.export+"\n\n  .upsetLine-"+d.id+" {\n    stroke-linecap: round;\n    stroke-width: "+.6*d.r+";\n    stroke: "+r.color+";\n    stroke-opacity: "+r.opacity+";\n  }\n  "+(m.hasSStroke?".root-"+c+"[data-selection] .upsetLine-"+d.id+" { "+m.hasSStroke+" }":"")+"\n\n  .upsetSelectionLine-"+d.id+" {\n    stroke-width: "+.6*d.r*1.1+";\n    "+m.p(r.selectionColor,"stroke")+"\n    pointer-events: none;\n  }\n\n  "+s.map((function(e,t){return".fillQ"+t+"-"+d.id+" {\n    fill: "+e.color+";\n  }"})).join("\n")+"\n  ",h=J((function(t){var n=t.currentTarget.closest("svg"),r=t.currentTarget.dataset.type||"png";switch(r){case"vega":!function(e,t){var n=function(e,t){var n,r,o,i,a,s=null!==(n=e.getComputedStyle||(null===(r=e.ownerDocument)||void 0===r||null===(o=r.defaultView)||void 0===o?void 0:o.getComputedStyle))&&void 0!==n?n:window.getComputedStyle,l=Ht(e),c=null!=t?t:Bt(e,l),u=Array.from(e.querySelectorAll("[data-upset=sets] [data-cardinality]")).map((function(e){return{name:e.querySelector("text.setTextStyle-"+l).textContent,cardinality:Number.parseInt(e.dataset.cardinality,10)}})).reverse(),f=-Number.parseFloat(e.querySelector(".sBarTextStyle-"+l).getAttribute("dx")),d=s(e.querySelector(".fillPrimary-"+l)).fill,m=s(e.querySelector(".fillNotMember-"+l)).fill,y=s(e.querySelector("text")).fill,p=e.querySelector(".cChartTextStyle-"+l).textContent,h=e.querySelector(".sChartTextStyle-"+l).textContent,x=Array.from(e.querySelectorAll("[data-upset=cs] [data-cardinality]")).map((function(e){return{name:e.querySelector("text.hoverBarTextStyle-"+l).textContent,cardinality:Number.parseInt(e.dataset.cardinality,10),sets:Array.from(e.querySelectorAll(".fillPrimary-"+l+" > title")).map((function(e){return e.textContent}))}})),g=function(e){return Number.parseFloat(e.getAttribute("transform").match(/([\d.]+),/)[1])},v=e.querySelector("[data-upset=base]"),b=g(v),_=g(e.querySelector("[data-upset=csaxis]")),w=Number.parseFloat(v.querySelector("g").firstElementChild.children[1].getAttribute("x2")),S=function(e){return Number.parseFloat(e.getAttribute("transform").match(/,([\d.]+)/)[1])}(e.querySelector("[data-upset=setaxis]")),E=Number.parseFloat(e.querySelector("defs rect").getAttribute("width")),k=Number.parseFloat(e.querySelector("defs rect").getAttribute("height")),M=Number.parseFloat(e.querySelector("[data-cardinality] circle.fillPrimary-"+l).getAttribute("r")),C=null!=e.querySelector("[data-upset=sets-s] [data-cardinality]"),A=null!=e.querySelector("[data-upset=sets-q] [data-cardinality]"),N=C||A,O="orange";N&&(Array.from(e.querySelectorAll("[data-upset=sets-"+(C?"s]":"q]:first-of-type")+" [data-cardinality]")).forEach((function(e){var t=u.length-Number.parseInt(e.dataset.i,10)-1;u[t].selection=Number.parseInt(e.dataset.cardinality,10)})),Array.from(e.querySelectorAll("[data-upset=cs-"+(C?"s]":"q]:first-of-type")+" [data-cardinality]")).forEach((function(e){var t=Number.parseInt(e.dataset.i,10);x[t].selection=Number.parseInt(e.dataset.cardinality,10)})),O=s(e.querySelector("[data-upset=sets-"+(C?"s":"q")+"] [data-cardinality]")).fill);var j=Number.parseInt(null!==(i=null===(a=e.querySelector("[data-upset=cs-ss]"))||void 0===a?void 0:a.dataset.i)&&void 0!==i?i:"-1",10),I=j>=0?{field:"partOf",oneOf:[1,2]}:{field:"partOf",equal:1};return{$schema:"https://vega.github.io/schema/vega-lite/v4.json",title:c,description:Ut(e,l),datasets:{sets:u,combinations:x.map((function(e,t){return Object.assign({},e,{partOf:j===t?2:1,nsets:[""]})})).concat(x.map((function(e){return{name:e.name,cardinality:e.cardinality,partOf:0,sets:[""],nsets:u.filter((function(t){return!e.sets.includes(t.name)})).map((function(e){return e.name}))}})))},vconcat:[{hconcat:[{mark:"bar",width:_+E-40,height:S},{width:w,height:S,data:{name:"combinations"},transform:[{filter:I}],layer:[{mark:{type:"bar",tooltip:!0}},{mark:{type:"text",align:"center",baseline:"bottom",dy:-f},encoding:{text:{field:"cardinality",type:"quantitative"}}},N&&{mark:{type:"bar",fill:O,tooltip:!0},encoding:{y:{field:"selection",type:"quantitative"}}}].filter(Boolean),encoding:{x:{field:"name",type:"ordinal",axis:null,sort:null},y:{field:"cardinality",type:"quantitative",axis:{grid:!1},title:p}}}]},{hconcat:[{width:_,height:k,data:{name:"sets"},layer:[{mark:{type:"bar",tooltip:!0}},{mark:{type:"text",align:"right",baseline:"middle",dx:-f},encoding:{text:{field:"cardinality",type:"quantitative"}}},N&&{mark:{type:"bar",fill:O,tooltip:!0},encoding:{x:{field:"selection",type:"quantitative"}}}].filter(Boolean),encoding:{y:{field:"name",type:"ordinal",axis:null,sort:null},x:{field:"cardinality",type:"quantitative",title:h,sort:"descending",axis:{grid:!1}}}},{data:{name:"sets"},width:E,height:k,mark:{type:"text",align:"center",baseline:"middle",fontSize:Number.parseInt(s(e.querySelector(".setTextStyle-"+l)).fontSize,10)},encoding:{y:{field:"name",type:"ordinal",axis:null,sort:null},text:{field:"name",type:"ordinal"}}},{width:w,height:k,data:{name:"combinations"},transform:[{flatten:["sets"],as:["has_set"]},{flatten:["nsets"],as:["has_not_set"]},{calculate:"datum.has_set+datum.has_not_set",as:"set"}],layer:[{mark:{type:"circle",size:M*M*Math.PI,tooltip:!0},encoding:{color:{field:"partOf",type:"nominal",legend:null,scale:{range:[m,d].concat(j>=0?[O]:[])}},y:{field:"set",type:"ordinal",axis:null,sort:null,scale:{domain:u.map((function(e){return e.name}))}}}},{mark:"rule",transform:[{filter:I},{calculate:"datum.sets[datum.sets.length -1]",as:"set_end"}],encoding:bn({y:{field:"sets[0]",type:"ordinal",axis:null,sort:null},y2:{field:"set_end"}},j<0?{}:{color:{field:"partOf",type:"nominal",legend:null,scale:{range:[d,O]}}})}],encoding:{x:{field:"name",type:"ordinal",axis:null,sort:null}}}]}],config:{padding:b,background:fn(e.dataset.theme).backgroundColor,concat:{spacing:0},view:{stroke:null},bar:{fill:d},circle:{opacity:1},rule:{stroke:d,strokeWidth:Number.parseInt(s(e.querySelector("[data-upset=cs] [data-cardinality] line")).strokeWidth,10)},axis:{labelColor:y,labelFontSize:Number.parseInt(s(e.querySelector(".axisTextStyle-"+l)).fontSize,10),titleColor:y,titleFontSize:Number.parseInt(s(e.querySelector(".cChartTextStyle-"+l)).fontSize,10)},title:{color:y},text:{fill:y,fontSize:Number.parseInt(s(e.querySelector(".sBarTextStyle-"+l)).fontSize,10)}}}}(e,{}.title),r=URL.createObjectURL(new Blob([JSON.stringify(n,null,2)],{type:"application/json"}));vn(r,n.title+".json",e.ownerDocument),URL.revokeObjectURL(r)}(n);break;case"dump":Mn(n,e,d);break;case"share":Cn(e,d);break;case"svg":case"png":gn(n,{type:r,toRemove:"."+t.currentTarget.getAttribute("class")})}}),[d,e]),x=zn(i);return Me.createElement("svg",{id:r.id,className:An("root-"+c,r.className),style:r.style,width:r.width,height:r.height,ref:t,viewBox:"0 0 "+r.width+" "+r.height,"data-theme":null!==(n=r.theme)&&void 0!==n?n:"light","data-selection":x||void 0},Me.createElement("style",null,p),Me.createElement("defs",null,Me.createElement("clipPath",{id:"clip-"+f.id},Me.createElement("rect",{x:f.sets.w,y:0,width:f.labels.w,height:f.sets.h}))),r.queryLegend&&Me.createElement(Rn,{queries:s,x:f.legend.x,style:u,data:d}),Me.createElement(Fn,{transform:"translate("+(f.w-2)+","+(f.h-3)+")",styleId:c,exportButtons:r.exportButtons,exportChart:h}),Me.createElement("g",{transform:"translate("+r.padding+","+r.padding+")","data-upset":"base"},r.onClick&&Me.createElement("rect",{width:f.cs.x,height:f.sets.y,onClick:y.reset,className:"fillTransparent-"+c}),Me.createElement(Gn,{size:f,style:u,data:d}),Me.createElement(Xn,{size:f,style:u,data:d,h:y,setChildrenFactory:r.setChildrenFactory,combinationChildrenFactory:r.combinationChildrenFactory}),Me.createElement(sr,{size:f,style:u,data:d,hasHover:y.hasHover,selection:i}),Me.createElement(rr,{size:f,style:u,data:d,hasHover:y.hasHover,queries:s,secondary:null!=r.onHover||null!=i})),e.children)}));function dr(e){var t,n,r=e.rules,o=e.style,i=e.size,a=e.p,s=e.data,l=e.tRef,c=e.children,u=e.exportChart,f=e.selectionName,d=e.h;return Me.createElement("svg",{id:a.id,className:An("root-"+o.id,a.className),style:a.style,width:a.width,height:a.height,ref:l,viewBox:"0 0 "+a.width+" "+a.height,"data-theme":null!==(t=a.theme)&&void 0!==t?t:"light","data-selection":f||void 0},Me.createElement("style",null,r),a.onClick&&Me.createElement("rect",{width:i.w,height:i.h,onClick:d.reset,className:"fillTransparent-"+o.id}),a.queryLegend&&Me.createElement(Rn,{queries:null!==(n=a.queries)&&void 0!==n?n:[],x:i.legend.x,style:o,data:s}),Me.createElement(Fn,{transform:"translate("+(i.w-2)+","+(i.h-3)+")",styleId:o.id,exportButtons:a.exportButtons,exportChart:u}),Me.createElement("g",{transform:"translate("+a.padding+","+a.padding+")","data-upset":"base"},c),a.children)}function mr(e){var t;if(e.v>=1||e.v<=0)return null;var n=Math.round(10*e.v)/100;return Me.createElement("defs",null,Me.createElement("pattern",{id:e.id,width:"1",height:"0.1",patternContentUnits:"objectBoundingBox",patternTransform:"rotate("+(null!==(t=e.rotate)&&void 0!==t?t:0)+")"},e.bgFilled&&Me.createElement("rect",{x:"0",y:"0",width:"1",height:"0.1",style:{fill:e.bgFill},className:"fillPrimary-"+e.styleId}),Me.createElement("rect",{x:"0",y:"0",width:"1",height:n,className:"fill"+e.suffix,style:e.fill?{fill:e.fill}:void 0})))}function yr(e){var t=e.slice,n=e.d,r=e.i,o=e.data,i=e.style,a=e.elemOverlap,s=e.selected,l=e.selectionName,c=e.h,u=e.queries,f=e.size,d=e.fill,m=e.qs,y=function(e,t,n){return void 0===n&&(n=0),e.path?e.path:"M "+(e.x1-n)+","+(e.y1-n)+" "+e.arcs.map((function(e){var r=t[e.ref].l,o=on(r)?r.rx:r.r,i=on(r)?r.ry:r.r,a=on(r)?r.rotation:0;return"A "+(o-n)+" "+(i-n)+" "+a+" "+(e.large?1:0)+" "+(e.sweep?1:0)+" "+(e.x2-n)+" "+(e.y2-n)})).join(" ")}(t,o.sets.d),p=function(e,t){return e.text.x===t.cx?0:e.text.x>t.cx?e.text.y<=t.cy?60:-60:e.text.y<=t.cy?-60:60}(t,f.area),h=a?a(n):0,x=h===n.cardinality&&n.cardinality>0||s,g=An("arc-"+i.id,0===h&&!s&&(d?"fillPrimary":"arcP")+"-"+i.id,x&&"fillSelection-"+i.id,i.classNames.set),v="upset-"+i.id+"-"+r,b=null!=a||null!=c.onMouseLeave,_=m.map((function(e){return e(n)})),w=function(e,t,n,r,o,i,a,s){var l=a.format(e.cardinality),c=n?e.name+" ∩ "+n:e.name,u=n?a.format(t)+"/"+l:l;if(0===o.length)return{tooltip:c+": "+u,title:"set"===e.type?Me.createElement(Me.Fragment,null,Me.createElement("tspan",{dy:"-0.6em"},e.name),Me.createElement("tspan",{x:s,dy:"1.2em"},u)):u};if(1===o.length&&!r&&!n)return{tooltip:e.name+" ∩ "+i[0].name+": "+a.format(o[0])+"/"+l,title:"set"===e.type?Me.createElement(Me.Fragment,null,Me.createElement("tspan",{dy:"-0.6em"},e.name),Me.createElement("tspan",{x:s,dy:"1.2em"},a.format(o[0])+"/"+l)):a.format(o[0])+"/"+l};var f=Me.createElement("tspan",{x:s,dy:"1.2em"},i.map((function(e,t){return Me.createElement(Me.Fragment,{key:e.name},Me.createElement("tspan",{className:"fillQ"+t+"-"+a.id},"⬤"),Me.createElement("tspan",null," "+a.format(o[t])+"/"+l+(t<i.length-1?" ":"")))})));return{tooltip:c+": "+u+"\n"+i.map((function(t,n){return e.name+" ∩ "+t.name+": "+a.format(o[n])+"/"+l})).join("\n"),title:"set"===e.type?Me.createElement(Me.Fragment,null,Me.createElement("tspan",{dy:"-1.2em"},e.name),Me.createElement("tspan",{x:s,dy:"1.2em"},u),f):Me.createElement(Me.Fragment,null,Me.createElement("tspan",{dy:"-0.6em"},u),f)}}(n,h,l,b,_,u,o,t.text.x),S=w.title,E=w.tooltip;return Me.createElement("g",null,Me.createElement(mr,{id:v,v:0===h?0:h/n.cardinality,suffix:"Selection-"+i.id,rotate:p,bgFill:n.color,bgFilled:null!=n.color||d,fill:i.selectionColor?void 0:n.color,styleId:i.id}),Me.createElement("path",{onMouseEnter:c.onMouseEnter(n,[]),onMouseLeave:c.onMouseLeave,onClick:c.onClick(n,[]),onContextMenu:c.onContextMenu(n,[]),onMouseMove:c.onMouseMove(n,[]),d:y,className:g,style:$n(i.styles.set,h>0&&h<n.cardinality?"url(#"+v+")":x&&i.selectionColor?void 0:n.color)},i.tooltips&&Me.createElement("title",null,E)),Me.createElement("text",{x:t.text.x,y:t.text.y,className:An(("set"===n.type?"set":"value")+"TextStyle-"+i.id,"pnone-"+i.id)},S))}function pr(e,t,n,r){var o=t-2*n,i=e-2*n,a=Math.min(i,o)/2;return{id:r||Nn(),legend:{x:e/2},area:{w:i,h:o,cx:i/2,cy:o/2,r:a},margin:n,w:e,h:t}}function hr(e,t,n){return J((function(r){var o=r.currentTarget.closest("svg"),i=r.currentTarget.dataset.type||"png";switch(i){case"dump":Mn(o,t,e,n);break;case"share":Cn(t,e,n);break;case"svg":case"png":gn(o,{type:i,toRemove:"."+r.currentTarget.getAttribute("class")})}}),[e,t,n])}var xr=le((function(e,t){var n=pn(e),r=n.selection,o=void 0===r?null:r,i=n.queries,a=void 0===i?[]:i,s=n.fontSizes,l=function(e){var t=e.selection,n=void 0===t?null:t,r=e.queries,o=void 0===r?[]:r,i=e.fontSizes,a=G((function(){return e.id?e.id:Nn()}),[e.id,e.fontFamily,i.valueLabel,i.legend,i.setLabel,i.title,i.exportLabel,i.description,e.textColor,e.color,e.hasSelectionColor,e.strokeColor,e.valueTextColor,e.selectionColor,e.opacity,e.hasSelectionOpacity]),s=G((function(){return function(e,t,n,r,o,i,a,s){return{theme:e,styles:t,classNames:n,id:r,selectionColor:o,title:i,description:a,tooltips:s}}(e.theme,e.styles,e.classNames,a,e.selectionColor,e.title,e.description,e.tooltips)}),[e.theme,e.styles,e.classNames,a,e.selectionColor,e.title,e.description,e.tooltips]),l=G((function(){return pr(e.width,e.height,e.padding,e.id)}),[e.width,e.height,e.padding,e.id]),c=ur(e),u=null!=n&&On(n)?e.toKey(n):null,f=null==n?null:In(n,e.toElemKey),d=zn(n),m=Me.useMemo((function(){return o.map((function(t){return Le(t,"intersection",e.toElemKey)}))}),[o,e.toElemKey]),y=cr(a,e,e.fontFamily,i);return{styleId:a,size:l,style:s,h:c,selectionKey:u,selectionName:d,selectionOverlap:f,qs:m,rulesHelper:y}}(n),c=l.size,u=l.style,f=l.rulesHelper,d=G((function(){return function(e,t,n,r,o,i,a,s){var l=e.length>r.maxSets?e.slice(0,r.maxSets):e,c=function(e,t,n,r){void 0===r&&(r={min:1});var o=e.map(t),i=[];if(qn(n)){var a=new Map(n.map((function(e){return[Array.from(e.sets).map(t).sort().join("#"),e]})));i=st(e.map((function(e){return{type:"set",cardinality:0,elems:[],name:e.name,s:e}})),Object.assign({type:"distinctIntersection",empty:!0,order:["degree:asc","group:asc"]},r)).map((function(e){var n=Array.from(e.sets).map((function(e){return t(e.s)})).sort().join("#");return a.has(n)?a.get(n):{name:e.name,cardinality:0,degree:e.degree,elems:[],sets:new Set(Array.from(e.sets).map((function(e){return e.s}))),type:"distinctIntersection"}}))}else i=st(e,Object.assign({type:"distinctIntersection",empty:!0,order:["degree:asc","group:asc"]},r,null!=n?n:{}));var s=i.map(t);return{cs:i,setKeys:o,csKeys:s}}(l,i,t),u=c.cs,f=c.setKeys,d=c.csKeys,m=r.compute(l,u,n.area.w,n.area.h);return{id:s||Nn(),sets:{d:m.sets.map((function(e,t){return{v:l[t],l:e,key:f[t]}})),v:l,format:o},format:o,cs:{d:m.intersections.map((function(e,t){return{v:u[t],l:e,key:d[t]}})),v:u,has:function(e,t){var n=i(t);return Array.from(e.sets).some((function(e){return i(e)===n}))}},toKey:i,toElemKey:a}}(n.sets,n.combinations,c,n.layout,n.valueFormat,n.toKey,n.toElemKey,n.id)}),[n.sets,n.combinations,c,n.valueFormat,n.toKey,n.toElemKey,n.id,n.layout]),m="\n  "+f.root+"\n  "+f.text+"\n\n  .valueTextStyle-"+u.id+" {\n    fill: "+n.valueTextColor+";\n    "+f.p(s.valueLabel)+"\n    text-anchor: middle;\n    dominant-baseline: central;\n  }\n  .setTextStyle-"+u.id+" {\n    fill: "+n.textColor+";\n    "+f.p(s.setLabel)+"\n    text-anchor: middle;\n  }\n\n  .topText-"+u.id+" {\n    dominant-baseline: hanging;\n  }\n\n  .stroke-circle-"+u.id+" {\n    fill: none;\n    stroke: "+n.strokeColor+";\n  }\n\n  .arc-"+u.id+" {\n    fill-rule: evenodd;\n  }\n  .arcP-"+u.id+" {\n    fill: transparent;\n    fill-opacity: "+n.opacity+";\n  }\n  "+f.fill+"\n  "+f.export+"\n\n  "+(f.hasSFill?".root-"+u.id+"[data-selection] .arcP-"+u.id+" { "+f.hasSFill+" }":"")+"\n\n  "+a.map((function(e,t){return".fillQ"+t+"-"+d.id+" {\n    fill: "+e.color+";\n  }"})).join("\n")+"\n  ",y=hr(d,n,"venn"),p=d.sets.d.reduce((function(e,t){return Math.min(e,t.l.cx-(on(t.l)?t.l.rx:t.l.r))}),c.area.w);return Me.createElement(dr,{rules:m,style:u,selectionName:l.selectionName,size:c,p:n,data:d,tRef:t,h:l.h,exportChart:y},Me.createElement(Kn,{style:u,width:p}),Me.createElement("g",{className:An(n.onClick&&"clickAble-"+u.id)},d.sets.d.map((function(e,t){return Me.createElement("text",{key:e.key,x:e.l.text.x,y:e.l.text.y,onClick:l.h.onClick(d.sets.v[t],[]),onMouseEnter:l.h.onMouseEnter(d.sets.v[t],[]),onMouseLeave:l.h.onMouseLeave,onContextMenu:l.h.onContextMenu(d.sets.v[t],[]),onMouseMove:l.h.onMouseMove(d.sets.v[t],[]),className:An("setTextStyle-"+u.id,e.l.align+"Text-"+u.id,e.l.verticalAlign+"Text-"+u.id)},d.sets.v[t].name)}))),Me.createElement("g",{className:An(n.onClick&&"clickAble-"+u.id)},d.cs.d.map((function(e,t){return Me.createElement(yr,{key:e.key,d:e.v,i:t,slice:e.l,size:c,style:u,data:d,fill:n.filled,h:l.h,selectionName:l.selectionName,selected:l.selectionKey===e.key||qe(o)&&d.cs.has(e.v,o),elemOverlap:l.selectionOverlap,queries:a,qs:l.qs})}))),Me.createElement("g",null,d.sets.d.map((function(e){return on(e.l)?Me.createElement("ellipse",{key:e.key,rx:e.l.rx,ry:e.l.ry,transform:"translate("+e.l.cx+","+e.l.cy+")rotate("+e.l.rotation+")",className:An("stroke-circle-"+u.id,u.classNames.set),style:u.styles.set}):Me.createElement("circle",{key:e.key,cx:e.l.cx,cy:e.l.cy,r:e.l.r,className:An("stroke-circle-"+u.id,u.classNames.set),style:u.styles.set})}))))})),gr=Me.memo((function(e){var t=e.d,n=e.h,r=e.className,o=e.data,i=e.style,a=o.cs.l[e.i],s=o.cs.scale(t.cardinality),l=(o.cell-o.cs.bandWidth)/2;return Me.createElement("g",{transform:"translate("+a.x+", "+a.y+")",onMouseEnter:n.onMouseEnter(t,[]),onMouseLeave:n.onMouseLeave,onClick:n.onClick(t,[]),onContextMenu:n.onContextMenu(t,[]),onMouseMove:n.onMouseMove(t,[]),className:r,"data-cardinality":t.cardinality},i.tooltips&&Me.createElement("title",null,t.name,": ",o.sets.format(t.cardinality)),Me.createElement("rect",{width:o.cell,height:o.cell,className:"fillTransparent-"+i.id}),Me.createElement("rect",{x:l,y:s,height:o.cell-s,width:o.cs.bandWidth,className:An("fillPrimary-"+i.id,i.classNames.bar),style:$n(i.styles.bar,t.color)}),Me.createElement("text",{y:s-i.barLabelOffset,x:o.cell/2,style:i.styles.barLabel,className:An("barTextStyle-"+i.id,i.classNames.barLabel)},o.sets.format(t.cardinality)))}));function vr(e,t,n,r){var o=e*t,i=e*n;return[r.x.map((function(t){return"M "+t*e+",0 l0,"+o})),r.y.map((function(t){return"M 0,"+t*e+" l"+i+",0"}))].flat().join(" ")}var br=Me.memo((function(e){var t=e.data,n=e.style,r=e.size,o=e.h,i="auto"===n.cs.offset?t.cs.labelOffset:n.cs.offset;return Me.createElement("g",null,Me.createElement("g",{transform:"translate("+(r.w-i-2)+", "+(r.h-t.cell-50)+")"},Me.createElement(Un,{scale:t.cs.scale,orient:"left",size:t.cell,start:t.cs.barLabelFontSize,style:n}),Me.createElement("text",{className:An("cChartTextStyle-"+n.id,n.classNames.chartLabel),style:n.styles.chartLabel,transform:"translate("+-i+", "+t.cell+")rotate(-90)"},n.cs.name)),Me.createElement("g",null,t.sets.l.map((function(e,r){var i=t.sets.v[r],a=i.name;return Me.createElement("g",{key:a,onClick:o.onClick(i,[]),onMouseEnter:o.onMouseEnter(i,[]),onMouseLeave:o.onMouseLeave,onContextMenu:o.onContextMenu(i,[]),onMouseMove:o.onMouseMove(i,[]),className:An(o.hasClick&&"clickAble-"+n.id)},e.text.map((function(t,r){return Me.createElement("text",{key:r,transform:"translate("+t.x+","+t.y+")"+(e.hor?"":"rotate(-90)"),className:An("setTextStyle-"+n.id)},a)})))})),t.sets.l.map((function(e,r){var o=t.sets.v[r].name;return Me.createElement(Me.Fragment,{key:o},e.notText.map((function(t,r){return Me.createElement("text",{key:r,transform:"translate("+t.x+","+t.y+")"+(e.hor?"":"rotate(-90)"),className:An("setTextStyle-"+n.id,"not-"+n.id)},o)})))}))),Me.createElement("g",{className:An(o.hasClick&&"clickAble-"+n.id)},t.cs.v.map((function(e,r){return Me.createElement(gr,{key:t.cs.keys[r],d:e,i:r,h:o,style:n,data:t})}))),Me.createElement("g",{transform:"translate("+t.grid.x+", "+t.grid.y+")"},t.grid.levels.map((function(e,r){return Me.createElement("path",{key:r,d:vr(t.cell,t.grid.vCells,t.grid.hCells,e),className:"gridStyle-"+n.id+" gridStyle-"+n.id+"-"+r})}))))}));function _r(e){var t=e.data,n=e.style,r=e.elemOverlap,o=e.secondary,i=e.tooltip,a=e.empty,s=t.cs.bandWidth,l=(t.cell-s)/2,c=An("fill"+e.suffix,!i&&"pnone-"+n.id,n.classNames.bar);return Me.createElement("g",{"data-upset":o?"cs-q":"cs-s"},t.cs.v.map((function(e,u){var f=t.cs.l[u],d=t.cs.keys[u];if(a&&!o)return Me.createElement("rect",{key:d,x:f.x+l,y:f.y+t.cell,height:0,width:s,className:c,style:$n(n.styles.bar,n.selectionColor?void 0:e.color)},i&&Me.createElement("title",null));var m=r(e);if(0===m)return null;var y=t.cs.scale(m),p=i&&Me.createElement("title",null,e.name+" ∩ "+i+": "+m);return o?Me.createElement("path",{key:d,transform:"translate("+(f.x+l)+", "+(f.y+y)+")",d:"M0,-1 l"+s+",0 l0,2 l"+-s+",0 L-"+t.triangleSize+",-"+t.triangleSize+" L-"+t.triangleSize+","+t.triangleSize+" Z",className:c,"data-i":u,"data-cardinality":m,style:$n(void 0,n.selectionColor?void 0:e.color)},p):Me.createElement("rect",{key:d,x:f.x+l,y:f.y+y,height:t.cell-y,"data-i":u,"data-cardinality":m,width:s,className:c,style:$n(n.styles.bar,n.selectionColor?void 0:e.color)},p)})))}var wr=Me.memo((function(e){var t=e.data,n=e.style,r=e.hasHover,o=e.secondary,i=e.queries,a=G((function(){return i.map((function(e){return bn({},e,{overlap:Le(e,"intersection",t.toElemKey)})}))}),[i,t.toElemKey]);return Me.createElement("g",{className:r&&!o?"pnone-"+n.id:void 0},a.map((function(e,i){return Me.createElement(_r,{key:e.name,data:t,style:n,elemOverlap:e.overlap,suffix:"Q"+i+"-"+t.id,secondary:o||i>0,tooltip:r&&!(o||i>0)?void 0:e.name})})))}));function Sr(e){var t=e.data,n=e.style,r=e.selection,o=e.hasHover,i=n.emptySelection,a=In(r,t.toElemKey),s=zn(r);return Me.createElement("g",{className:o?"pnone-"+n.id:void 0},(r||i)&&Me.createElement(_r,{data:t,style:n,empty:i&&!r,elemOverlap:a,suffix:"Selection-"+n.id,tooltip:o?void 0:s}))}function Er(e,t){return Array(e).fill(0).map((function(e,n){return t(n)}))}function kr(e){var t=Array(Math.pow(2,e)).fill(0);Er(e,(function(e){for(var n=Math.pow(2,e),r=0;r<t.length;r+=n)t[r]++}));var n=Er(Math.max(e,1),(function(){return[]}));return t.forEach((function(e,t){var r=Math.max(0,e-1);n[r].push(t)})),n[n.length-1].push(t.length),n}function Mr(e,t){var n=Math.ceil(e/2),r=Math.floor(e/2),o=Math.pow(2,n),i=Math.pow(2,r),a=Math.floor(Math.min((t.width-t.labelHeight*r)/o,(t.height-t.labelHeight*n)/i)),s=(t.width-o*a-t.labelHeight*r)/2,l=(t.height-i*a-t.labelHeight*n)/2;return{xOffset:s,horizontalSets:n,yOffset:l,verticalSets:r,cell:a,xBefore:s+Math.ceil(r/2)*t.labelHeight,yBefore:l+Math.ceil(n/2)*t.labelHeight,hCells:o,vCells:i}}var Cr=le((function(e,t){var n=hn(e),r=n.queries,o=void 0===r?[]:r,i=n.fontSizes,a=n.selection,s=void 0===a?null:a,l=G((function(){return n.id?n.id:Nn()}),[n.id,n.fontFamily,i.axisTick,i.barLabel,i.legend,i.setLabel,i.title,i.exportLabel,i.description,n.textColor,n.color,n.hasSelectionColor,n.strokeColor,n.selectionColor,n.opacity,n.hasSelectionOpacity]),c=G((function(){return function(e,t,n,r,o,i,a,s,l,c,u,f){return{theme:e,styles:t,classNames:n,emptySelection:l,id:i,barLabelOffset:a,selectionColor:s,title:c,description:u,tooltips:f,cs:{name:r,offset:o}}}(n.theme,n.styles,n.classNames,n.combinationName,n.combinationNameAxisOffset,l,n.barLabelOffset,n.selectionColor,n.emptySelection,n.title,n.description,n.tooltips)}),[n.theme,n.styles,n.classNames,n.combinationName,n.combinationNameAxisOffset,l,n.barLabelOffset,n.selectionColor,n.emptySelection,n.title,n.description,n.tooltips]),u=G((function(){return pr(n.width,n.height,n.padding,n.id)}),[n.width,n.height,n.padding,n.id]),f=G((function(){return function(e,t,n,r,o,i,a,s,l,c,u){var f=Pn(r),d=e.map(l),m=qn(t)?t:st(e,Object.assign({type:"distinctIntersection"},null!=t?t:{})),y=m.map(l),p=function(e,t){var n=l(t);return Array.from(e.sets).some((function(e){return l(e)===n}))},h=Math.ceil(1.2*a),x=function(e,t,n,r){var o=Mr(e.length,r),i=o.xBefore,a=o.yBefore,s=o.cell,l=o.hCells,c=o.vCells,u=o.horizontalSets,f=o.verticalSets,d=function(e,t){var n=Mr(e,t),r=n.xOffset,o=n.yOffset,i=n.cell,a=n.xBefore,s=n.yBefore,l=n.hCells,c=n.vCells,u=t.width-r,f=t.height-o;return Er(e,(function(e){for(var n=Math.floor(e/2),d=e%2==0,m=Math.pow(2,n),y=(d?l:c)/m/2,p=d?a:s,h=[{v:!0,x:p+y*i*.5},{v:!1,x:p+y*i*1.5}],x=function(e){var t=y*Math.pow(2,e)*i,n=h.length-1;h.push.apply(h,h.map((function(e,r){return{v:h[n-r].v,x:e.x+t}})))},g=1;g<=n;g++)x(g);var v,b=n%2==1,_=Math.floor(n/2);return v=b?(d?f:u)-t.labelHeight*(.5+_):(d?o:r)+t.labelHeight*(.5+_),d?{hor:!0,span:y,text:h.filter((function(e){return e.v})).map((function(e){return{x:e.x,y:v}})),notText:h.filter((function(e){return!e.v})).map((function(e){return{x:e.x,y:v}}))}:{hor:!1,span:y,text:h.filter((function(e){return e.v})).map((function(e){return{x:v,y:e.x}})),notText:h.filter((function(e){return!e.v})).map((function(e){return{x:v,y:e.x}}))}}))}(e.length,r),m=function(e,t,n,r){return e.map((function(e,o){var i=Math.floor(o/2),a=o%2==0,s=Math.pow(2,i),l=(a?t:n)/s/2;return function(t,n){var o=n[0],i=n[1];return r(t,e)?[o,i]:l>1?a?[l-1-o+l,i]:[o,l-1-i+l]:a?[o+l,i]:[o,i+l]}}))}(e,l,c,n),y=t.map((function(e){var t=m.reduceRight((function(t,n){return n(e,t)}),[0,0]);return{x:i+t[0]*s,y:a+t[1]*s}})),p=kr(u),h=kr(f);return{s:d,c:y,cell:s,grid:{x:i,y:a,hCells:l,vCells:c,levels:p.map((function(e,t){return{x:e,y:t<h.length?h[t]:[]}}))}}}(e,m,p,{width:n.area.w,height:n.area.h,labelHeight:h}),g=m.reduce((function(e,t){return Math.max(e,t.cardinality)}),0),v=f(g,[x.cell,o],{orientation:"vertical",fontSizeHint:s}),b=Math.round(x.cell*(1-i)),_=Math.min(Math.max(2,b/2*i),5),w=function(e){return Math.floor(o/1.4*.7*v.tickFormat()(e).length)}(g);return{id:u||Nn(),grid:x.grid,sets:{keys:d,l:x.s,v:e,labelHeight:h,format:v.tickFormat()},triangleSize:_,cell:x.cell,cs:{keys:y,l:x.c,v:m,barLabelFontSize:o,has:p,scale:v,bandWidth:b,labelOffset:w+9+6},toKey:l,toElemKey:c}}(n.sets,n.combinations,u,n.numericScale,n.barLabelOffset+Tn(i.barLabel),n.barPadding,Tn(i.setLabel),Tn(i.axisTick),n.toKey,n.toElemKey,n.id)}),[n.sets,n.combinations,u,n.numericScale,n.barLabelOffset,i.barLabel,n.barPadding,i.axisTick,i.setLabel,n.toKey,n.toElemKey,n.id]),d=ur(n),m=zn(s),y=cr(l,n,n.fontFamily,i),p="\n  "+y.root+"\n  "+y.text+"\n\n  .axisTextStyle-"+l+" {\n    fill: "+n.textColor+";\n    "+y.p(i.axisTick)+"\n    text-anchor: end;\n  }\n  .barTextStyle-"+l+" {\n    fill: "+n.textColor+";\n    "+y.p(i.barLabel)+"\n    text-anchor: middle;\n  }\n  .setTextStyle-"+c.id+" {\n    fill: "+n.textColor+";\n    "+y.p(i.setLabel)+"\n    text-anchor: middle;\n    dominant-baseline: central;\n  }\n  .cChartTextStyle-"+l+" {\n    fill: "+n.textColor+";\n    "+y.p(i.chartLabel)+"\n  }\n\n  .not-"+c.id+" {\n    text-decoration: overline;\n  }\n\n  .axisLine-"+l+" {\n    fill: none;\n    stroke: "+n.textColor+";\n  }\n\n  .gridStyle-"+c.id+" {\n    fill: none;\n    stroke: "+n.strokeColor+";\n    stroke-linecap: round;\n  }\n  .gridStyle-"+c.id+"-1 {\n    stroke-width: 2;\n  }\n  .gridStyle-"+c.id+"-2 {\n    stroke-width: 3;\n  }\n\n  "+y.fill+"\n  "+y.export+"\n\n  "+o.map((function(e,t){return".fillQ"+t+"-"+f.id+" {\n    fill: "+e.color+";\n  }"})).join("\n")+"\n  ",h=hr(f,n,"kmap"),x=f.sets.l.reduce((function(e,t){return Math.min(e,t.text[0].x-f.sets.labelHeight)}),u.area.w);return Me.createElement(dr,{rules:p,style:c,size:u,p:n,data:f,tRef:t,selectionName:m,h:d,exportChart:h},Me.createElement(Kn,{style:c,width:x}),Me.createElement(br,{style:c,data:f,h:d,size:u}),Me.createElement(Sr,{style:c,data:f,hasHover:d.hasHover,selection:s}),Me.createElement(wr,{style:c,data:f,hasHover:d.hasHover,queries:o,secondary:d.hasHover||null!=s}))}));function Ar(e){var t,n,r,o,i=null!==(t=e.color)&&void 0!==t?t:"#A6A8AB",a=null!==(n=e.secondaryColor)&&void 0!==n?n:"#E1E2E3",s=Object.assign({},e),l=null!==(r=e.background)&&void 0!==r?r:"#F4F4F4";return delete s.color,delete s.secondaryColor,delete s.background,l&&(s.style=Object.assign({background:l},null!==(o=s.style)&&void 0!==o?o:{})),{color:i,secondary:a,rest:s}}var Nr=ie(le((function(e,t){var n=Ar(e),r=n.color,o=n.secondary,i=[10,20,35,60,65,80,90],a=[50,30,15];return Me.createElement("svg",Object.assign({viewBox:"0 0 300 200",ref:t},n.rest),i.map((function(e,t){return Me.createElement("rect",{key:t,x:85+30*t,y:e,width:20,height:100-e,fill:r})})),a.map((function(e,t){return Me.createElement("rect",{key:t,x:e,y:110+30*t,width:75-e,height:20,fill:r})})),i.map((function(e,t){return a.map((function(e,n){return Me.createElement("circle",{key:t+"x"+n,cx:85+30*t+10,cy:110+30*n+10,r:10,fill:n===2-t||3===t&&n>0||4===t&&1!==n||5===t&&n<2||6===t?r:o})}))})),Me.createElement("rect",{x:"182",y:"150",width:"6",height:"30",fill:r}),Me.createElement("rect",{x:"212",y:"120",width:"6",height:"60",fill:r}),Me.createElement("rect",{x:"242",y:"120",width:"6",height:"30",fill:r}),Me.createElement("rect",{x:"272",y:"120",width:"6",height:"60",fill:r}))}))),Or=ie(le((function(e,t){var n=Ar(e),r=n.color,o=n.secondary,i=n.rest,a=sn(3,280,3180);return Me.createElement("svg",Object.assign({viewBox:"0 0 300 200",ref:t},i),a.sets.map((function(e,t){return Me.createElement("circle",{key:t,cx:e.cx,cy:e.cy+10,r:e.r,fill:o})})),a.sets.map((function(e,t){return Me.createElement("circle",{key:t,cx:e.cx,cy:e.cy+10,r:e.r,stroke:r,fill:"none"})})))}))),jr=ie(le((function(e,t){var n=Ar(e),r=n.rest,o=n.color,i=n.secondary,a=Mr(2,{width:270,height:170,labelHeight:20}),s=a.xBefore,l=a.yBefore,c=a.cell,u=a.hCells*c,f=a.vCells*c;return Me.createElement("svg",Object.assign({viewBox:"0 0 300 200",ref:t,fontFamily:"sans-serif"},r),Me.createElement("g",{transform:"translate("+(s+10)+","+(l+10)+")"},Me.createElement("text",{x:.5*c,y:-3,fill:o,textAnchor:"middle"},"A"),Me.createElement("text",{x:1.5*c,y:-3,fill:o,textAnchor:"middle",style:{textDecoration:"overline"}},"A"),Me.createElement("text",{x:-3,y:.5*c,fill:o,textAnchor:"end",dominantBaseline:"central"},"B"),Me.createElement("text",{x:-3,y:1.5*c,fill:o,textAnchor:"end",dominantBaseline:"central",style:{textDecoration:"overline"}},"B"),Me.createElement("rect",{x:.1*c,y:c*(1-.9),height:.9*c,width:.8*c,fill:i}),Me.createElement("rect",{x:1.1*c,y:.5*c,height:.5*c,width:.8*c,fill:i}),Me.createElement("rect",{x:.1*c,y:1.74*c,height:.26*c,width:.8*c,fill:i}),Me.createElement("rect",{x:1.1*c,y:1.25*c,height:.75*c,width:.8*c,fill:i}),Me.createElement("path",{d:"M0,0 l"+u+",0 l0,"+f+" l"+-u+",0 l0,"+-f+" M"+u/2+",0 l0,"+f+" M0,"+f/2+" l"+u+",0",fill:"none",stroke:o})))}))),Ir=1/180*Math.PI;function zr(e,t,n,r){return{x:e+Math.cos(r*Ir)*n,y:t+Math.sin(r*Ir)*n}}var Lr={__proto__:null,widthRatios:function(e){return null==e||Array.isArray(e)&&3===e.length&&e.every((function(e){return"number"==typeof e}))},heightRatios:function(e){return null==e||Array.isArray(e)&&2===e.length&&e.every((function(e){return"number"==typeof e}))},sets:function(e){return Array.isArray(e)&&e.every(qe)},combinations:function(e){return null==e||Array.isArray(e)&&e.every(Fe)||He(e)},selection:function(e){return null==e||Array.isArray(e)||Re(e)},onHover:function(e){return null==e||"function"==typeof e},onClick:function(e){return null==e||"function"==typeof e},queries:function(e){return!e||Array.isArray(e)&&e.every(Be)},stringOrFalse:function(e){return null==e||"string"==typeof e||!1===e},theme:function(e){return null==e||"light"===e||"dark"===e||"vega"===e},classNames:function(e){return null==e||Object.keys(e).every((function(t){return Jt.includes(t)&&"string"==typeof e[t]}))},fontSizes:function(e){return null==e||Object.keys(e).every((function(t){return Gt.includes(t)&&"string"==typeof e[t]}))},numericScale:function(e){return null==e||"linear"===e||"log"===e||"function"==typeof e},bandScale:function(e){return null==e||"band"===e||"function"==typeof e},axisOffset:function(e){return null==e||"auto"===e||"number"==typeof e},style:function(e){return null==e||"object"==typeof e},styles:function(e){return null==e||Object.keys(e).every((function(e){return Jt.includes(e)}))},exportButtons:function(e){return null==e||"boolean"==typeof e||Object.keys(e).every((function(t){return Yt.includes(t)&&"boolean"==typeof e[t]}))}};function Tr(e,t,n){var r=t-1,o=function(t){var o=t*r,i=Math.floor(o),a=o-i,s=e[i];return 0===a?s:n(s,e[Math.min(i+1,r)],a)};return{q1:o(.25),median:o(.5),q3:o(.75)}}function Pr(e,t){return void 0===t&&(t=e.length),Tr(e,t,(function(e,t,n){return e+n*(t-e)}))}function qr(e,t){void 0===t&&(t=e.length);var n=t,r=Math.floor((n+3)/2)/2,o=function(t){return.5*(e[Math.floor(t)-1]+e[Math.ceil(t)-1])};return{q1:o(r),median:o((n+1)/2),q3:o(n+1-r)}}var Fr={hinges:qr,fivenum:qr,type7:Pr,quantiles:Pr,linear:function(e,t){return void 0===t&&(t=e.length),Tr(e,t,(function(e,t,n){return e+(t-e)*n}))},lower:function(e,t){return void 0===t&&(t=e.length),Tr(e,t,(function(e){return e}))},higher:function(e,t){return void 0===t&&(t=e.length),Tr(e,t,(function(e,t){return t}))},nearest:function(e,t){return void 0===t&&(t=e.length),Tr(e,t,(function(e,t,n){return n<.5?e:t}))},midpoint:function(e,t){return void 0===t&&(t=e.length),Tr(e,t,(function(e,t){return.5*(e+t)}))}};function Rr(e){return"function"==typeof e?e:Fr[e]||Pr}function Hr(e,t){void 0===t&&(t={});for(var n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,o=0,i=0,a=e.length,s=function(e){var t,n;return void 0===e&&(e={}),{coef:null!==(t=e.coef)&&void 0!==t?t:1.5,quantiles:Rr(null!==(n=e.quantiles)&&void 0!==n?n:"type7")}}(t),l=s.quantiles,c=s.coef,u=new Float32Array(a),f=0;f<a;++f){var d=e[f];null==d||Number.isNaN(d)||(u[i]=d,i++,d<n&&(n=d),d>r&&(r=d),o+=d)}var m=a-i;if(0===i)return{min:NaN,max:NaN,mean:NaN,missing:m,count:a,whiskerHigh:NaN,whiskerLow:NaN,outlier:[],median:NaN,q1:NaN,q3:NaN};for(var y=u.subarray(0,i).sort((function(e,t){return e===t?0:e<t?-1:1})),p=l(y,i),h=p.median,x=p.q1,g=p.q3,v=g-x,b="number"==typeof c&&c>0,_=b?Math.max(n,x-c*v):n,w=b?Math.min(r,g+c*v):r,S=[],E=_,k=0;k<i;++k){var M=y[k];if(_<M){E=M;break}0!==S.length&&S[S.length-1]===M||S.push(M)}for(var C=w,A=[],N=i-1;N>=0;--N){var O=y[N];if(O<w){C=O;break}0!==A.length&&A[A.length-1]===O||0!==S.length&&S[S.length-1]===O||A.push(O)}return{min:n,max:r,count:a,missing:m,mean:o/i,whiskerHigh:C,whiskerLow:E,outlier:S.concat(A.reverse()),median:h,q1:x,q3:g}}function Br(e){var t=e[1]-e[0];return function(n){return n*t+e[0]}}function Ur(e){var t=e[1]-e[0];return function(n){return(n-e[0])/t}}function Dr(e,t){var n=new Map(e.map((function(e){return[e.value,0]})));return t.forEach((function(e){if(null!=e){var t=e.toString();n.has(t)&&n.set(t,n.get(t)+1)}})),n}function Kr(e,t,n,r){void 0===r&&(r=!1);var o=function(e){var t=["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d"],n=["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494"],r=e?t.concat(n):n.concat(t),o=0;return function(){return r[o++%r.length]}}(r),i=t.map((function(e){return Object.assign({count:0,acc:0,percentage:0},{value:t="string"==typeof e?e:e.value,label:t.length>0?""+t[0].toUpperCase()+t.slice(1):t,color:o()},"string"==typeof e?{}:e);var t})),a=Dr(i,e),s=n?Dr(i,n):null,l=Array.from(a.values()).reduce((function(e,t){return e+t}),0),c=0;return i.forEach((function(e){e.acc=c,e.count=a.get(e.value),e.percentage=e.count/l,c+=s?s.get(e.value):e.count})),i}function Wr(){return(Wr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Vr(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t.indexOf(n=i[r])>=0||(o[n]=e[n]);return o}function Qr(e){return Math.round(100*e)/100}var $r=function(e){return e.toFixed(2)};function Gr(e,t){return"Min: "+t(e.min)+", 25% Quantile: "+t(e.q1)+", Median: "+t(e.median)+", 75% Quantile: "+t(e.q3)+", Max: "+t(e.max)}var Jr=Me.memo((function(e){var t=e.theme,n=void 0===t?"light":t,r=e.mode,o=void 0===r?"normal":r,i=e.boxStyle,a=e.lineStyle,s=e.outlierStyle,l=e.margin,c=void 0===l?0:l,u=e.boxPadding,f=void 0===u?.1:u,d=e.outlierRadius,m=void 0===d?3:d,y=e.numberFormat,p=void 0===y?$r:y,h=Vr(e,["theme","mode","boxStyle","lineStyle","outlierStyle","margin","boxPadding","outlierRadius","numberFormat"]),x=Array.isArray(e.values)?Hr(e.values,h):e.values;if(Number.isNaN(x.median))return Me.createElement("g",null);var g="vertical"!==e.orient,v=Ur([e.min,e.max]),b=Br([0,g?e.width:e.height]),_=function(e){return Qr(b(v(e)))},w={max:_(x.max),avg:_(x.mean),med:_(x.median),min:_(x.min),q1:_(x.q1),q3:_(x.q3),wh:_(x.whiskerHigh),wl:_(x.whiskerLow)},S=!1!==e.tooltips&&Me.createElement("title",null,Gr(x,p)),E=fn(n).notMemberColor,k={box:Object.assign({fill:E},i),line:Object.assign({fill:"none",stroke:"light"===n?"black":"#cccccc"},a),outlier:Object.assign({fill:E},s)};if(g){var M=e.height/2,C=Qr(e.height*f)+c,A=e.height-C,N=Me.createElement("path",{d:"M"+w.wl+","+c+" l0,"+(e.height-2*c)+" M"+w.wl+","+M+" L"+w.q1+","+M+" M"+w.q3+","+M+" L"+w.wh+","+M+" M"+w.wh+","+c+" L"+w.wh+","+(e.height-c)+" M"+w.q1+","+C+" L"+w.q3+","+C+" L"+w.q3+","+A+" L"+w.q1+","+A+" L"+w.q1+","+C+" M"+w.med+","+C+" l0,"+(A-C),style:k.line});return"indicator"===o?N:Me.createElement("g",null,S,"normal"===o&&Me.createElement("rect",{x:w.q1,y:C,width:w.q3-w.q1,height:e.height-2*C,style:k.box}),N,x.outlier.map((function(e){return Me.createElement("circle",{key:e,r:m,cy:M,cx:_(e),style:k.outlier},Me.createElement("title",null,"$",p(e)))})))}var O=e.width/2,j=Qr(e.width*f)+c,I=e.width-j,z=Me.createElement("path",{d:"M"+c+","+w.wl+" l"+(e.width-2*c)+",0 M"+O+","+w.wl+" L"+O+","+w.q1+" M"+O+","+w.q3+" L"+O+","+w.wh+" M"+c+","+w.wh+" L"+(e.width-c)+","+w.wh+" M"+j+","+w.q1+" L"+j+","+w.q3+" l"+(I-j)+",0 L"+I+","+w.q1+" L"+j+","+w.q1+" M"+j+","+w.med+" l"+(I-j)+",0",style:k.line});return"indicator"===o?z:Me.createElement("g",null,S,"normal"===o&&Me.createElement("rect",{y:w.q1,x:j,height:w.q3-w.q1,width:e.width-2*j,style:k.box}),z,x.outlier.map((function(e){return Me.createElement("circle",{key:e,r:m,cx:O,cy:_(e),style:k.outlier},Me.createElement("title",null,"$",p(e)))})))}));function Yr(e){return Array.isArray(e.bins)}function Zr(e){return e.map((function(e){return e.label+": "+e.count})).join(", ")}var Xr=Me.memo((function(e){var t,n,r=e.margin,o=void 0===r?0:r,i=e.rectStyle,a=void 0===i?{}:i,s=Yr(e)?e.bins:Kr(e.values,e.categories,e.base,"dark"===e.theme),l=Ur([0,Yr(e)?e.bins.reduce((function(e,t){return e+t.count}),0):null!==(t=null===(n=e.base)||void 0===n?void 0:n.length)&&void 0!==t?t:e.values.length]),c="vertical"!==e.orient,u=Br([0,c?e.width:e.height]),f=function(e){return u(l(e))};return Me.createElement("g",null,s.map(c?function(t){return Me.createElement("rect",{key:t.value,x:f(t.acc),width:f(t.count),y:o,height:e.height-2*o,style:Object.assign({fill:t.color},a)},!1!==e.tooltips&&Me.createElement("title",null,t.label+": "+t.count))}:function(t){return Me.createElement("rect",{key:t.value,y:f(t.acc),height:f(t.count),x:o,width:e.width-2*o,style:Object.assign({fill:t.color},a)},!1!==e.tooltips&&Me.createElement("title",null,t.label+": "+t.count))}))})),eo="rgba(255,255,255,0.2)";function to(e,t){I(m(fr,t),e)}var no=to;function ro(e,t){z(m(fr,t),e)}var oo=ro;e.asCombination=Ze,e.asCombinations=function(e,t,n){return e.map((function(e){return Ze(e,t,n)}))},e.asSet=lt,e.asSets=function(e,t){return void 0===t&&(t={}),ct(e.map(lt),t)},e.bandScale=xt,e.boxplot=Hr,e.boxplotAddon=function(e,t,n){return void 0===n&&(n={}),function(e,t,n){var r=void 0===n?{}:n,o=r.size,i=void 0===o?100:o,a=r.position,s=r.name,l=void 0===s?e.toString():s,c=Vr(r,["size","position","name"]),u="function"==typeof e?e:function(t){return t[e]},f=Number.POSITIVE_INFINITY,d=Number.NEGATIVE_INFINITY;return Array.isArray(t)?t.forEach((function(e){var t=u(e);null==t||Number.isNaN(t)||(t<f&&(f=t),t>d&&(d=t))})):(f=t.min,d=t.max),{name:l,position:a,size:i,createOnHandlerData:function(e){var t=Hr(e.elems.map(u),c);return{id:"boxplot",name:l,value:Object.assign(Wr({},t,{toString:function(){var e;return Gr(this,null!==(e=c.numberFormat)&&void 0!==e?e:$r)}}),t)}},render:function(e){var t=e.width,n=e.height,r=e.theme,o=e.set.elems.map(u);return Me.createElement(Jr,Object.assign({values:o,width:t,height:n,min:f,max:d,theme:r},c))},renderSelection:function(e){var t=e.width,n=e.height,r=e.overlap,o=e.selectionColor,i=e.theme;if(null==r||0===r.length)return null;var a=r.map(u);return Me.createElement(Jr,Object.assign({values:a,width:t,height:n,min:f,max:d,mode:"box",lineStyle:{stroke:o,strokeWidth:2},outlierStyle:{fill:o},theme:i},c))},renderQuery:function(e){var t=e.width,n=e.height,r=e.overlap,o=e.query,i=e.secondary,a=e.index,s=e.theme;if(null==r||0===r.length)return null;var l=r.map(u);return Me.createElement(Jr,Object.assign({values:l,width:t,height:n,min:f,max:d,mode:i?"indicator":"box",margin:i?a+2:0,lineStyle:{stroke:o.color,strokeWidth:i?1:2},outlierStyle:{fill:o.color},theme:s},c))}}}(e,t,n)},e.boxplotAggregatedAddon=function(e,t,n){return void 0===n&&(n={}),function(e,t,n){var r=void 0===n?{}:n,o=r.size,i=void 0===o?100:o,a=r.position,s=r.name,l=void 0===s?"BoxPlot":s,c=Vr(r,["size","position","name"]),u=t.min,f=t.max;return{name:l,position:a,size:i,createOnHandlerData:function(t){var n=e(t.elems);return n.toString=function(){var e;return Gr(this,null!==(e=c.numberFormat)&&void 0!==e?e:$r)},{id:"boxplot",name:l,value:n}},render:function(t){var n=t.width,r=t.height,o=t.theme,i=e(t.set.elems);return Me.createElement(Jr,Object.assign({values:i,width:n,height:r,min:u,max:f,theme:o},c))},renderSelection:function(t){var n=t.width,r=t.height,o=t.overlap,i=t.selectionColor,a=t.theme;if(null==o||0===o.length)return null;var s=e(o);return Me.createElement(Jr,Object.assign({values:s,width:n,height:r,min:u,max:f,mode:"box",lineStyle:{stroke:i,strokeWidth:2},outlierStyle:{fill:i},theme:a},c))},renderQuery:function(t){var n=t.width,r=t.height,o=t.overlap,i=t.query,a=t.secondary,s=t.index,l=t.theme;if(null==o||0===o.length)return null;var d=e(o);return Me.createElement(Jr,Object.assign({values:d,width:n,height:r,min:u,max:f,mode:a?"indicator":"box",margin:a?s+2:0,lineStyle:{stroke:i.color,strokeWidth:a?1:2},outlierStyle:{fill:i.color},theme:l},c))}}}(e,t,n)},e.categoricalAddon=function(e,t,n){return void 0===n&&(n={}),function(e,t,n){var r=void 0===n?{}:n,o=r.size,i=void 0===o?100:o,a=r.position,s=r.name,l=void 0===s?e.toString():s,c=Vr(r,["size","position","name"]),u="function"==typeof e?e:function(t){return t[e]},f=[];if(Array.isArray(t)){var d=new Set;t.forEach((function(e){var t=u(e);null!=t&&d.add(t.toString())})),f=Array.from(d).sort()}else f=t.categories;return{name:l,position:a,size:i,createOnHandlerData:function(e){var t=Kr(e.elems.map(u),f,void 0,"dark"===c.theme);return t.toString=function(){return Zr(this)},{id:"categorical",name:l,value:t}},render:function(e){var t=e.width,n=e.height,r=e.theme,o=e.set.elems.map(u);return Me.createElement(Xr,Object.assign({values:o,categories:f,width:t,height:n,theme:r},c))},renderSelection:function(e){var t=e.width,n=e.height,r=e.theme,o=e.overlap,i=e.selectionColor;if(null==o||0===o.length)return null;var a=e.set.elems.map(u),s=o.map(u);return Me.createElement(Xr,Object.assign({values:s,base:a,categories:f,width:t,height:n,theme:r,rectStyle:{stroke:i,strokeWidth:2,fill:"light"===r?"rgba(0,0,0,0.1)":eo}},c))},renderQuery:function(e){var t=e.width,n=e.height,r=e.overlap,o=e.query,i=e.secondary,a=e.index,s=e.theme;if(null==r||0===r.length)return null;var l=e.set.elems.map(u),d=r.map(u);return Me.createElement(Xr,Object.assign({values:d,base:l,categories:f,width:t,height:n,margin:i?a+2:0,rectStyle:{stroke:o.color,fill:"light"===s?"rgba(0,0,0,0.1)":eo},theme:s},c))}}}(e,t,n)},e.categoricalAggregatedAddon=function(e,t){return void 0===t&&(t={}),function(e,t){var n=void 0===t?{}:t,r=n.size,o=void 0===r?100:r,i=n.position,a=n.name,s=void 0===a?"Histogram":a,l=Vr(n,["size","position","name"]);return{name:s,position:i,size:o,createOnHandlerData:function(t){var n=e(t.elems);return{id:"categorical",name:s,value:Object.assign(Wr({},n,{toString:function(){return Zr(this)}}),n)}},render:function(t){var n=t.width,r=t.height,o=t.theme,i=e(t.set.elems);return Me.createElement(Xr,Object.assign({bins:i,width:n,height:r,theme:o},l))},renderSelection:function(t){var n=t.width,r=t.height,o=t.theme,i=t.overlap,a=t.selectionColor;if(null==i||0===i.length)return null;var s=e(i);return Me.createElement(Xr,Object.assign({bins:s,width:n,height:r,theme:o,rectStyle:{stroke:a,strokeWidth:2,fill:"light"===o?"rgba(0,0,0,0.1)":eo}},l))},renderQuery:function(t){var n=t.width,r=t.height,o=t.overlap,i=t.query,a=t.secondary,s=t.index,c=t.theme;if(null==o||0===o.length)return null;var u=e(o);return Me.createElement(Xr,Object.assign({bins:u,width:n,height:r,margin:a?s+2:0,rectStyle:{stroke:i.color,fill:"light"===c?"rgba(0,0,0,0.1)":eo},theme:c},l))}}}(e,t)},e.categoricalHistogram=Kr,e.createVennJSAdapter=function(e,t){return{maxSets:1/0,compute:function(n,r,o,i){var a,s,l,c=r.map((function(e){return{sets:Array.from(e.sets).map((function(e){return e.name})),size:e.cardinality}})),u=e(c,Object.assign({},{width:o,height:i,distinct:!0},null!=t?t:{})),f=u.filter((function(e){return 1===e.data.sets.length})),d=new Map(n.map((function(e,t){return[e.name,t]}))),m=f.map((function(e){return e.circles[0]})),y=(s=(a=m).reduce((function(e,t){return e+t.x}),0),l=a.reduce((function(e,t){return e+t.y}),0),{x:s/a.length,y:l/a.length}),p=function(e){return{x2:e.p1.x,y2:e.p1.y,cx:e.circle.x,cy:e.circle.y,sweep:!0,large:e.width>e.circle.radius,ref:m.findIndex((function(t){return Math.abs(t.x-e.circle.x)<.05&&Math.abs(t.y-e.circle.y)<.05})),mode:"i"}};return{sets:f.map((function(e){var t=e.circles[0],n=function(e,t){return Math.atan2(e.y-t.y,e.x-t.x)/Ir}(t,y);return{cx:t.x,cy:t.y,r:t.radius,align:n>90?"end":"start",verticalAlign:"bottom",text:zr(t.x,t.y,1.1*t.radius,n)}})),intersections:u.map((function(e){var t=e.arcs,n={x:e.text.x,y:e.text.y};if(0===t.length)return{sets:e.data.sets.map((function(e){return d.get(e)})),text:n,x1:0,y1:0,arcs:[]};if(1===t.length){var r=e.arcs[0].circle;return{sets:e.data.sets.map((function(e){return d.get(e)})),text:n,x1:e.arcs[0].p2.x,y1:r.y-r.radius,arcs:[p(e.arcs[0]),Object.assign(p(e.arcs[0]),{y2:r.y-r.radius})],path:e.distinctPath||e.path}}return{sets:e.data.sets.map((function(e){return d.get(e)})),text:n,x1:e.arcs[0].p2.x,y1:e.arcs[0].p2.y,arcs:e.arcs.map((function(e){return p(e)})),path:e.distinctPath||e.path}}))}}}},e.downloadUrl=function(e,t,n){vn(e,t,n)},e.exportSVG=function(e,t){return gn(e,t)},e.extractFromExpression=function(e,t,n){var r,o,i;void 0===n&&(n={});var a="function"==typeof t?t:function(e){return e.sets},s=null!==(r="function"!=typeof t?t:n)&&void 0!==r?r:{},l=null!==(o=s.type)&&void 0!==o?o:"intersection",c=null!==(i=s.joiner)&&void 0!==i?i:Xe[l],u=[],f=new Map,d=null;function m(e){return this===e?this.cardinality:null==d?0:d(this,e)}var y=e.map((function(e){var t=a(e),n=t.map((function(e){if(f.has(e))return f.get(e);var t={cardinality:0,elems:[],name:e,type:"set",overlap:m};return u.push(t),f.set(t.name,t),t}));if("distinctIntersection"===l)for(var r,o=Ke(n);!(r=o()).done;)r.value.cardinality+=e.cardinality;else if(1===t.length)Object.assign(n[0],{cardinality:e.cardinality},e);else if("intersection"===l)for(var i,s=Ke(n);!(i=s()).done;){var d=i.value;d.cardinality=Math.max(d.cardinality,e.cardinality)}else if("union"===l)for(var y,p=Ke(n);!(y=p()).done;){var h=y.value;h.cardinality=Math.min(h.cardinality,e.cardinality)}var x=t.join(c);return Object.assign({type:l,elems:[],name:x,overlap:m},e,{cardinality:e.cardinality,degree:t.length,sets:new Set(n)})})),p=ct(u,{order:s.setOrder}),h=Ye(p,y,{order:s.combinationOrder});switch(l){case"distinctIntersection":d=function(e,t){void 0===t&&(t=ut);for(var n,r=new Map,o=Ke(pt(e,t));!(n=o()).done;)for(var i,a=n.value,s=Ke(a.s);!(i=s()).done;){var l=i.value;r.has(l)?r.get(l).push(a):r.set(l,[a])}return function(e,n){var o=dt(e,n,t);if(null!=o.done)return o.done;if(!o.aIsSet&&!o.bIsSet)return 0;if(o.aIsSet&&!o.bIsSet)return mt(n,o)?n.cardinality:0;if(!o.aIsSet&&o.bIsSet)return yt(e,o)?e.cardinality:0;var i=r.get(o.aKey),a=r.get(o.bKey);return i&&a?i.length<a.length?i.reduce((function(e,t){return e+(t.sets.has(o.bKey)?t.cardinality:0)}),0):a.reduce((function(e,t){return e+(t.sets.has(o.aKey)?t.cardinality:0)}),0):0}}(h,s.toKey);break;case"union":d=function(e,t){void 0===t&&(t=ut);var n=new Map(pt(e,t).map((function(e){return[e.key,e.cardinality]})));return function(e,r){var o=dt(e,r,t);if(null!=o.done)return o.done;if(o.aIsSet&&!o.bIsSet&&mt(r,o))return e.cardinality;if(!o.aIsSet&&o.bIsSet&&yt(e,o))return r.cardinality;var i=ht(e,r,o);return n.has(i)?e.cardinality+r.cardinality-n.get(i):0}}(h,s.toKey);break;default:d=function(e,t){void 0===t&&(t=ut);var n=new Map(pt(e,t).map((function(e){return[e.key,e.cardinality]})));return function(e,r){var o=dt(e,r,t);if(null!=o.done)return o.done;if(o.aIsSet&&!o.bIsSet&&mt(r,o))return r.cardinality;if(!o.aIsSet&&o.bIsSet&&yt(e,o))return e.cardinality;var i=ht(e,r,o);return n.has(i)?n.get(i):0}}(h,s.toKey)}return{sets:p,combinations:h}},e.extractSets=function(e,t,n){var r;void 0===n&&(n={});var o="function"==typeof t?t:function(e){return e.sets},i=null!==(r="function"!=typeof t?t:n)&&void 0!==r?r:{},a=new Map;return e.forEach((function(e){o(e).forEach((function(t){var n=String(t);a.has(n)?a.get(n).push(e):a.set(n,[e])}))})),ct(Array.from(a).map((function(e){var t=e[1];return{type:"set",elems:t,name:String(e[0]),cardinality:t.length}})),i)},e.fillDefaults=function(e){return yn(e)},e.fillKarnaughMapDefaults=function(e){return hn(e)},e.fillVennDiagramDefaults=function(e){return pn(e)},e.fromDump=function(e,t,n){void 0===n&&(n={});var r,o=e.sets.map((function(e){return lt(Ue({},e,{elems:It(e.elems,t)}))})),i=e.combinations?e.combinations.map((function(e){return Ze(Ue({},e,{elems:It(e.elems,t)}),e.type,(function(e){return e.sets.map((function(e){return o[e]}))}))})):st(o,Object.assign({type:"intersection",elems:t,toElemKey:n.toElemKey},null!==(r=e.combinationOptions)&&void 0!==r?r:{}));function a(e){return"set"===e.type?o[e.index]:i[e.index]}return{sets:o,combinations:i,selection:e.selection?"string"==typeof e.selection||Array.isArray(e.selection)?It(e.selection,t):a(e.selection):void 0,queries:e.queries.map((function(e){return e.set?{name:e.name,color:e.color,set:a(e.set)}:{name:e.name,color:e.color,elems:It(e.elems,t)}}))}},e.fromIndicesArray=It,e.fromSetName=function(e,t){void 0===t&&(t=/[∩∪&|]/);var n=new Map(e.map((function(e){return[e.name,e]})));return function(e){return e.name.split(t).map((function(e){return n.get(e.trim())}))}},e.fromStaticDump=function(e,t){var n;void 0===t&&(t={});var r=null!==(n=t.toKey)&&void 0!==n?n:ut,o=function(){return 0};function i(e){return e.overlap=function(t){return o(e,t)},e}var a=e.sets.map((function(e){return i({name:Ft(e)?e.n:e.name,cardinality:Ft(e)?e.c:e.cardinality,type:"set",elems:[]})})),s=e.combinations.map((function(e){var t,n,r=qt(e)?function(e){return a.filter((function(t,n){var r=Math.pow(2,n);return(e&r)===r}))}(e.s):e.sets.map((function(e){return a[e]})),o={i:"intersection",u:"union",c:"composite",d:"distinctIntersection"}[(null!==(t=e.type)&&void 0!==t?t:"i")[0]];return i({name:qt(e)?null!==(n=e.n)&&void 0!==n?n:Tt(r,o):e.name,cardinality:qt(e)?e.c:e.cardinality,type:o,degree:r.length,sets:new Set(r),elems:[]})})),l=function(e,t,n,r){void 0===r&&(r=ut);var o="string"==typeof e?function(e){if(0===e.length)return[];for(var t,n=e.split(";"),r=n[1],o=Number.parseInt(n[0],10),i=0===(t=r).length?[]:t.split(",").map((function(e){if(""===e)return 0;if(e.includes("=")){var t=e.split("=").map((function(e){return Number.parseInt(e,10)})),n=t[0];return Array(t[1]+1).fill(n)}return Number.parseInt(e,10)})).flat(),a=[],s=0,l=o;l>0;l--)a.push(i.slice(s,s+l)),s+=l;return a}(e):e,i=new Map(t.map((function(e,t){return[r(e),t]}))),a=new Map(n.map((function(e,n){return[r(e),n+t.length]})));return{setIndex:i,compute:function(e,t){if(e===t)return e.cardinality;var n=r(e),s=r(t),l=i.has(n)?i.get(n):a.get(n),c=i.has(s)?i.get(s):a.get(s);if(l===c)return e.cardinality;var u=Math.min(l,c),f=Math.max(l,c)-u-1;return u<0||u>=o.length||f<0||f>=o[u].length?0:o[u][f]},combinationIndex:a}}(e.overlaps,a,s,r),c=l.setIndex,u=l.combinationIndex;function f(e){return"set"===e.type?a[e.index]:s[e.index]}function d(e){return function(t){var n=r(t),o=c.has(n)?c.get(n):u.get(n);return null==o||o<0||o>=e.length?0:e[o]}}return o=l.compute,{sets:a,combinations:s,selection:e.selection?Array.isArray(e.selection)?d(e.selection):f(e.selection):void 0,queries:e.queries.map((function(e){return e.set?{name:e.name,color:e.color,set:f(e.set)}:{name:e.name,color:e.color,overlap:d(e.overlaps)}}))}},e.generateCombinations=st,e.getDefaultTheme=fn,e.hydrate=ro,e.hydrateKarnaughMap=function(e,t){z(m(Cr,t),e)},e.hydrateKarnaughMapSkeleton=function(e,t){z(m(jr,t),e)},e.hydrateSkeleton=function(e,t){z(m(Nr,t),e)},e.hydrateUpSet=oo,e.hydrateVennDiagram=function(e,t){z(m(xr,t),e)},e.hydrateVennDiagramSkeleton=function(e,t){z(m(Or,t),e)},e.isCalcQuery=Ie,e.isElemQuery=je,e.isGenerateSetCombinationOptions=He,e.isSet=qe,e.isSetCombination=Fe,e.isSetLike=Re,e.isSetQuery=ze,e.isUpSetQuery=Be,e.linearScale=kt,e.logScale=Ot,e.mergeColors=tt,e.parseColor=et,e.propValidators=Lr,e.queryElemOverlap=Te,e.queryOverlap=Le,e.render=to,e.renderKarnaughMap=function(e,t){I(m(Cr,t),e)},e.renderKarnaughMapSkeleton=function(e,t){I(m(jr,t),e)},e.renderSkeleton=function(e,t){I(m(Nr,t),e)},e.renderUpSet=no,e.renderVennDiagram=function(e,t){I(m(xr,t),e)},e.renderVennDiagramSkeleton=function(e,t){I(m(Or,t),e)},e.setElemIntersectionFactory=Oe,e.setElemOverlap=function(e,t,n){if(Ce(e)<Ce(t)||e instanceof Set)return Ne(e,n)(t);var r=Ne(t,n)(e);return Object.assign({},r,{setA:r.setB,setB:r.setA})},e.setElemOverlapFactory=Ne,e.setOverlap=function(e,t,n){if(Ce(e)<Ce(t)||e instanceof Set)return Ae(e,n)(t);var r=Ae(t,n)(e);return Object.assign({},r,{setA:r.setB,setB:r.setA})},e.setOverlapFactory=Ae,e.toDump=Lt,e.toIndicesArray=jt,e.toKey=ut,e.toStaticDump=Pt,e.toUpSetJSDump=function(e,t,n,r,o){return Sn(e,t,n,r,o)},e.toUpSetJSStaticDump=function(e,t,n,r){return En(e,t,n,r)},Object.defineProperty(e,"__esModule",{value:!0})}(t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(4);r.__exportStar(n(1),t),r.__exportStar(n(5),t)},function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",(function(){return o})),n.d(t,"__assign",(function(){return i})),n.d(t,"__rest",(function(){return a})),n.d(t,"__decorate",(function(){return s})),n.d(t,"__param",(function(){return l})),n.d(t,"__metadata",(function(){return c})),n.d(t,"__awaiter",(function(){return u})),n.d(t,"__generator",(function(){return f})),n.d(t,"__createBinding",(function(){return d})),n.d(t,"__exportStar",(function(){return m})),n.d(t,"__values",(function(){return y})),n.d(t,"__read",(function(){return p})),n.d(t,"__spread",(function(){return h})),n.d(t,"__spreadArrays",(function(){return x})),n.d(t,"__spreadArray",(function(){return g})),n.d(t,"__await",(function(){return v})),n.d(t,"__asyncGenerator",(function(){return b})),n.d(t,"__asyncDelegator",(function(){return _})),n.d(t,"__asyncValues",(function(){return w})),n.d(t,"__makeTemplateObject",(function(){return S})),n.d(t,"__importStar",(function(){return k})),n.d(t,"__importDefault",(function(){return M})),n.d(t,"__classPrivateFieldGet",(function(){return C})),n.d(t,"__classPrivateFieldSet",(function(){return A}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function s(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}function l(e,t){return function(n,r){t(n,r,e)}}function c(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))}function f(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}var d=Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]};function m(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||d(t,e,n)}function y(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function p(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function h(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e}function x(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r}function g(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e}function v(e){return this instanceof v?(this.v=e,this):new v(e)}function b(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),i=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){o[e]&&(r[e]=function(t){return new Promise((function(n,r){i.push([e,t,n,r])>1||s(e,t)}))})}function s(e,t){try{(n=o[e](t)).value instanceof v?Promise.resolve(n.value.v).then(l,c):u(i[0][2],n)}catch(e){u(i[0][3],e)}var n}function l(e){s("next",e)}function c(e){s("throw",e)}function u(e,t){e(t),i.shift(),i.length&&s(i[0][0],i[0][1])}}function _(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,o){t[r]=e[r]?function(t){return(n=!n)?{value:v(e[r](t)),done:"return"===r}:o?o(t):t}:o}}function w(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=y(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,o){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,o,(t=e[n](t)).done,t.value)}))}}}function S(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var E=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function k(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&d(t,e,n);return E(t,e),t}function M(e){return e&&e.__esModule?e:{default:e}}function C(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function A(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UpSetView=t.UpSetModel=void 0;const r=n(6),o=n(1),i=n(2),a=n(7),s=n(8),l=i.createVennJSAdapter(a.layout);class c extends r.DOMWidgetModel{defaults(){return Object.assign(Object.assign({},super.defaults()),{_model_name:c.model_name,_model_module:c.model_module,_model_module_version:c.model_module_version,_view_name:c.view_name,_view_module:c.view_module,_view_module_version:c.view_module_version})}}t.UpSetModel=c,c.serializers=Object.assign({},r.DOMWidgetModel.serializers),c.model_name="UpSetModel",c.model_module=o.MODULE_NAME,c.model_module_version=o.MODULE_VERSION,c.view_name="UpSetView",c.view_module=o.MODULE_NAME,c.view_module_version=o.MODULE_VERSION;class u extends r.DOMWidgetView{constructor(){super(...arguments),this.props={sets:[],width:300,height:300},this.elems=[],this.elemToIndex=new Map,this.attrs=[],this.changeSelection=e=>{if(this.model.off("change",this.changed_prop,null),e){const t={name:e.name,type:e.type,cardinality:e.cardinality,elems:e.elems.map(e=>this.elemToIndex.get(e))};"set"!==e.type&&(t.degree=e.degree,t.set_names=Array.from(e.sets).map(e=>e.name)),this.model.set("value",t)}else this.model.set("value",null);this.props.selection=e,this.renderImpl(),this.touch(),this.model.on("change",this.changed_prop,this)}}render(){this.model.on("change",this.changed_prop,this),this.updateProps(this.stateToProps())}stateToProps(){const e={},t=this.model.get_state(!0),n=e=>e.replace(/([-_]\w)/g,e=>e[1].toUpperCase());return Object.keys(t).forEach(r=>{let o=t[r];if(null==o||Array.isArray(o)&&0===o.length||r.startsWith("_")||"layout"===r)return;const i=(e=>"value"===e?"selection":n(e))(r);if("fontSizes"===i){const e={};Object.keys(o).forEach(t=>{const r=o[t];null!=r&&(e[n(t)]="number"==typeof r?r+"px":String(r))}),o=e}e[i]=o}),e}updateProps(e){e&&Object.assign(this.props,e),this.fixProps(e),this.renderImpl()}syncAddons(){if(0===this.attrs.length)return delete this.props.setAddons,void delete this.props.combinationAddons;const e=(e,t=!1)=>"number"===e.type?i.boxplotAddon(t=>t.attrs[e.name],{min:e.domain[0],max:e.domain[1]},{name:e.name,quantiles:"hinges",orient:t?"vertical":"horizontal"}):i.categoricalAddon(t=>t.attrs[e.name],{categories:e.categories},{name:e.name,orient:t?"vertical":"horizontal"});this.props.setAddons=this.attrs.map(t=>e(t,!1)),this.props.combinationAddons=this.attrs.map(t=>e(t,!0))}fixProps(e){var t,n,r;const o=this.props;if(e.elems)if(null!=e.elems){this.attrs=null!==(t=e.attrs)&&void 0!==t?t:this.attrs;const n=this.attrs.map(e=>e.elems?new Map(e.elems.map((e,t)=>[e,t])):null);this.elems=e.elems.map((e,t)=>{const r={};return this.attrs.forEach((o,i)=>{var a;return r[o.name]=o.values[n[i]&&null!==(a=n[i].get(e))&&void 0!==a?a:t]}),{name:e,attrs:r}}),this.elemToIndex.clear(),this.elems.forEach((e,t)=>this.elemToIndex.set(e,t)),this.syncAddons()}else if(null!=e.attrs){this.attrs=e.attrs;const t=this.attrs.map(e=>e.elems?new Map(e.elems.map((e,t)=>[e,t])):null);this.elems.forEach((e,n)=>{const r={};this.attrs.forEach((o,i)=>{var a;return r[o.name]=o.values[t[i]&&null!==(a=t[i].get(e.name))&&void 0!==a?a:n]}),e.attrs=r}),this.syncAddons()}if(delete this.props.elems,delete this.props.attrs,null!=e.sets&&(o.sets=s.fixSets(e.sets,this.elems)),null!=e.combinations)if(this.model.get("_expression_data")){const t=s.fromExpression(e.combinations);o.combinations=t.combinations,o.sets=t.sets}else{const t=s.fixCombinations(e.combinations,o.sets,this.elems);null==t?delete o.combinations:o.combinations=t}e.selection&&(o.selection=s.resolveSet(e.selection,null!==(n=o.sets)&&void 0!==n?n:[],null!==(r=o.combinations)&&void 0!==r?r:[],this.elems)),e.queries&&(o.queries=e.queries.map(e=>{var t,n;return i.isSetQuery(e)?Object.assign({},e,{set:s.resolveSet(e.set,null!==(t=o.sets)&&void 0!==t?t:[],null!==(n=o.combinations)&&void 0!==n?n:[],this.elems)}):i.isElemQuery(e)?Object.assign({},e,{elems:i.fromIndicesArray(e.elems,this.elems)}):e})),delete o.onHover,delete o.onClick,delete o.onContextMenu,"click"===this.model.get("mode")?o.onClick=this.changeSelection:"hover"===this.model.get("mode")?o.onHover=this.changeSelection:"contextMenu"===this.model.get("mode")&&(o.onContextMenu=this.changeSelection)}changed_prop(e){this.updateProps(e.changed)}renderImpl(){const e=this.el.getBoundingClientRect(),t=Object.assign({},this.props),n=this.model.get("_render_mode"),r=()=>{"venn"===n?(delete t.layout,i.renderVennDiagram(this.el,t)):"euler"===n?(t.layout=l,i.renderVennDiagram(this.el,t)):"kmap"===n?i.renderKarnaughMap(this.el,t):i.render(this.el,t)};e.width&&e.height?(t.width=e.width,t.height=e.height,r()):requestAnimationFrame(()=>{const e=this.el.getBoundingClientRect();t.width=e.width||600,t.height=e.height||400,r()})}}t.UpSetView=u},function(t,n){t.exports=e},function(e,t,n){"use strict";n.r(t),n.d(t,"VennDiagram",(function(){return S})),n.d(t,"bestInitialLayout",(function(){return d})),n.d(t,"circleArea",(function(){return i})),n.d(t,"circleCircleIntersection",(function(){return l})),n.d(t,"circleFromPath",(function(){return j})),n.d(t,"circleOverlap",(function(){return s})),n.d(t,"circlePath",(function(){return O})),n.d(t,"computeTextCentre",(function(){return M})),n.d(t,"computeTextCentres",(function(){return A})),n.d(t,"disjointCluster",(function(){return x})),n.d(t,"distance",(function(){return a})),n.d(t,"distanceFromIntersectArea",(function(){return f})),n.d(t,"greedyLayout",(function(){return m})),n.d(t,"intersectionArea",(function(){return o})),n.d(t,"intersectionAreaPath",(function(){return L})),n.d(t,"layout",(function(){return T})),n.d(t,"logRatioLossFunction",(function(){return p})),n.d(t,"lossFunction",(function(){return y})),n.d(t,"normalizeSolution",(function(){return v})),n.d(t,"scaleSolution",(function(){return b})),n.d(t,"sortAreas",(function(){return N})),n.d(t,"venn",(function(){return u})),n.d(t,"wrapText",(function(){return E}));var r=n(0);function o(e,t){const n=function(e){const t=[];for(let n=0;n<e.length;++n)for(let r=n+1;r<e.length;++r){const o=l(e[n],e[r]);for(const e of o)e.parentIndex=[n,r],t.push(e)}return t}(e),r=n.filter(t=>function(e,t){return t.every(t=>a(e,t)<t.radius+1e-10)}(t,e));let o=0,s=0;const u=[];if(r.length>1){const t=c(r);for(let e=0;e<r.length;++e){const n=r[e];n.angle=Math.atan2(n.x-t.x,n.y-t.y)}r.sort((e,t)=>t.angle-e.angle);let n=r[r.length-1];for(let t=0;t<r.length;++t){const l=r[t];s+=(n.x+l.x)*(l.y-n.y);const c={x:(l.x+n.x)/2,y:(l.y+n.y)/2};let f=null;for(let t=0;t<l.parentIndex.length;++t)if(n.parentIndex.includes(l.parentIndex[t])){const r=e[l.parentIndex[t]],o=Math.atan2(l.x-r.x,l.y-r.y),i=Math.atan2(n.x-r.x,n.y-r.y);let s=i-o;s<0&&(s+=2*Math.PI);const u=i-s/2;let d=a(c,{x:r.x+r.radius*Math.sin(u),y:r.y+r.radius*Math.cos(u)});d>2*r.radius&&(d=2*r.radius),(null==f||f.width>d)&&(f={circle:r,width:d,p1:l,p2:n,large:d>r.radius,sweep:!0})}null!=f&&(u.push(f),o+=i(f.circle.radius,f.width),n=l)}}else{let t=e[0];for(let n=1;n<e.length;++n)e[n].radius<t.radius&&(t=e[n]);let n=!1;for(let r=0;r<e.length;++r)if(a(e[r],t)>Math.abs(t.radius-e[r].radius)){n=!0;break}n?o=s=0:(o=t.radius*t.radius*Math.PI,u.push({circle:t,p1:{x:t.x,y:t.y+t.radius},p2:{x:t.x-1e-10,y:t.y+t.radius},width:2*t.radius,large:!0,sweep:!0}))}return s/=2,t&&(t.area=o+s,t.arcArea=o,t.polygonArea=s,t.arcs=u,t.innerPoints=r,t.intersectionPoints=n),o+s}function i(e,t){return e*e*Math.acos(1-t/e)-(e-t)*Math.sqrt(t*(2*e-t))}function a(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))}function s(e,t,n){if(n>=e+t)return 0;if(n<=Math.abs(e-t))return Math.PI*Math.min(e,t)*Math.min(e,t);const r=t-(n*n-e*e+t*t)/(2*n);return i(e,e-(n*n-t*t+e*e)/(2*n))+i(t,r)}function l(e,t){const n=a(e,t),r=e.radius,o=t.radius;if(n>=r+o||n<=Math.abs(r-o))return[];const i=(r*r-o*o+n*n)/(2*n),s=Math.sqrt(r*r-i*i),l=e.x+i*(t.x-e.x)/n,c=e.y+i*(t.y-e.y)/n,u=-(t.y-e.y)*(s/n),f=-(t.x-e.x)*(s/n);return[{x:l+u,y:c-f},{x:l-u,y:c+f}]}function c(e){const t={x:0,y:0};for(const n of e)t.x+=n.x,t.y+=n.y;return t.x/=e.length,t.y/=e.length,t}function u(e,t={}){t.maxIterations=t.maxIterations||500;const n=t.initialLayout||d,o=t.lossFunction||y,i=function(e,t={}){const n=t.distinct,r=e.map(e=>Object.assign({},e));function o(e){return e.join(";")}if(n){const e=new Map;for(const t of r)for(let n=0;n<t.sets.length;n++){const r=String(t.sets[n]);e.set(r,t.size+(e.get(r)||0));for(let o=n+1;o<t.sets.length;o++){const n=String(t.sets[o]),i=`${r};${n}`,a=`${n};${r}`;e.set(i,t.size+(e.get(i)||0)),e.set(a,t.size+(e.get(a)||0))}}for(const t of r)t.sets.length<3&&(t.size=e.get(o(t.sets)))}const i=[],a=new Set;for(const e of r)if(1===e.sets.length)i.push(e.sets[0]);else if(2===e.sets.length){const t=e.sets[0],n=e.sets[1];a.add(o(e.sets)),a.add(o([n,t]))}i.sort((e,t)=>e===t?0:e<t?-1:1);for(let e=0;e<i.length;++e){const t=i[e];for(let n=e+1;n<i.length;++n){const e=i[n];a.has(o([t,e]))||r.push({sets:[t,e],size:0})}}return r}(e,t),a=n(i,t),s=Object.keys(a),l=[];for(const e of s)l.push(a[e].x),l.push(a[e].y);const c=Object(r.nelderMead)(e=>{const t={};for(let n=0;n<s.length;++n){const r=s[n];t[r]={x:e[2*n],y:e[2*n+1],radius:a[r].radius}}return o(t,i)},l,t).x;for(let e=0;e<s.length;++e){const t=s[e];a[t].x=c[2*e],a[t].y=c[2*e+1]}return a}function f(e,t,n){return Math.min(e,t)*Math.min(e,t)*Math.PI<=n+1e-10?Math.abs(e-t):Object(r.bisect)(r=>s(e,t,r)-n,0,e+t)}function d(e,t={}){let n=m(e,t);const o=t.lossFunction||y;if(e.length>=8){const i=function(e,t={}){const n=t.restarts||10,o=[],i={};for(const t of e)1===t.sets.length&&(i[t.sets[0]]=o.length,o.push(t));let{distances:a,constraints:s}=function(e,t,n){const o=Object(r.zerosM)(t.length,t.length),i=Object(r.zerosM)(t.length,t.length);return e.filter(e=>2===e.sets.length).forEach(e=>{const r=n[e.sets[0]],a=n[e.sets[1]],s=f(Math.sqrt(t[r].size/Math.PI),Math.sqrt(t[a].size/Math.PI),e.size);o[r][a]=o[a][r]=s;let l=0;e.size+1e-10>=Math.min(t[r].size,t[a].size)?l=1:e.size<=1e-10&&(l=-1),i[r][a]=i[a][r]=l}),{distances:o,constraints:i}}(e,o,i);const l=Object(r.norm2)(a.map(r.norm2))/a.length;a=a.map(e=>e.map(e=>e/l));const c=(e,t)=>function(e,t,n,r){for(let e=0;e<t.length;++e)t[e]=0;let o=0;for(let i=0;i<n.length;++i){const a=e[2*i],s=e[2*i+1];for(let l=i+1;l<n.length;++l){const c=e[2*l],u=e[2*l+1],f=n[i][l],d=r[i][l],m=(c-a)*(c-a)+(u-s)*(u-s),y=Math.sqrt(m),p=m-f*f;d>0&&y<=f||d<0&&y>=f||(o+=2*p*p,t[2*i]+=4*p*(a-c),t[2*i+1]+=4*p*(s-u),t[2*l]+=4*p*(c-a),t[2*l+1]+=4*p*(u-s))}}return o}(e,t,a,s);let u=null;for(let e=0;e<n;++e){const e=Object(r.zeros)(2*a.length).map(Math.random),n=Object(r.conjugateGradient)(c,e,t);(!u||n.fx<u.fx)&&(u=n)}const d=u.x,m={};for(let e=0;e<o.length;++e){const t=o[e];m[t.sets[0]]={x:d[2*e]*l,y:d[2*e+1]*l,radius:Math.sqrt(t.size/Math.PI)}}if(t.history)for(const e of t.history)Object(r.scale)(e.x,l);return m}(e,t);o(i,e)+1e-8<o(n,e)&&(n=i)}return n}function m(e,t){const n=t&&t.lossFunction?t.lossFunction:y,r={},o={};for(const t of e)if(1===t.sets.length){const e=t.sets[0];r[e]={x:1e10,y:1e10,rowid:r.length,size:t.size,radius:Math.sqrt(t.size/Math.PI)},o[e]=[]}e=e.filter(e=>2===e.sets.length);for(const t of e){let e=null!=t.weight?t.weight:1;const n=t.sets[0],i=t.sets[1];t.size+1e-10>=Math.min(r[n].size,r[i].size)&&(e=0),o[n].push({set:i,size:t.size,weight:e}),o[i].push({set:n,size:t.size,weight:e})}const i=[];function a(e,t){return t.size-e.size}Object.keys(o).forEach(e=>{let t=0;for(let n=0;n<o[e].length;++n)t+=o[e][n].size*o[e][n].weight;i.push({set:e,size:t})}),i.sort(a);const s={};function c(e){return e.set in s}function u(e,t){r[t].x=e.x,r[t].y=e.y,s[t]=!0}u({x:0,y:0},i[0].set);for(let t=1;t<i.length;++t){const s=i[t].set,m=o[s].filter(c),y=r[s];if(m.sort(a),0===m.length)throw"ERROR: missing pairwise overlap information";const p=[];for(var d=0;d<m.length;++d){const e=r[m[d].set],t=f(y.radius,e.radius,m[d].size);p.push({x:e.x+t,y:e.y}),p.push({x:e.x-t,y:e.y}),p.push({y:e.y+t,x:e.x}),p.push({y:e.y-t,x:e.x});for(let n=d+1;n<m.length;++n){const o=r[m[n].set],i=f(y.radius,o.radius,m[n].size),a=l({x:e.x,y:e.y,radius:t},{x:o.x,y:o.y,radius:i});p.push(...a)}}let h=1e50,x=p[0];for(const t of p){r[s].x=t.x,r[s].y=t.y;const o=n(r,e);o<h&&(h=o,x=t)}u(x,s)}return r}function y(e,t){let n=0;for(const r of t){if(1===r.sets.length)continue;let t;if(2===r.sets.length){const n=e[r.sets[0]],o=e[r.sets[1]];t=s(n.radius,o.radius,a(n,o))}else t=o(r.sets.map(t=>e[t]));n+=(null!=r.weight?r.weight:1)*(t-r.size)*(t-r.size)}return n}function p(e,t){let n=0;for(const r of t){if(1===r.sets.length)continue;let t;if(2===r.sets.length){const n=e[r.sets[0]],o=e[r.sets[1]];t=s(n.radius,o.radius,a(n,o))}else t=o(r.sets.map(t=>e[t]));const i=null!=r.weight?r.weight:1,l=Math.log((t+1)/(r.size+1));n+=i*l*l}return n}function h(e,t,n){if(null==n?e.sort((e,t)=>t.radius-e.radius):e.sort(n),e.length>0){const t=e[0].x,n=e[0].y;for(const r of e)r.x-=t,r.y-=n}if(2===e.length){a(e[0],e[1])<Math.abs(e[1].radius-e[0].radius)&&(e[1].x=e[0].x+e[0].radius-e[1].radius-1e-10,e[1].y=e[0].y)}if(e.length>1){const n=Math.atan2(e[1].x,e[1].y)-t,r=Math.cos(n),o=Math.sin(n);for(const t of e){const e=t.x,n=t.y;t.x=r*e-o*n,t.y=o*e+r*n}}if(e.length>2){let n=Math.atan2(e[2].x,e[2].y)-t;for(;n<0;)n+=2*Math.PI;for(;n>2*Math.PI;)n-=2*Math.PI;if(n>Math.PI){const t=e[1].y/(1e-10+e[1].x);for(const n of e){var r=(n.x+t*n.y)/(1+t*t);n.x=2*r-n.x,n.y=2*r*t-n.y}}}}function x(e){function t(e){return e.parent!==e&&(e.parent=t(e.parent)),e.parent}function n(e,n){const r=t(e),o=t(n);r.parent=o}e.forEach(e=>{e.parent=e});for(let t=0;t<e.length;++t)for(let r=t+1;r<e.length;++r){const o=e[t].radius+e[r].radius;a(e[t],e[r])+1e-10<o&&n(e[r],e[t])}const r=new Map;for(let n=0;n<e.length;++n){const o=t(e[n]).parent.setid;r.has(o)||r.set(o,[]),r.get(o).push(e[n])}return e.forEach(e=>{delete e.parent}),Array.from(r.values())}function g(e){const t=t=>({max:e.reduce((e,n)=>Math.max(e,n[t]+n.radius),Number.NEGATIVE_INFINITY),min:e.reduce((e,n)=>Math.min(e,n[t]-n.radius),Number.POSITIVE_INFINITY)});return{xRange:t("x"),yRange:t("y")}}function v(e,t,n){null==t&&(t=Math.PI/2);let r=w(e).map(e=>Object.assign({},e));const o=x(r);for(const e of o){h(e,t,n);const r=g(e);e.size=(r.xRange.max-r.xRange.min)*(r.yRange.max-r.yRange.min),e.bounds=r}o.sort((e,t)=>t.size-e.size),r=o[0];let i=r.bounds;const a=(i.xRange.max-i.xRange.min)/50;function s(e,t,n){if(!e)return;const o=e.bounds;let s,l;if(t)s=i.xRange.max-o.xRange.min+a;else{s=i.xRange.max-o.xRange.max;const e=(o.xRange.max-o.xRange.min)/2-(i.xRange.max-i.xRange.min)/2;e<0&&(s+=e)}if(n)l=i.yRange.max-o.yRange.min+a;else{l=i.yRange.max-o.yRange.max;const e=(o.yRange.max-o.yRange.min)/2-(i.yRange.max-i.yRange.min)/2;e<0&&(l+=e)}for(const t of e)t.x+=s,t.y+=l,r.push(t)}let l=1;for(;l<o.length;)s(o[l],!0,!1),s(o[l+1],!1,!0),s(o[l+2],!0,!0),l+=3,i=g(r);return _(r)}function b(e,t,n,r,o){const i=w(e);t-=2*r,n-=2*r;const{xRange:a,yRange:s}=g(i);if(a.max===a.min||s.max===s.min)return console.log("not scaling solution: zero size detected"),e;let l,c;if(o){const e=2*Math.sqrt(o/Math.PI);l=t/e,c=n/e}else l=t/(a.max-a.min),c=n/(s.max-s.min);const u=Math.min(c,l),f=(t-(a.max-a.min)*u)/2,d=(n-(s.max-s.min)*u)/2;return _(i.map(e=>({radius:u*e.radius,x:r+f+(e.x-a.min)*u,y:r+d+(e.y-s.min)*u,setid:e.setid})))}function _(e){const t={};for(const n of e)t[n.setid]=n;return t}function w(e){return Object.keys(e).map(t=>Object.assign(e[t],{setid:t}))}function S(e={}){let t=!1,n=600,r=350,o=15,i=1e3,a=Math.PI/2,s=!0,l=null,c=!0,f=!0,d=null,m=null,h=!1,x=null,g=!(!e||!e.symmetricalTextCentre)&&e.symmetricalTextCentre,_={},w=e&&e.colourScheme?e.colourScheme:e&&e.colorScheme?e.colorScheme:["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],S=0,k=function(e){if(e in _)return _[e];var t=_[e]=w[S];return S+=1,S>=w.length&&(S=0),t},M=u,C=y;function N(u){let y=u.datum();const p=new Set;y.forEach(e=>{0==e.size&&1==e.sets.length&&p.add(e.sets[0])}),y=y.filter(e=>!e.sets.some(e=>p.has(e)));let _={},w={};if(y.length>0){let e=M(y,{lossFunction:C,distinct:h});s&&(e=v(e,a,m)),_=b(e,n,r,o,l),w=A(_,y,g)}const S={};function N(e){return e.sets in S?S[e.sets]:1==e.sets.length?""+e.sets[0]:void 0}y.forEach(e=>{e.label&&(S[e.sets]=e.label)}),u.selectAll("svg").data([_]).enter().append("svg");const O=u.select("svg");t?O.attr("viewBox",`0 0 ${n} ${r}`):O.attr("width",n).attr("height",r);const I={};let z=!1;function T(e){return t=>L(e.sets.map(e=>{let o=I[e],i=_[e];return o||(o={x:n/2,y:r/2,radius:1}),i||(i={x:n/2,y:r/2,radius:1}),{x:o.x*(1-t)+i.x*t,y:o.y*(1-t)+i.y*t,radius:o.radius*(1-t)+i.radius*t}}),x)}O.selectAll(".venn-area path").each((function(e){const t=this.getAttribute("d");1==e.sets.length&&t&&!h&&(z=!0,I[e.sets[0]]=j(t))}));const P=O.selectAll(".venn-area").data(y,e=>e.sets),q=P.enter().append("g").attr("class",e=>`venn-area venn-${1==e.sets.length?"circle":"intersection"}${e.colour||e.color?" venn-coloured":""}`).attr("data-venn-sets",e=>e.sets.join("_")),F=q.append("path"),R=q.append("text").attr("class","label").text(e=>N(e)).attr("text-anchor","middle").attr("dy",".35em").attr("x",n/2).attr("y",r/2);function H(e){return"function"==typeof e.transition?e.transition("venn").duration(i):e}f&&(F.style("fill-opacity","0").filter(e=>1==e.sets.length).style("fill",e=>e.colour?e.colour:e.color?e.color:k(e.sets)).style("fill-opacity",".25"),R.style("fill",t=>t.colour||t.color?"#FFF":e.textFill?e.textFill:1==t.sets.length?k(t.sets):"#444"));let B=u;z?(B=H(u),B.selectAll("path").attrTween("d",T)):B.selectAll("path").attr("d",e=>L(e.sets.map(e=>_[e])),x);const U=B.selectAll("text").filter(e=>e.sets in w).text(e=>N(e)).attr("x",e=>Math.floor(w[e.sets].x)).attr("y",e=>Math.floor(w[e.sets].y));c&&(z?"on"in U?U.on("end",E(_,N)):U.each("end",E(_,N)):U.each(E(_,N)));const D=H(P.exit()).remove();D.selectAll("path").attrTween("d",T);const K=D.selectAll("text").attr("x",n/2).attr("y",r/2);return null!==d&&(R.style("font-size","0px"),U.style("font-size",d),K.style("font-size","0px")),{circles:_,textCentres:w,nodes:P,enter:q,update:B,exit:D}}return N.wrap=function(e){return arguments.length?(c=e,N):c},N.useViewBox=function(){return t=!0,N},N.width=function(e){return arguments.length?(n=e,N):n},N.height=function(e){return arguments.length?(r=e,N):r},N.padding=function(e){return arguments.length?(o=e,N):o},N.distinct=function(e){return arguments.length?(h=e,N):h},N.colours=function(e){return arguments.length?(k=e,N):k},N.colors=function(e){return arguments.length?(k=e,N):colors},N.fontSize=function(e){return arguments.length?(d=e,N):d},N.round=function(e){return arguments.length?(x=e,N):x},N.duration=function(e){return arguments.length?(i=e,N):i},N.layoutFunction=function(e){return arguments.length?(M=e,N):M},N.normalize=function(e){return arguments.length?(s=e,N):s},N.scaleToFit=function(e){return arguments.length?(l=e,N):l},N.styled=function(e){return arguments.length?(f=e,N):f},N.orientation=function(e){return arguments.length?(a=e,N):a},N.orientationOrder=function(e){return arguments.length?(m=e,N):m},N.lossFunction=function(e){return arguments.length?(C="default"===e?y:"logRatio"===e?p:e,N):C},N}function E(e,t){return function(n){const r=this,o=e[n.sets[0]].radius||50,i=t(n)||"",a=i.split(/\s+/).reverse(),s=(i.length+a.length)/3;let l=a.pop(),c=[l],u=0;r.textContent=null;const f=[];function d(e){const t=r.ownerDocument.createElementNS(r.namespaceURI,"tspan");return t.textContent=e,f.push(t),r.append(t),t}let m=d(l);for(;l=a.pop(),l;){c.push(l);const e=c.join(" ");m.textContent=e,e.length>s&&m.getComputedTextLength()>o&&(c.pop(),m.textContent=c.join(" "),c=[l],m=d(l),u++)}const y=.35-1.1*u/2,p=r.getAttribute("x"),h=r.getAttribute("y");f.forEach((e,t)=>{e.setAttribute("x",p),e.setAttribute("y",h),e.setAttribute("dy",y+1.1*t+"em")})}}function k(e,t,n){let r=t[0].radius-a(t[0],e);for(let n=1;n<t.length;++n){const o=t[n].radius-a(t[n],e);o<=r&&(r=o)}for(let t=0;t<n.length;++t){const o=a(n[t],e)-n[t].radius;o<=r&&(r=o)}return r}function M(e,t,n){const i=[];for(const t of e)i.push({x:t.x,y:t.y}),i.push({x:t.x+t.radius/2,y:t.y}),i.push({x:t.x-t.radius/2,y:t.y}),i.push({x:t.x,y:t.y+t.radius/2}),i.push({x:t.x,y:t.y-t.radius/2});let s=i[0],l=k(i[0],e,t);for(let n=1;n<i.length;++n){const r=k(i[n],e,t);r>=l&&(s=i[n],l=r)}const u=Object(r.nelderMead)(n=>-1*k({x:n[0],y:n[1]},e,t),[s.x,s.y],{maxIterations:500,minErrorDelta:1e-10}).x,f={x:n?0:u[0],y:u[1]};let d=!0;for(const t of e)if(a(f,t)>t.radius){d=!1;break}for(const e of t)if(a(f,e)<e.radius){d=!1;break}if(d)return f;if(1==e.length)return{x:e[0].x,y:e[0].y};const m={};return o(e,m),0===m.arcs.length?{x:0,y:-1e3,disjoint:!0}:1==m.arcs.length?{x:m.arcs[0].circle.x,y:m.arcs[0].circle.y}:t.length?M(e,[]):c(m.arcs.map(e=>e.p1))}function C(e){const t={},n=Object.keys(e);for(const e of n)t[e]=[];for(let r=0;r<n.length;r++){const o=n[r],i=e[o];for(let s=r+1;s<n.length;++s){const r=n[s],l=e[r],c=a(i,l);c+l.radius<=i.radius+1e-10?t[r].push(o):c+i.radius<=l.radius+1e-10&&t[o].push(r)}}return t}function A(e,t,n){const r={},o=C(e);for(let i=0;i<t.length;++i){const a=t[i].sets,s={},l={};for(let e=0;e<a.length;++e){s[a[e]]=!0;const t=o[a[e]];for(let e=0;e<t.length;++e)l[t[e]]=!0}const c=[],u=[];for(let t in e)t in s?c.push(e[t]):t in l||u.push(e[t]);const f=M(c,u,n);r[a]=f,f.disjoint&&t[i].size>0&&console.log("WARNING: area "+a+" not represented on screen")}return r}function N(e,t){const n=C(e.selectAll("svg").datum()),r=new Set;for(const e of t.sets)for(let t in n){const o=n[t];for(let n=0;n<o.length;++n)if(o[n]==e){r.add(t);break}}function o(e){return e.every(e=>!r.has(e))}e.selectAll("g").sort((e,n)=>e.sets.length!=n.sets.length?e.sets.length-n.sets.length:e==t?o(n.sets)?-1:1:n==t?o(e.sets)?1:-1:n.size-e.size)}function O(e,t,n){const r=[];return r.push("\nM",e,t),r.push("\nm",-n,0),r.push("\na",n,n,0,1,0,2*n,0),r.push("\na",n,n,0,1,0,2*-n,0),r.join(" ")}function j(e){const t=e.split(" ");return{x:Number.parseFloat(t[1]),y:Number.parseFloat(t[2]),radius:-Number.parseFloat(t[4])}}function I(e){if(0===e.length)return[];const t={};return o(e,t),t.arcs}function z(e,t){if(0===e.length)return"M 0 0";const n=Math.pow(10,t||0),r=null!=t?e=>Math.round(e*n)/n:e=>e;if(1==e.length){const t=e[0].circle;return O(r(t.x),r(t.y),r(t.radius))}const o=["\nM",r(e[0].p2.x),r(e[0].p2.y)];for(const t of e){const e=r(t.circle.radius);o.push("\nA",e,e,0,t.large?1:0,t.sweep?1:0,r(t.p1.x),r(t.p1.y))}return o.join(" ")}function L(e,t){return z(I(e),t)}function T(e,t={}){const{lossFunction:n,layoutFunction:r=u,normalize:o=!0,orientation:i=Math.PI/2,orientationOrder:a,width:s=600,height:l=350,padding:c=15,scaleToFit:f=!1,symmetricalTextCentre:d=!1,distinct:m,round:h=2}=t;let x=r(e,{lossFunction:"default"!==n&&n?"logRatio"===n?p:n:y,distinct:m});o&&(x=v(x,i,a));const g=b(x,s,l,c,f),_=A(g,e,d),w=new Map(Object.keys(g).map(e=>[e,{set:e,x:g[e].x,y:g[e].y,radius:g[e].radius}])),S=e.map(e=>{const t=e.sets.map(e=>w.get(e)),n=I(t);return{circles:t,arcs:n,path:z(n,h),area:e,has:new Set(e.sets)}});function E(e){let t="";for(const n of S)n.has.size>e.length&&e.every(e=>n.has.has(e))&&(t+=" "+n.path);return t}return S.map(({circles:e,arcs:t,path:n,area:r})=>({data:r,text:_[r.sets],circles:e,arcs:t,path:n,distinctPath:n+E(r.sets)}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolveSet=t.fixCombinations=t.fromExpression=t.fixSets=void 0;const r=n(2);t.fixSets=function(e,t){return e?r.asSets(e.map(e=>Object.assign({},e,{elems:r.fromIndicesArray(e.elems,t)}))):[]},t.fromExpression=function(e){const t=e[0].type;return r.extractFromExpression(e.map(e=>({name:e.name,set_names:e.set_names,cardinality:e.cardinality})),e=>e.set_names,{type:t})},t.fixCombinations=function(e,t,n){if(!e)return null;if(!Array.isArray(e))return r.generateCombinations(t,Object.assign({elems:n},e));const o=new Map(t.map(e=>[e.name,e]));return r.asCombinations(e.map(e=>Object.assign({},e,{elems:r.fromIndicesArray(e.elems,n)})),"composite",e=>e.set_names.map(e=>o.get(e)).filter(Boolean))},t.resolveSet=function(e,t,n,r){if(Array.isArray(e))return e.map(e=>r[e]);const o=e;if(!o.type||"set"===o.type){const e=t.find(e=>e.name===o.name);if(e)return e}return n.find(e=>e.name===o.name)}}])}));
//# sourceMappingURL=embed-bundle.js.map