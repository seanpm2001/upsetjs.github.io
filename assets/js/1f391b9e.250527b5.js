/*! For license information please see 1f391b9e.250527b5.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{172:function(e,t,n){"use strict";var r=n(0),a=n.n(r),s=n(118);var o=function(e,t,n){const[a,s]=Object(r.useState)(void 0);Object(r.useEffect)((()=>{function r(){const r=function(){const e=Array.from(document.getElementsByClassName("anchor")),t=e.find((e=>{const{top:t}=e.getBoundingClientRect();return t>=n}));if(t){if(t.getBoundingClientRect().top>=n){const n=e[e.indexOf(t)-1];return null!=n?n:t}return t}return e[e.length-1]}();if(r){let n=0,o=!1;const l=document.getElementsByClassName(e);for(;n<l.length&&!o;){const e=l[n],{href:i}=e,c=decodeURIComponent(i.substring(i.indexOf("#")+1));r.id===c&&(a&&a.classList.remove(t),e.classList.add(t),s(e),o=!0),n+=1}}}return document.addEventListener("scroll",r),document.addEventListener("resize",r),r(),()=>{document.removeEventListener("scroll",r),document.removeEventListener("resize",r)}}))},l=n(55),i=n.n(l);const c="table-of-contents__link";function u({toc:e,isChild:t}){return e.length?a.a.createElement("ul",{className:t?"":"table-of-contents table-of-contents__left-border"},e.map((e=>a.a.createElement("li",{key:e.id},a.a.createElement("a",{href:`#${e.id}`,className:c,dangerouslySetInnerHTML:{__html:e.value}}),a.a.createElement(u,{isChild:!0,toc:e.children}))))):null}t.a=function({toc:e}){return o(c,"table-of-contents__link--active",100),a.a.createElement("div",{className:Object(s.a)(i.a.tableOfContents,"thin-scrollbar")},a.a.createElement(u,{toc:e}))}},202:function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"asCombination",(function(){return I})),n.d(r,"asCombinations",(function(){return _})),n.d(r,"asSet",(function(){return U})),n.d(r,"asSets",(function(){return Q})),n.d(r,"bandScale",(function(){return ae})),n.d(r,"extractFromExpression",(function(){return ne})),n.d(r,"extractSets",(function(){return re})),n.d(r,"fromDump",(function(){return $e})),n.d(r,"fromIndicesArray",(function(){return be})),n.d(r,"fromSetName",(function(){return q})),n.d(r,"fromStaticDump",(function(){return Ne})),n.d(r,"generateCombinations",(function(){return W})),n.d(r,"isCalcQuery",(function(){return g})),n.d(r,"isElemQuery",(function(){return h})),n.d(r,"isGenerateSetCombinationOptions",(function(){return k})),n.d(r,"isSet",(function(){return w})),n.d(r,"isSetCombination",(function(){return S})),n.d(r,"isSetLike",(function(){return E})),n.d(r,"isSetQuery",(function(){return x})),n.d(r,"isUpSetQuery",(function(){return C})),n.d(r,"linearScale",(function(){return me})),n.d(r,"logScale",(function(){return ge})),n.d(r,"mergeColors",(function(){return F})),n.d(r,"parseColor",(function(){return B})),n.d(r,"queryElemOverlap",(function(){return v})),n.d(r,"queryOverlap",(function(){return b})),n.d(r,"setElemIntersectionFactory",(function(){return p})),n.d(r,"setElemOverlap",(function(){return f})),n.d(r,"setElemOverlapFactory",(function(){return y})),n.d(r,"setOverlap",(function(){return m})),n.d(r,"setOverlapFactory",(function(){return d})),n.d(r,"toDump",(function(){return we})),n.d(r,"toIndicesArray",(function(){return xe})),n.d(r,"toKey",(function(){return G})),n.d(r,"toStaticDump",(function(){return Ce}));var a={};n.r(a),n.d(a,"asCombination",(function(){return I})),n.d(a,"asCombinations",(function(){return _})),n.d(a,"asSet",(function(){return U})),n.d(a,"asSets",(function(){return Q})),n.d(a,"bandScale",(function(){return ae})),n.d(a,"extractFromExpression",(function(){return ne})),n.d(a,"extractSets",(function(){return re})),n.d(a,"fromDump",(function(){return $e})),n.d(a,"fromIndicesArray",(function(){return be})),n.d(a,"fromSetName",(function(){return q})),n.d(a,"fromStaticDump",(function(){return Ne})),n.d(a,"generateCombinations",(function(){return W})),n.d(a,"isCalcQuery",(function(){return g})),n.d(a,"isElemQuery",(function(){return h})),n.d(a,"isGenerateSetCombinationOptions",(function(){return k})),n.d(a,"isSet",(function(){return w})),n.d(a,"isSetCombination",(function(){return S})),n.d(a,"isSetLike",(function(){return E})),n.d(a,"isSetQuery",(function(){return x})),n.d(a,"isUpSetQuery",(function(){return C})),n.d(a,"linearScale",(function(){return me})),n.d(a,"logScale",(function(){return ge})),n.d(a,"mergeColors",(function(){return F})),n.d(a,"parseColor",(function(){return B})),n.d(a,"queryElemOverlap",(function(){return v})),n.d(a,"queryOverlap",(function(){return b})),n.d(a,"setElemIntersectionFactory",(function(){return p})),n.d(a,"setElemOverlap",(function(){return f})),n.d(a,"setElemOverlapFactory",(function(){return y})),n.d(a,"setOverlap",(function(){return m})),n.d(a,"setOverlapFactory",(function(){return d})),n.d(a,"toDump",(function(){return we})),n.d(a,"toIndicesArray",(function(){return xe})),n.d(a,"toKey",(function(){return G})),n.d(a,"toStaticDump",(function(){return Ce})),n.d(a,"default",(function(){return Kn})),n.d(a,"KarnaughMap",(function(){return Mn})),n.d(a,"KarnaughMapSkeleton",(function(){return In})),n.d(a,"UpSetJS",(function(){return un})),n.d(a,"UpSetJSSkeleton",(function(){return qn})),n.d(a,"VennDiagram",(function(){return gn})),n.d(a,"VennDiagramSkeleton",(function(){return zn})),n.d(a,"createVennJSAdapter",(function(){return Bn})),n.d(a,"downloadUrl",(function(){return pt})),n.d(a,"exportSVG",(function(){return ft})),n.d(a,"exportVegaLite",(function(){return ht})),n.d(a,"fillDefaults",(function(){return it})),n.d(a,"fillDefaultsG",(function(){return ot})),n.d(a,"fillKarnaughMapDefaults",(function(){return mt})),n.d(a,"fillKarnaughMapDefaultsG",(function(){return dt})),n.d(a,"fillVennDiagramDefaults",(function(){return ut})),n.d(a,"fillVennDiagramDefaultsG",(function(){return ct})),n.d(a,"getDefaultTheme",(function(){return at})),n.d(a,"isEllipse",(function(){return Ze})),n.d(a,"propValidators",(function(){return Fn})),n.d(a,"toUpSetJSDump",(function(){return bt})),n.d(a,"toUpSetJSStaticDump",(function(){return vt}));var s={};n.r(s),n.d(s,"BarChart",(function(){return sr})),n.d(s,"Histogram",(function(){return gr})),n.d(s,"PieChart",(function(){return br})),n.d(s,"Scatterplot",(function(){return pr})),n.d(s,"createAggregatedGroupSetComposite",(function(){return mr})),n.d(s,"createIntervalSetComposite",(function(){return ir})),n.d(s,"createSetComposite",(function(){return tr})),n.d(s,"fillDefaults",(function(){return Wn})),n.d(s,"isAggregatedGroupSetComposite",(function(){return dr})),n.d(s,"isIntervalSetComposite",(function(){return or})),n.d(s,"useVegaAggregatedGroupSelection",(function(){return yr})),n.d(s,"useVegaBinSelection",(function(){return fr})),n.d(s,"useVegaIntervalSelection",(function(){return ur})),n.d(s,"useVegaMultiSelection",(function(){return ar}));var o={};n.r(o),n.d(o,"Boxplot",(function(){return jr})),n.d(o,"Categorical",(function(){return Br})),n.d(o,"boxplotAddon",(function(){return zr})),n.d(o,"boxplotAggregatedAddon",(function(){return Ir})),n.d(o,"categoricalAddon",(function(){return Pr})),n.d(o,"categoricalAggregatedAddon",(function(){return Rr})),n.d(o,"simpleScale",(function(){return Nr}));var l={};n.r(l),n.d(l,"elems",(function(){return Dr})),n.d(l,"sets",(function(){return Wr})),n.d(l,"queries",(function(){return Ur})),n.d(l,"colors",(function(){return Vr}));var i=n(0),c=n.n(i);function u(e){return e instanceof Set?e.size:e.length}function d(e,t){const n=t?new Set((e instanceof Set?Array.from(e):e).map(t)):e instanceof Set?e:new Set(e),r=n.size,a={setA:r,setB:r,union:r,intersection:r};return s=>{if(s===e)return a;let o=0;s.forEach((e=>{(t&&n.has(t(e))||!t&&n.has(e))&&o++}));const l=u(s);return{setA:r,setB:l,intersection:o,union:r+l-o}}}function m(e,t,n){if(u(e)<u(t)||e instanceof Set)return d(e,n)(t);const r=d(t,n)(e);return Object.assign({},r,{setA:r.setB,setB:r.setA})}function y(e,t){const n=t?new Set((e instanceof Set?Array.from(e):e).map(t)):e instanceof Set?e:new Set(e),r=Array.isArray(e)?e:Array.from(e),a={setA:r,setB:r,union:r,intersection:r};return s=>{if(s===e)return a;const o=[],l=r.slice();return s.forEach((e=>{t&&n.has(t(e))||!t&&n.has(e)?o.push(e):l.push(e)})),{setA:r,setB:Array.isArray(s)?s:Array.from(s),intersection:o,union:l}}}function f(e,t,n){if(u(e)<u(t)||e instanceof Set)return y(e,n)(t);const r=y(t,n)(e);return Object.assign({},r,{setA:r.setB,setB:r.setA})}function p(e,t){const n=e instanceof Set?Array.from(e):e,r=t?new Set(n.map(t)):e instanceof Set?e:new Set(e);return a=>{if(a===e)return n;const s=[];return a.forEach((e=>{(t&&r.has(t(e))||!t&&r.has(e))&&s.push(e)})),s}}function h(e){return Array.isArray(e.elems)}function g(e){return"function"==typeof e.overlap}function x(e){return null!=e.set}function b(e,t,n){if(g(e))return e.overlap;if(x(e)&&e.set.overlap)return e.set.overlap;const r=d(h(e)?e.elems:e.set.elems,n);return n=>n.overlap&&h(e)&&Array.isArray(e.elems)?n.overlap(e.elems):n.overlap&&x(e)?n.overlap(e.set):r(n.elems)[t]}function v(e,t,n){if(g(e))return()=>null;if("intersection"===t){const t=p(h(e)?e.elems:e.set.elems,n);return e=>t(e.elems)}const r=y(h(e)?e.elems:e.set.elems,n);return e=>r(e.elems)[t]}function $(e){return null!=e&&"number"==typeof e.cardinality&&"string"==typeof e.name&&Array.isArray(e.elems)}function w(e){return $(e)&&"set"===e.type}function S(e){const t=e;return $(e)&&["composite","union","intersection","distinctIntersection"].includes(t.type)&&t.sets instanceof Set&&"number"==typeof t.degree}function E(e){return w(e)||S(e)}function k(e){const t=e;return null!=e&&(null==t.type||["intersection","union"].includes(t.type))}function C(e){const t=e;return null!=e&&"string"==typeof t.name&&"string"==typeof t.color&&(h(t)||x(t)||g(t))}function O(e,t){return e.name.localeCompare(t.name)}function M(e,t){return t.cardinality-e.cardinality}function N(e,t){return e.degree-t.degree}function A(e){return(t,n)=>e.reduce(((e,r)=>0===e?r(t,n):e),0)}function L(e){return(t,n)=>-e(t,n)}function j(e){return(t,n)=>{const r=e=>e<0?Number.POSITIVE_INFINITY:e;return r(e.findIndex((e=>t.sets.has(e))))-r(e.findIndex((e=>n.sets.has(e))))}}function q(e,t=/[\u2229\u222a&|]/){const n=new Map(e.map((e=>[e.name,e])));return e=>e.name.split(t).map((e=>n.get(e.trim())))}function z(e,t,n={}){let r=t;return n.order&&(r=r.sort(function(e,t){if(!t)return O;const n=Array.isArray(t)?t:[t];return 0===n.length?O:A(n.map((t=>{switch(t){case"cardinality":case"cardinality:desc":return M;case"cardinality:asc":return L(M);case"name:desc":return L(O);case"degree":case"degree:asc":return N;case"degree:desc":return L(N);case"group":case"group:asc":return j(e);case"group:desc":return L(j(e));default:return O}})))}(e,n.order))),null!=n.limit?r.slice(0,n.limit):r}function I(e,t,n){const r=n(e);return Object.assign({type:t,cardinality:e.elems.length,sets:new Set(r),degree:r.length},e)}function _(e,t,n){return e.map((e=>I(e,t,n)))}const T={distinctIntersection:" \u2229 ",intersection:" \u2229 ",union:" \u222a ",composite:","};function B(e){if(!e)return[255,255,255];const t=e.match(/#([\da-f]{2})([\da-f]{2})([\da-f]{2})/i);if(t)return[Number.parseInt(t[1],16),Number.parseInt(t[2],16),Number.parseInt(t[3],16)];const n=e.match(/\(([\d]+)[, ]([\d]+)[, ]([\d]+)\)/i);return n?[Number.parseInt(n[1],10),Number.parseInt(n[2],10),Number.parseInt(n[3],10)]:[255,255,255]}function F(e){if(1===e.length)return e[0];if(e.every((e=>null==e)))return;const t=e.map(B),n=Math.floor(t.reduce(((e,t)=>e+t[0]),0)/t.length),r=Math.floor(t.reduce(((e,t)=>e+t[1]),0)/t.length),a=Math.floor(t.reduce(((e,t)=>e+t[2]),0)/t.length);return`#${n.toString(16)}${r.toString(16)}${a.toString(16)}`}function K(e,t,n){const r=Array.from(e).sort(((e,n)=>t.get(e)-t.get(n)));return 1===r.length?r[0].name:`(${r.map((e=>e.name)).join(n)})`}function H(e,t,n,r,a){return{type:0===n.size?"composite":e,elems:r,color:a(Array.from(n).map((e=>e.color))),sets:n,name:t,cardinality:r.length,degree:n.size}}function P(e,t,n,r,a,s,o){const l=new Set(e.sets);t.sets.forEach((e=>l.add(e)));const i=K(l,a,T[s]);if(0===e.cardinality||0===t.cardinality)return H(s,i,l,[],o);let c=e,u=t;e.cardinality>t.cardinality&&(c=t,u=e);const d=new Set,m=n.get(u),y=[],f=c.elems.length;for(let h=0;h<f;h++){const e=c.elems[h],t=r(e);m.has(t)&&(d.add(t),y.push(e))}const p=H(s,i,l,y,o);return n.set(p,d),p}function R(e,t,n,r,a,s,o){const l=new Set(e.sets);t.sets.forEach((e=>l.add(e)));const i=K(l,a,T[s]);if(0===e.cardinality){const e=H(s,i,l,t.elems,o);return n.set(e,n.get(t)),e}if(0===t.cardinality){const t=H(s,i,l,e.elems,o);return n.set(t,n.get(e)),t}let c=e,u=t;e.cardinality>t.cardinality&&(c=t,u=e);const d=new Set(n.get(u)),m=n.get(u),y=u.elems.slice();c.elems.forEach((e=>{const t=r(e);m.has(t)||(d.add(t),y.push(e))}));const f=H(s,i,l,y,o);return n.set(f,d),f}function D(e,t,n,r,a,s){if("number"==typeof t)return{type:"composite",elems:[],color:s?s([]):void 0,sets:new Set,name:"()",cardinality:t,overlap(e){return e===this||E(e)&&e.name===this.name&&e.cardinality===this.cardinality?this.cardinality:0},degree:0};if(Array.isArray(t))return H(e,"()",new Set,t,s);const o=Array.from(r.values()),l=n.filter((e=>{const t=a(e);return o.every((e=>!e.has(t)))}));return H(e,"()",new Set,l,s)}function W(e,t={}){const{type:n="intersection",min:r=0,max:a=1/0,empty:s=!1,elems:o=[],notPartOfAnySet:l,toElemKey:i,mergeColors:c=F}=t,u=[],d=new Map(e.map(((e,t)=>[e,t]))),m=new Map(e.map((e=>[e,i?new Set(e.elems.map(i)):new Set(e.elems)]))),y=i?null:m,f=i?m:null,p="union"===n?R:P;function h(t){if(t.degree<r||t.degree>a||0===t.cardinality&&!s)return;if("distinctIntersection"!==n)return void u.push(t);const o=e.filter((e=>!t.sets.has(e))),l=i?t.elems.filter((e=>{const t=i(e);return o.every((e=>!f.get(e).has(t)))})):t.elems.filter((e=>o.every((t=>!y.get(t).has(e)))));if(l.length===t.cardinality)return void u.push(t);const d=H(n,t.name,t.sets,l,c);(0!==d.cardinality||s)&&u.push(d)}function g(e,t,r,o){if(t>a)return;const l=e.length;for(let a=0;a<l;a++){const i=e[a],u=[];for(let t=a+1;t<l;t++){const a=e[t],l=p(i,a,r,o,d,n,c);h(l),("union"===n||l.cardinality>0||s)&&u.push(l)}u.length>1&&g(u,t+1,r,o)}}r<=0&&h(i?D(n,l,o,f,i,c):D(n,l,o,y,(e=>e),c));const x=e.map((e=>{const t=H(n,e.name,new Set([e]),e.elems,c);return m.set(t,m.get(e)),h(t),t}));return i?g(x,2,f,i):g(x,2,y,(e=>e)),z(e,u,t)}function U(e){return Object.assign({type:"set",cardinality:e.elems.length},e)}function V(e,t={}){let n=e;if(t.order){const e=function(e){if(!e)return O;switch(e){case"cardinality":case"cardinality:desc":return A([M,O]);case"cardinality:asc":return A([L(M),O]);case"name:desc":return L(O);default:return O}}(t.order);n=n.slice().sort(e)}return null!=t.limit?n.slice(0,t.limit):n}function Q(e,t={}){return V(e.map(U),t)}function G(e){return`${e.name}:${e.type}#${e.cardinality}`}function J(e){return 0===e.sets.size}function Y(e,t,n=G){const r={done:null,aKey:"",bKey:"",aIsSet:!1,bIsSet:!1,toKey:n};return e===t?(r.done=e.cardinality,r):0===e.cardinality||0===t.cardinality?(r.done=0,r):(r.aKey=n(e),r.bKey=n(t),r.aKey===r.bKey?(r.done=e.cardinality,r):(r.aIsSet=w(e),r.bIsSet=w(t),!r.aIsSet&&J(e)||!r.bIsSet&&J(t)?(r.done=0,r):r))}function Z(e,t){return!(t.bIsSet||!t.aIsSet)&&Array.from(e.sets).map(t.toKey).includes(t.aKey)}function X(e,t){return!(!t.bIsSet||t.aIsSet)&&Array.from(e.sets).map(t.toKey).includes(t.bKey)}function ee(e,t=G){return e.map((e=>{const n=Array.from(e.sets).map(t).sort();return{key:n.join("&"),s:n,sets:new Set(n),degree:e.degree,cardinality:e.cardinality}}))}function te(e,t,n){const r=new Set;if(n.aIsSet)r.add(n.aKey);else for(const a of Array.from(e.sets))r.add(n.toKey(a));if(n.bIsSet)r.add(n.bKey);else for(const a of Array.from(t.sets))r.add(n.toKey(a));return Array.from(r).sort().join("&")}function ne(e,t,n={}){var r,a,s;const o="function"==typeof t?t:e=>e.sets,l=null!==(r="function"!=typeof t?t:n)&&void 0!==r?r:{},i=null!==(a=l.type)&&void 0!==a?a:"intersection",c=null!==(s=l.joiner)&&void 0!==s?s:T[i],u=[],d=new Map;let m=null;function y(e){return this===e?this.cardinality:null==m?0:m(this,e)}const f=e.map((e=>{const t=o(e),n=t.map((e=>{if(d.has(e))return d.get(e);const t={cardinality:0,elems:[],name:e,type:"set",overlap:y};return u.push(t),d.set(t.name,t),t}));if("distinctIntersection"===i)for(const a of n)a.cardinality+=e.cardinality;else if(1===t.length)Object.assign(n[0],{cardinality:e.cardinality},e);else if("intersection"===i)for(const a of n)a.cardinality=Math.max(a.cardinality,e.cardinality);else if("union"===i)for(const a of n)a.cardinality=Math.min(a.cardinality,e.cardinality);const r=t.join(c);return Object.assign({type:i,elems:[],name:r,overlap:y},e,{cardinality:e.cardinality,degree:t.length,sets:new Set(n)})})),p=V(u,{order:l.setOrder}),h=z(p,f,{order:l.combinationOrder});switch(i){case"distinctIntersection":m=function(e,t=G){const n=new Map;for(const r of ee(e,t))for(const e of r.s)n.has(e)?n.get(e).push(r):n.set(e,[r]);return(e,r)=>{const a=Y(e,r,t);if(null!=a.done)return a.done;if(!a.aIsSet&&!a.bIsSet)return 0;if(a.aIsSet&&!a.bIsSet)return Z(r,a)?r.cardinality:0;if(!a.aIsSet&&a.bIsSet)return X(e,a)?e.cardinality:0;const s=n.get(a.aKey),o=n.get(a.bKey);return s&&o?s.length<o.length?s.reduce(((e,t)=>e+(t.sets.has(a.bKey)?t.cardinality:0)),0):o.reduce(((e,t)=>e+(t.sets.has(a.aKey)?t.cardinality:0)),0):0}}(h,l.toKey);break;case"union":m=function(e,t=G){const n=new Map(ee(e,t).map((e=>[e.key,e.cardinality])));return(e,r)=>{const a=Y(e,r,t);if(null!=a.done)return a.done;if(a.aIsSet&&!a.bIsSet&&Z(r,a))return e.cardinality;if(!a.aIsSet&&a.bIsSet&&X(e,a))return r.cardinality;const s=te(e,r,a);return n.has(s)?e.cardinality+r.cardinality-n.get(s):0}}(h,l.toKey);break;default:m=function(e,t=G){const n=new Map(ee(e,t).map((e=>[e.key,e.cardinality])));return(e,r)=>{const a=Y(e,r,t);if(null!=a.done)return a.done;if(a.aIsSet&&!a.bIsSet&&Z(r,a))return r.cardinality;if(!a.aIsSet&&a.bIsSet&&X(e,a))return e.cardinality;const s=te(e,r,a);return n.has(s)?n.get(s):0}}(h,l.toKey)}return{sets:p,combinations:h}}function re(e,t,n={}){var r;const a="function"==typeof t?t:e=>e.sets,s=null!==(r="function"!=typeof t?t:n)&&void 0!==r?r:{},o=new Map;return e.forEach((e=>{a(e).forEach((t=>{const n=String(t);o.has(n)?o.get(n).push(e):o.set(n,[e])}))})),V(Array.from(o).map((([e,t])=>({type:"set",elems:t,name:String(e),cardinality:t.length}))),s)}const ae=(e,t,n)=>{const r=e.length+n,a=t/Math.max(1,r),s=t-a*e.length,o=new Map(e.map(((e,t)=>[e,t]))),l=a/(1+n),i=e=>{const t=o.get(e);if(null!=t)return s+a*t};return i.bandwidth=()=>l,i};function se(e,t,n=1){for(let r=0;r<e.length-n;r+=n){const n=e[r],a=e[r+1];if(n<a){if(n+t[r]/2>a-t[r+1]/2)return!0}else{const e=n-t[r]/2;if(a+t[r+1]/2>e)return!0}}return!1}function oe(e,t,n,r,a){let s=e[e.length-1];if(!s.label)for(let o=e.length-2;o>0;--o)if(e[o].label){s=e[o];break}if(s.value<t){const o=n(s.value),l=n(t);if(o<l){o+r(s.value)/2<l-r(t)/2&&e.push({value:t,label:a(t)})}else{const n=o-r(s.value)/2;l+r(t)/2<n&&e.push({value:t,label:a(t)})}}return e}function le(e,t=String,n=1){return e.map(((e,r)=>({value:e,label:1===n||r%n==0?t(e):void 0})))}function ie(e,t,n,r,a){const s=e.map((e=>t(e))),o=e.map((e=>n(e)));return se(s,o)&&se(s,o,2)?null:oe(le(e,a),r,t,n,a)}function ce(e){return e.toLocaleString()}function ue(e,t=1){const n=[];for(let r=0;r<=e;r+=t)n.push(r);return n}function de(e,t,n,r){if(t<=0)return[];const a=function(e,t=11){const n=Math.max(0,Math.floor(Math.log10(e)-.5)),r=Math.pow(10,n),a=[1,2,5],s=a.map((e=>e*r));n>0&&s.unshift(a[a.length-1]*Math.pow(10,n-1)),s.push(a[0]*Math.pow(10,n+1));const o=Math.ceil(e/t);return s.filter((t=>t>=o&&t<=e))}(e,t);for(let s=0;s<a.length;s++){const t=ie(ue(e,a[s]),n,r,e,ce);if(t)return t}return le([0,e],ce)}const me=(e,t,n)=>{const r=t[1]-t[0],a=e,s=e=>{const n=Math.max(0,Math.min(e,a))/a;return t[0]+n*r};return s.ticks=(t=10)=>{if("vertical"===n.orientation){const r=Math.ceil(1.4*n.fontSizeHint);return de(e,t+1,s,(()=>r))}const r=n.fontSizeHint/1.4;return de(e,t+1,s,(e=>Math.ceil(ce(e).length*r)))},s.tickFormat=()=>ce,s};function ye(e){const t=["","k","M","G"],n=Math.max(0,Math.min(Math.floor(Math.log10(e)/3),t.length-1));return`${(Math.round(e/Math.pow(10,3*n-1))/10).toLocaleString()}${t[n]}`}function fe(e,t){const n=[],r=Math.pow(10,t);for(let a=1;a<=e;a*=r)n.push(a);return n}function pe(e,t){const n=[];for(let r=1,a=0;r<=e;r*=10,a++){n.push({value:r,label:1===t||a%t==0?ye(r):void 0});for(let a=r+r;a<10*r&&a<e;a+=r*t)n.push({value:a})}return n}function he(e,t,n,r){if(t<=0)return[];for(const a of[1,2,5]){if(ie(fe(e,a),n,r,e,ye))return oe(pe(e,a),e,n,r,ye)}return le([0,e],ye)}const ge=(e,t,n)=>{const r=t[1]-t[0],a=e<1?1:Math.log10(e),s=e=>{const n=Math.max(0,Math.min(e,a)),s=n<=1?0:Math.log10(n)/a;return t[0]+s*r};return s.ticks=(t=10)=>{if("vertical"===n.orientation){const r=Math.ceil(1.4*n.fontSizeHint);return he(e,t+1,s,(()=>r))}const r=n.fontSizeHint/1.4;return he(e,t+1,s,(e=>Math.ceil(ye(e).length*r)))},s.tickFormat=()=>ye,s};function xe(e,t,{sortAble:n,compress:r="auto"}={}){if(0===e.length)return[];const a=e.map((e=>t(e)));if("no"===r)return a;n&&a.sort(((e,t)=>e-t));const s=function(e){if(0===e.length)return"";const t=[];let n=0;const r=r=>(r===n+1?t.push(e[n].toString()):r===n+2&&r<10?t.push(`${e[n]},${e[n+1]}`):t.push(`${e[n]}+${r-n-1}`),r);for(let a=1;a<e.length;a++){const t=e[a-1]+1;e[a]!==t&&(n=r(a),n=a)}return r(e.length),t.join(",")}(a),o=JSON.stringify(a).length,l=s.length+2;return l<.6*o||o-l>50||"yes"===r&&l<o?s:a}function be(e,t){return"string"==typeof e?0===e.length?[]:e.split(",").map((e=>{if(e.includes("+")){const[n,r]=e.split("+").map((e=>Number.parseInt(e,10)));return t.slice(n,n+r+1)}return t[Number.parseInt(e,10)]})).flat():e.map((e=>t[e]))}function ve(e,t){return t.color&&(e.color=t.color),e}function $e(e,t,n={}){const r=e.sets.map((e=>U(Object.assign(Object.assign({},e),{elems:be(e.elems,t)})))),a=e.combinations?e.combinations.map((e=>I(Object.assign(Object.assign({},e),{elems:be(e.elems,t)}),e.type,(e=>e.sets.map((e=>r[e])))))):W(r,Object.assign({type:"intersection",elems:t,toElemKey:n.toElemKey},null!==(s=e.combinationOptions)&&void 0!==s?s:{}));var s;function o(e){return"set"===e.type?r[e.index]:a[e.index]}return{sets:r,combinations:a,selection:e.selection?"string"==typeof e.selection||Array.isArray(e.selection)?be(e.selection,t):o(e.selection):void 0,queries:e.queries.map((e=>e.set?{name:e.name,color:e.color,set:o(e.set)}:{name:e.name,color:e.color,elems:be(e.elems,t)}))}}function we(e,t={}){var n;const r=Object.assign({sortAble:!0},t),a=null!==(n=t.toKey)&&void 0!==n?n:G,s=new Map(e.sets.map(((e,t)=>[a(e),t]))),o=new Map(e.combinations.map(((e,t)=>[a(e),t]))),l=t=>{if("set"===t.type)return{type:t.type,index:s.get(a(t))};const n=o.get(a(t));return null==n||n<0?xe(t.elems,e.toElemIndex,r):{type:t.type,index:n}},i=e.sets.map(((e,t)=>({key:a(e),i:t})));return{sets:e.sets.map((t=>ve({name:t.name,cardinality:t.cardinality,elems:xe(t.elems,e.toElemIndex,r)},t))),combinations:"no"===t.compress?e.combinations.map((t=>{const n=new Set(Array.from(t.sets).map(a));return ve({name:t.name,type:t.type,cardinality:t.cardinality,degree:t.degree,sets:i.filter((({key:e})=>n.has(e))).map((({i:e})=>e)),elems:xe(t.elems,e.toElemIndex,r)},t)})):void 0,combinationOptions:e.combinationOptions,selection:e.selection?Array.isArray(e.selection)?xe(e.selection,e.toElemIndex,r):l(e.selection):void 0,queries:e.queries.map((t=>{const n=x(t)?l(t.set):xe(Array.from(t.elems),e.toElemIndex,r);return{name:t.name,color:t.color,set:"string"==typeof n||Array.isArray(n)?void 0:n,elems:"string"==typeof n||Array.isArray(n)?n:void 0}}))}}function Se(e){if(0===e.length)return[];const[t,n]=e.split(";"),r=Number.parseInt(t,10),a=0===(s=n).length?[]:s.split(",").map((e=>{if(""===e)return 0;if(e.includes("=")){const[t,n]=e.split("=").map((e=>Number.parseInt(e,10)));return Array(n+1).fill(t)}return Number.parseInt(e,10)})).flat();var s;const o=[];let l=0;for(let i=r;i>0;i--)o.push(a.slice(l,l+i)),l+=i;return o}function Ee(e,t,{toElemKey:n,what:r="intersection",compress:a="auto"}={}){const s=e.concat(t);const o=s.map(((e,t)=>{const a=function(e){if(e.overlap)return e.overlap;const t=d(e.elems,n);return n=>n.overlap?n.overlap(e):t(n.elems)[r]}(e),o=[];for(let n=t+1;n<s.length;n++)o.push(a(s[n]));return o}));if(o.pop(),"no"===a)return o;const l=function(e){return 0===e.length?"":`${e.length};${function(e){if(0===e.length)return"";const t=[];let n=e[0],r=1;for(let a=1;a<e.length;a++){const s=e[a];s===n?r++:(r>1?t.push(`${n}=${r-1}`):0===n?t.push(""):t.push(n.toString()),n=s,r=1)}return r>1?t.push(`${n}=${r}`):0===n?t.push(""):t.push(n.toString()),t.join(",")}(e.flat())}`}(o);if("yes"===a)return l;const i=JSON.stringify(o).length;return l.length+2<.6*i?l:o}function ke(e,t){return 1===e.length?e[0].name:`(${e.map((e=>e.name)).join(T[t])})`}function Ce(e,t={}){var n;const r=null!==(n=t.toKey)&&void 0!==n?n:G,a=new Map(e.sets.map(((e,t)=>[r(e),t]))),s=new Map(e.combinations.map(((e,t)=>[r(e),t]))),o=t=>{if(E(t)){if("set"===t.type)return{type:t.type,index:a.get(r(t))};const e=s.get(r(t));if(null!=e&&e>=0)return{type:t.type,index:e}}const n=d(E(t)?t.elems:t);return e.sets.map((e=>n(e.elems).intersection)).concat(e.combinations.map((e=>n(e.elems).intersection)))},l=new Map(e.sets.map(((e,t)=>[r(e),t]))),i=Ee(e.sets,e.combinations,t),c="yes"===t.compress;return{sets:c?e.sets.map((e=>({n:e.name,cc:e.color,c:e.cardinality}))):e.sets.map((e=>ve({name:e.name,cardinality:e.cardinality},e))),combinations:c?e.combinations.map((t=>{const n=Array.from(t.sets).map((e=>l.get(r(e)))).sort(((e,t)=>e-t)),a={c:t.cardinality,s:n.reduce(((e,t)=>e+Math.pow(2,t)),0)};return t.name!==ke(n.map((t=>e.sets[t])),t.type)&&(a.n=t.name),"intersection"!==t.type&&(a.type=t.type[0]),t.color&&(a.cc=t.color),a})):e.combinations.map((e=>ve({name:e.name,cardinality:e.cardinality,type:e.type,sets:Array.from(e.sets).map((e=>l.get(r(e)))).sort(((e,t)=>e-t))},e))),overlaps:i,selection:e.selection?o(e.selection):void 0,queries:e.queries.map((t=>{if(x(t)){const e=o(t.set);return Array.isArray(e)?{name:t.name,color:t.color,overlaps:e}:{name:t.name,color:t.color,set:e}}const n=d(t.elems),r=e.sets.map((e=>n(e.elems).intersection)).concat(e.combinations.map((e=>n(e.elems).intersection)));return{name:t.name,color:t.color,overlaps:r}}))}}function Oe(e){return"number"==typeof e.c}function Me(e){return"number"==typeof e.c}function Ne(e,t={}){var n;const r=null!==(n=t.toKey)&&void 0!==n?n:G;let a=()=>0;function s(e){return e.overlap=t=>a(e,t),e}const o=e.sets.map((e=>s({name:Me(e)?e.n:e.name,cardinality:Me(e)?e.c:e.cardinality,type:"set",elems:[]}))),l=e.combinations.map((e=>{var t,n;const r=Oe(e)?(a=e.s,o.filter(((e,t)=>{const n=Math.pow(2,t);return(a&n)===n}))):e.sets.map((e=>o[e]));var a;const l={i:"intersection",u:"union",c:"composite",d:"distinctIntersection"}[(null!==(t=e.type)&&void 0!==t?t:"i")[0]];return s({name:Oe(e)?null!==(n=e.n)&&void 0!==n?n:ke(r,l):e.name,cardinality:Oe(e)?e.c:e.cardinality,type:l,degree:r.length,sets:new Set(r),elems:[]})})),{setIndex:i,combinationIndex:c,compute:u}=function(e,t,n,r=G){const a="string"==typeof e?Se(e):e,s=new Map(t.map(((e,t)=>[r(e),t]))),o=new Map(n.map(((e,n)=>[r(e),n+t.length])));return{setIndex:s,compute:(e,t)=>{if(e===t)return e.cardinality;const n=r(e),l=r(t),i=s.has(n)?s.get(n):o.get(n),c=s.has(l)?s.get(l):o.get(l);if(i===c)return e.cardinality;const u=Math.min(i,c),d=Math.max(i,c)-u-1;return u<0||u>=a.length||d<0||d>=a[u].length?0:a[u][d]},combinationIndex:o}}(e.overlaps,o,l,r);function d(e){return"set"===e.type?o[e.index]:l[e.index]}function m(e){return t=>{const n=r(t),a=i.has(n)?i.get(n):c.get(n);return null==a||a<0||a>=e.length?0:e[a]}}return a=u,{sets:o,combinations:l,selection:e.selection?Array.isArray(e.selection)?m(e.selection):d(e.selection):void 0,queries:e.queries.map((e=>e.set?{name:e.name,color:e.color,set:d(e.set)}:{name:e.name,color:e.color,overlap:m(e.overlaps)}))}}var Ae=n(193),Le=n.n(Ae);function je(e){return Array.from(e.classList).find((e=>e.startsWith("root-"))).slice("root-".length)}function qe(e,t){var n,r;return null!==(r=null===(n=e.querySelector(`titleTextStyle-${t}`))||void 0===n?void 0:n.textContent)&&void 0!==r?r:"UpSetJS"}function ze(e,t){var n,r;return null!==(r=null===(n=e.querySelector(`descTextStyle-${t}`))||void 0===n?void 0:n.textContent)&&void 0!==r?r:""}const Ie={},_e=[],Te={setLabel:"16px",axisTick:"10px",chartLabel:"16px",barLabel:"10px",legend:"10px",description:"16px",title:"24px",valueLabel:"12px",exportLabel:"10px"},Be=[.18,.12,.7],Fe=[.6,.4],Ke={type:"intersection",order:["cardinality:desc","name:asc"]},He=Object.keys(Te),Pe=["axisTick","bar","barLabel","chartLabel","dot","legend","title","description","setLabel","set","valueLabel"],Re=["dump","png","share","svg","vega"],De=[.7,.4],We=[.15,.3];var Ue={sets:[],intersections:[],bb:{x:0,y:0,width:10,height:10}},Ve={sets:[{cx:0,cy:0,r:5,text:{x:3.5,y:-4},align:"start",verticalAlign:"bottom"}],intersections:[{sets:[0],x1:0,y1:5,arcs:[{mode:"i",ref:0,x2:0,y2:-5,sweep:!1,large:!1},{mode:"i",ref:0,x2:0,y2:5,sweep:!1,large:!1}],text:{x:0,y:0}}],bb:{x:-5,y:-5,width:10,height:10}},Qe={sets:[{cx:-4,cy:0,r:5,text:{x:-7.5,y:4},align:"end",verticalAlign:"top"},{cx:4,cy:0,r:5,text:{x:7.5,y:-4},align:"start",verticalAlign:"bottom"}],intersections:[{sets:[0],x1:0,y1:-3,arcs:[{mode:"i",ref:0,x2:0,y2:3,sweep:!1,large:!0},{mode:"o",ref:1,x2:0,y2:-3,sweep:!0,large:!1}],text:{x:-4,y:0}},{sets:[1],x1:0,y1:3,arcs:[{mode:"i",ref:1,x2:0,y2:-3,sweep:!1,large:!0},{mode:"o",ref:0,x2:0,y2:3,sweep:!0,large:!1}],text:{x:4,y:0}},{sets:[0,1],x1:0,y1:3,arcs:[{mode:"i",ref:0,x2:0,y2:-3,sweep:!1,large:!1},{mode:"i",ref:1,x2:0,y2:3,sweep:!1,large:!1}],text:{x:0,y:0}}],bb:{x:-9,y:-5,width:18,height:10}},Ge={sets:[{cx:-3.464,cy:-2,r:5,text:{x:-7,y:-6},align:"end"},{cx:3.464,cy:-2,r:5,text:{x:7,y:-6},align:"start"},{cx:0,cy:4,r:5,text:{x:4,y:7.5},align:"start",verticalAlign:"top"}],intersections:[{sets:[0],x1:-4.855,y1:2.803,arcs:[{mode:"o",ref:2,x2:-1.39,y2:-.803,sweep:!0,large:!1},{mode:"o",ref:1,x2:0,y2:-5.606,sweep:!0,large:!1},{mode:"i",ref:0,x2:-4.855,y2:2.803,sweep:!1,large:!0}],text:{x:-4.216,y:-2.434}},{sets:[1],x1:0,y1:-5.606,arcs:[{mode:"o",ref:0,x2:1.39,y2:-.803,sweep:!0,large:!1},{mode:"o",ref:2,x2:4.855,y2:2.803,sweep:!0,large:!1},{mode:"i",ref:1,x2:0,y2:-5.606,sweep:!1,large:!0}],text:{x:4.216,y:-2.434}},{sets:[2],x1:-4.855,y1:2.803,arcs:[{mode:"o",ref:0,x2:0,y2:1.606,sweep:!1,large:!1},{mode:"o",ref:1,x2:4.855,y2:2.803,sweep:!1,large:!1},{mode:"i",ref:2,x2:-4.855,y2:2.803,sweep:!0,large:!0}],text:{x:0,y:4.869}},{sets:[0,1],x1:0,y1:-5.606,arcs:[{mode:"i",ref:1,x2:-1.39,y2:-.803,sweep:!1,large:!1},{mode:"o",ref:2,x2:1.39,y2:-.803,sweep:!0,large:!1},{mode:"i",ref:0,x2:0,y2:-5.606,sweep:!1,large:!1}],text:{x:0,y:-2.404}},{sets:[0,2],x1:-4.855,y1:2.803,arcs:[{mode:"i",ref:2,x2:-1.39,y2:-.803,sweep:!0,large:!1},{mode:"o",ref:1,x2:0,y2:1.606,sweep:!1,large:!1},{mode:"i",ref:0,x2:-4.855,y2:2.803,sweep:!0,large:!1}],text:{x:-2.082,y:1.202}},{sets:[1,2],x1:4.855,y1:2.803,arcs:[{mode:"i",ref:2,x2:1.39,y2:-.803,sweep:!1,large:!1},{mode:"o",ref:0,x2:0,y2:1.606,sweep:!0,large:!1},{mode:"i",ref:1,x2:4.855,y2:2.803,sweep:!1,large:!1}],text:{x:2.082,y:1.202}},{sets:[0,1,2],x1:1.39,y1:-.803,arcs:[{mode:"i",ref:0,x2:0,y2:1.606,sweep:!0,large:!1},{mode:"i",ref:1,x2:-1.39,y2:-.803,sweep:!0,large:!1},{mode:"i",ref:2,x2:1.39,y2:-.803,sweep:!0,large:!1}],text:{x:0,y:0}}],bb:{x:-8.464,y:-7,width:16.928,height:16}},Je={sets:[{cx:.439,cy:-1.061,rx:2.5,ry:5,rotation:45,text:{x:4.5,y:-4.5},align:"start",verticalAlign:"bottom"},{cx:2.561,cy:1.061,rx:2.5,ry:5,rotation:45,text:{x:4,y:3.75},align:"start",verticalAlign:"top"},{cx:-2.561,cy:1.061,rx:2.5,ry:5,rotation:-45,text:{x:-4,y:3.7},align:"end",verticalAlign:"top"},{cx:-.439,cy:-1.061,rx:2.5,ry:5,rotation:-45,text:{x:-4.5,y:-4.5},align:"end",verticalAlign:"bottom"}],intersections:[{sets:[0],x1:0,y1:-3.94,arcs:[{ref:0,mode:"i",x2:4.328,y2:-2.828,sweep:!0,large:!1},{ref:1,mode:"o",x2:2.179,y2:-1.858,large:!1},{ref:3,mode:"o",x2:0,y2:-3.94,large:!1}],text:{x:2.914,y:-3.536}},{sets:[1],x1:4.328,y1:-2.828,arcs:[{ref:1,mode:"i",x2:0,y2:5.006,sweep:!0,large:!0},{ref:2,mode:"o",x2:1.328,y2:2.828},{ref:3,mode:"o",x2:3.108,y2:-.328},{ref:0,mode:"o",x2:4.328,y2:-2.828}],text:{x:5.036,y:-1.414}},{sets:[2],x1:0,y1:5.006,arcs:[{ref:2,mode:"i",x2:-4.328,y2:-2.828,sweep:!0,large:!0},{ref:3,mode:"o",x2:-3.108,y2:-.328},{ref:0,mode:"o",x2:-1.328,y2:2.828},{ref:1,mode:"o",x2:0,y2:5.006}],text:{x:-5.036,y:-1.414}},{sets:[3],x1:-4.328,y1:-2.828,arcs:[{ref:3,mode:"i",x2:0,y2:-3.94,sweep:!0,large:!1},{ref:0,mode:"o",x2:-2.179,y2:-1.858,large:!1},{ref:2,mode:"o",x2:-4.328,y2:-2.828,large:!1}],text:{x:-2.914,y:-3.536}},{sets:[0,1],x1:4.328,y1:-2.828,arcs:[{ref:1,mode:"i",x2:3.108,y2:-.328,sweep:!0,large:!1},{ref:3,mode:"o",x2:2.179,y2:-1.858,sweep:!1,large:!1},{ref:0,mode:"i",x2:4.328,y2:-2.828,sweep:!0,large:!1}],text:{x:3.205,y:-1.672}},{sets:[0,2],x1:-1.328,y1:2.828,arcs:[{ref:0,mode:"i",x2:-3.108,y2:-.328,sweep:!0,large:!1},{ref:3,mode:"o",x2:-.969,y2:1.755,large:!1},{ref:1,mode:"o",x2:-1.328,y2:2.828,large:!1}],text:{x:-2.212,y:1.591}},{sets:[0,3],x1:0,y1:-3.94,arcs:[{ref:3,mode:"i",x2:2.179,y2:-1.858,sweep:!0,large:!1},{ref:1,mode:"o",x2:0,y2:.188,sweep:!1,large:!1},{ref:2,mode:"o",x2:-2.179,y2:-1.858,sweep:!1,large:!1},{ref:0,mode:"i",x2:0,y2:-3.94,sweep:!0}],text:{x:0,y:-1.87}},{sets:[1,2],x1:1.328,y1:2.828,arcs:[{ref:2,mode:"i",x2:0,y2:5.006,sweep:!0,large:!1},{ref:1,mode:"i",x2:-1.328,y2:2.828,sweep:!0,large:!1},{ref:0,mode:"o",x2:0,y2:2.346,large:!1},{ref:3,mode:"o",x2:1.328,y2:2.828}],text:{x:0,y:3.393}},{sets:[1,3],x1:3.108,y1:-.328,arcs:[{ref:3,mode:"i",x2:1.328,y2:2.828,sweep:!0,large:!1},{ref:2,mode:"o",x2:.969,y2:1.755,large:!1},{ref:1,mode:"i",x2:3.108,y2:-.328,large:!1}],text:{x:2.212,y:1.591}},{sets:[2,3],x1:-3.108,y1:-.328,arcs:[{ref:3,mode:"i",x2:-4.328,y2:-2.828,sweep:!0,large:!1},{ref:2,mode:"i",x2:-2.179,y2:-1.858,sweep:!0,large:!1},{ref:0,mode:"o",x2:-3.108,y2:-.328,large:!1}],text:{x:-3.205,y:-1.672}},{sets:[0,1,2],x1:0,y1:2.346,arcs:[{ref:0,mode:"i",x2:-1.328,y2:2.828,sweep:!0,large:!1},{ref:1,mode:"i",x2:-.969,y2:1.755,sweep:!0,large:!1},{ref:3,mode:"o",x2:0,y2:2.346,large:!1}],text:{x:-.766,y:2.31}},{sets:[0,1,3],x1:2.179,y1:-1.858,arcs:[{ref:3,mode:"i",x2:3.108,y2:-.328,sweep:!0,large:!1},{ref:0,mode:"i",x2:.969,y2:1.755,sweep:!0,large:!1},{ref:2,mode:"o",x2:0,y2:.188,sweep:!1,large:!1},{ref:1,mode:"i",x2:2.179,y2:-1.858,sweep:!0}],text:{x:1.558,y:-.056}},{sets:[0,2,3],x1:-.969,y1:1.755,arcs:[{ref:3,mode:"i",x2:-3.108,y2:-.328,sweep:!0,large:!1},{ref:0,mode:"i",x2:-2.179,y2:-1.858,sweep:!0,large:!1},{ref:2,mode:"i",x2:0,y2:.188,sweep:!0,large:!1},{ref:1,mode:"o",x2:-.969,y2:1.755}],text:{x:-1.558,y:-.056}},{sets:[1,2,3],x1:1.328,y1:2.828,arcs:[{ref:3,mode:"i",x2:0,y2:2.346,sweep:!0,large:!1},{ref:0,mode:"o",x2:.969,y2:1.755,sweep:!1,large:!1},{ref:2,mode:"i",x2:1.328,y2:2.828,sweep:!0,large:!1}],text:{x:.766,y:2.31}},{sets:[0,1,2,3],x1:0,y1:.188,arcs:[{ref:2,mode:"i",x2:.969,y2:1.755,sweep:!0,large:!1},{ref:0,mode:"i",x2:0,y2:2.346,sweep:!0,large:!1},{ref:3,mode:"i",x2:-.969,y2:1.755,sweep:!0,large:!1},{ref:1,mode:"i",x2:0,y2:.188,sweep:!0}],text:{x:0,y:1.43}}],bb:{x:-6.5,y:-5,width:13,height:10}},Ye={sets:[{cx:.5,cy:-1,rx:2.5,ry:5,rotation:0,text:{x:2.25,y:-5},align:"start",verticalAlign:"bottom"},{cx:1.106,cy:.167,rx:2.5,ry:5,rotation:72,text:{x:4.5,y:1.5},align:"start",verticalAlign:"top"},{cx:.183,cy:1.103,rx:2.5,ry:5,rotation:144,text:{x:4,y:4},align:"start",verticalAlign:"bottom"},{cx:-.992,cy:.515,rx:2.5,ry:5,rotation:216,text:{x:-4.7,y:2},align:"end",verticalAlign:"bottom"},{cx:-.797,cy:-.785,rx:2.5,ry:5,rotation:288,text:{x:-4,y:-3.6},align:"end",verticalAlign:"bottom"}],intersections:[{sets:[0],x1:-1.653,y1:-3.541,arcs:[{ref:0,mode:"i",x2:2.857,y2:-2.666,sweep:!0,large:!1},{ref:1,mode:"o",x2:2.5,y2:-2.648,large:!1},{ref:3,mode:"o",x2:-.495,y2:-3.303,large:!1},{ref:4,mode:"o",x2:-1.653,y2:-3.541}],text:{x:.5,y:-5}},{sets:[1],x1:2.857,y1:-2.666,arcs:[{ref:1,mode:"i",x2:3.419,y2:1.893,sweep:!0,large:!1},{ref:2,mode:"o",x2:3.291,y2:1.559,large:!1},{ref:4,mode:"o",x2:2.988,y2:-1.492,large:!1},{ref:0,mode:"o",x2:2.857,y2:-2.666}],text:{x:4.91,y:-1.07}},{sets:[2],x1:3.419,y1:1.893,arcs:[{ref:2,mode:"i",x2:-.744,y2:3.837,sweep:!0,large:!1},{ref:3,mode:"o",x2:-.466,y2:3.612,large:!1},{ref:0,mode:"o",x2:2.342,y2:2.381,large:!1},{ref:1,mode:"o",x2:3.419,y2:1.893}],text:{x:2.534,y:4.339}},{sets:[3],x1:-.744,y1:3.837,arcs:[{ref:3,mode:"i",x2:-3.879,y2:.478,sweep:!0,large:!1},{ref:4,mode:"o",x2:-3.579,y2:.673,large:!1},{ref:1,mode:"o",x2:-1.54,y2:2.963,large:!1},{ref:2,mode:"o",x2:-.744,y2:3.837}],text:{x:-3.343,y:3.751}},{sets:[4],x1:-3.879,y1:.478,arcs:[{ref:4,mode:"i",x2:-1.653,y2:-3.541,sweep:!0,large:!1},{ref:0,mode:"o",x2:-1.746,y2:-3.196,large:!1},{ref:2,mode:"o",x2:-3.294,y2:-.549,large:!1},{ref:3,mode:"o",x2:-3.879,y2:.478}],text:{x:-4.601,y:-2.021}},{sets:[0,1],x1:2.5,y1:-2.648,arcs:[{ref:1,mode:"i",x2:2.857,y2:-2.666,sweep:!0,large:!1},{ref:0,mode:"i",x2:2.988,y2:-1.492,sweep:!0,large:!1},{ref:4,mode:"o",x2:2.572,y2:-1.839,large:!1},{ref:3,mode:"o",x2:2.5,y2:-2.648}],text:{x:2.741,y:-2.152}},{sets:[0,2],x1:2.342,y1:2.381,arcs:[{ref:0,mode:"i",x2:-.466,y2:3.612,sweep:!0,large:!1},{ref:3,mode:"o",x2:.257,y2:2.922,large:!1},{ref:1,mode:"o",x2:2.342,y2:2.381,large:!1}],text:{x:.5,y:3.5}},{sets:[0,3],x1:-.495,y1:-3.303,arcs:[{ref:3,mode:"i",x2:2.5,y2:-2.648,sweep:!0,large:!1},{ref:1,mode:"o",x2:1.51,y2:-2.515,large:!1},{ref:4,mode:"o",x2:-.495,y2:-3.303,large:!1}],text:{x:1.653,y:-3.125}},{sets:[0,4],x1:-1.653,y1:-3.541,arcs:[{ref:4,mode:"i",x2:-.495,y2:-3.303,sweep:!0,large:!1},{ref:3,mode:"o",x2:-.954,y2:-3.015,large:!1},{ref:2,mode:"o",x2:-1.746,y2:-3.196,large:!1},{ref:0,mode:"i",x2:-1.653,y2:-3.541}],text:{x:-1.199,y:-3.272}},{sets:[1,2],x1:3.291,y1:1.559,arcs:[{ref:2,mode:"i",x2:3.419,y2:1.893,sweep:!0,large:!1},{ref:1,mode:"i",x2:2.342,y2:2.381,sweep:!0,large:!1},{ref:0,mode:"o",x2:2.544,y2:1.878,large:!1},{ref:4,mode:"o",x2:3.291,y2:1.559}],text:{x:2.894,y:1.942}},{sets:[1,3],x1:-1.54,y1:2.963,arcs:[{ref:1,mode:"i",x2:-3.579,y2:.673,sweep:!0,large:!1},{ref:4,mode:"o",x2:-2.7,y2:1.147,large:!1},{ref:2,mode:"o",x2:-1.54,y2:2.963,large:!1}],text:{x:-3.174,y:1.557}},{sets:[1,4],x1:2.988,y1:-1.492,arcs:[{ref:4,mode:"i",x2:3.291,y2:1.559,sweep:!0,large:!1},{ref:2,mode:"o",x2:2.858,y2:.659,large:!1},{ref:0,mode:"o",x2:2.988,y2:-1.492,large:!1}],text:{x:3.483,y:.606}},{sets:[2,3],x1:-.466,y1:3.612,arcs:[{ref:3,mode:"i",x2:-.744,y2:3.837,sweep:!0,large:!1},{ref:2,mode:"i",x2:-1.54,y2:2.963,sweep:!0,large:!1},{ref:1,mode:"o",x2:-1,y2:3,large:!1},{ref:0,mode:"o",x2:-.466,y2:3.612}],text:{x:-.953,y:3.352}},{sets:[2,4],x1:-3.294,y1:-.549,arcs:[{ref:2,mode:"i",x2:-1.746,y2:-3.196,sweep:!0},{ref:0,mode:"o",x2:-1.925,y2:-2.213},{ref:3,mode:"o",x2:-3.294,y2:-.549}],text:{x:-2.462,y:-2.538}},{sets:[3,4],x1:-3.579,y1:.673,arcs:[{ref:4,mode:"i",x2:-3.879,y2:.478,sweep:!0,large:!1},{ref:3,mode:"i",x2:-3.294,y2:-.549,sweep:!0,large:!1},{ref:2,mode:"o",x2:-3.162,y2:-.024,large:!1},{ref:1,mode:"o",x2:-3.579,y2:.673}],text:{x:-3.483,y:.13}},{sets:[0,1,2],x1:2.544,y1:1.878,arcs:[{ref:0,mode:"i",x2:2.342,y2:2.381,sweep:!0,large:!1},{ref:1,mode:"i",x2:.257,y2:2.922,sweep:!0,large:!1},{ref:3,mode:"o",x2:.983,y2:2.049,large:!1},{ref:4,mode:"o",x2:2.544,y2:1.878}],text:{x:1.457,y:2.331}},{sets:[0,1,3],x1:1.51,y1:-2.515,arcs:[{ref:1,mode:"i",x2:2.5,y2:-2.648,sweep:!0,large:!1},{ref:3,mode:"i",x2:2.572,y2:-1.839,sweep:!0,large:!1},{ref:4,mode:"o",x2:1.51,y2:-2.515,large:!1}],text:{x:2.194,y:-2.334}},{sets:[0,1,4],x1:2.572,y1:-1.839,arcs:[{ref:4,mode:"i",x2:2.988,y2:-1.492,sweep:!0,large:!1},{ref:0,mode:"i",x2:2.858,y2:.659,sweep:!0,large:!1},{ref:2,mode:"o",x2:2.253,y2:-.302,large:!1},{ref:3,mode:"o",x2:2.572,y2:-1.839}],text:{x:2.667,y:-.665}},{sets:[0,2,3],x1:.257,y1:2.922,arcs:[{ref:3,mode:"i",x2:-.466,y2:3.612,sweep:!0,large:!1},{ref:0,mode:"i",x2:-1,y2:3,sweep:!0,large:!1},{ref:1,mode:"o",x2:.257,y2:2.922,large:!1}],text:{x:-.403,y:3.178}},{sets:[0,2,4],x1:-1.746,y1:-3.196,arcs:[{ref:2,mode:"i",x2:-.954,y2:-3.015,sweep:!0,large:!1},{ref:3,mode:"o",x2:-1.925,y2:-2.213,sweep:!1,large:!1},{ref:0,mode:"i",x2:-1.746,y2:-3.196,sweep:!0,large:!1}],text:{x:-1.542,y:-2.808}},{sets:[0,3,4],x1:-.495,y1:-3.303,arcs:[{ref:4,mode:"i",x2:1.51,y2:-2.515,sweep:!0,large:!1},{ref:1,mode:"o",x2:.409,y2:-2.236,large:!1},{ref:2,mode:"o",x2:-.954,y2:-3.015,large:!1},{ref:3,mode:"i",x2:-.495,y2:-3.303}],text:{x:.192,y:-2.742}},{sets:[1,2,3],x1:-1.54,y1:2.963,arcs:[{ref:2,mode:"i",x2:-2.7,y2:1.147,sweep:!0,large:!1},{ref:4,mode:"o",x2:-1.645,y2:1.568,large:!1},{ref:0,mode:"o",x2:-1,y2:3,large:!1},{ref:1,mode:"i",x2:-1.54,y2:2.963}],text:{x:-1.767,y:2.106}},{sets:[1,2,4],x1:2.858,y1:.659,arcs:[{ref:2,mode:"i",x2:3.291,y2:1.559,sweep:!0,large:!1},{ref:4,mode:"i",x2:2.544,y2:1.878,sweep:!0,large:!1},{ref:0,mode:"o",x2:2.858,y2:.659,large:!1}],text:{x:2.898,y:1.365}},{sets:[1,3,4],x1:-2.7,y1:1.147,arcs:[{ref:4,mode:"i",x2:-3.579,y2:.673,sweep:!0,large:!1},{ref:1,mode:"i",x2:-3.162,y2:-.024,sweep:!0,large:!1},{ref:2,mode:"o",x2:-2.7,y2:1.147,large:!1}],text:{x:-3.147,y:.599}},{sets:[2,3,4],x1:-3.294,y1:-.549,arcs:[{ref:3,mode:"i",x2:-1.925,y2:-2.213,sweep:!0,large:!1},{ref:0,mode:"o",x2:-2,y2:-1.08,large:!1},{ref:1,mode:"o",x2:-3.162,y2:-.024,large:!1},{ref:2,mode:"i",x2:-3.294,y2:-.549}],text:{x:-2.548,y:-1.029}},{sets:[0,1,2,3],x1:.983,y1:2.049,arcs:[{ref:3,mode:"i",x2:.257,y2:2.922,sweep:!0,large:!1},{ref:1,mode:"i",x2:-1,y2:3,sweep:!0,large:!1},{ref:0,mode:"i",x2:-1.645,y2:1.568,sweep:!0,large:!1},{ref:4,mode:"o",x2:.983,y2:2.049}],text:{x:-.407,y:2.31}},{sets:[0,1,2,4],x1:2.253,y1:-.302,arcs:[{ref:2,mode:"i",x2:2.858,y2:.659,sweep:!0,large:!1},{ref:0,mode:"i",x2:2.544,y2:1.878,sweep:!0,large:!1},{ref:4,mode:"i",x2:.983,y2:2.049,sweep:!0,large:!1},{ref:3,mode:"o",x2:2.253,y2:-.302}],text:{x:2.071,y:1.101}},{sets:[0,1,3,4],x1:1.51,y1:-2.515,arcs:[{ref:4,mode:"i",x2:2.572,y2:-1.839,sweep:!0,large:!1},{ref:3,mode:"i",x2:2.253,y2:-.302,sweep:!0,large:!1},{ref:2,mode:"o",x2:.409,y2:-2.236,sweep:!1,large:!1},{ref:1,mode:"i",x2:1.51,y2:-2.515,sweep:!0}],text:{x:1.687,y:-1.63}},{sets:[0,2,3,4],x1:-2,y1:-1.08,arcs:[{ref:0,mode:"i",x2:-1.925,y2:-2.213,sweep:!0,large:!1},{ref:3,mode:"i",x2:-.954,y2:-3.015,sweep:!0,large:!1},{ref:2,mode:"i",x2:.409,y2:-2.236,sweep:!0,large:!1},{ref:1,mode:"o",x2:-2,y2:-1.08}],text:{x:-1.028,y:-2.108}},{sets:[1,2,3,4],x1:-1.645,y1:1.568,arcs:[{ref:4,mode:"i",x2:-2.7,y2:1.147,sweep:!0,large:!1},{ref:2,mode:"i",x2:-3.162,y2:-.024,sweep:!0,large:!1},{ref:1,mode:"i",x2:-2,y2:-1.08,sweep:!0,large:!1},{ref:0,mode:"o",x2:-1.645,y2:1.568}],text:{x:-2.323,y:.327}},{sets:[0,1,2,3,4],x1:.409,y1:-2.236,arcs:[{ref:2,mode:"i",x2:2.253,y2:-.302,sweep:!0,large:!1},{ref:3,mode:"i",x2:.983,y2:2.049,sweep:!0,large:!1},{ref:4,mode:"i",x2:-1.645,y2:1.568,sweep:!0,large:!1},{ref:0,mode:"i",x2:-2,y2:-1.08,sweep:!0},{ref:1,mode:"i",x2:.409,y2:-2.236,sweep:!0}],text:{x:0,y:0}}],bb:{x:-5.5,y:-6,width:11.6,height:11.8}};function Ze(e){return"number"==typeof e.rx}const Xe={maxSets:5,compute:(e,t,n,r)=>et(e.length,n,r)};function et(e,t,n){const r=[Ue,Ve,Qe,Ge,Je,Ye],a=r[Math.min(r.length-1,e)],s=Math.min(t/a.bb.width,n/a.bb.height),o=s*-a.bb.x+(t-s*a.bb.width)/2,l=s*-a.bb.y+(n-s*a.bb.height)/2,i=e=>o+s*e,c=e=>l+s*e;return{sets:a.sets.map((e=>Object.assign({},e,{cx:i(e.cx),cy:c(e.cy),text:{x:i(e.text.x),y:c(e.text.y)}},Ze(e)?{rx:e.rx*s,ry:e.ry*s}:{r:e.r*s}))),intersections:a.intersections.map((e=>({text:{x:i(e.text.x),y:c(e.text.y)},x1:i(e.x1),y1:c(e.y1),sets:e.sets,arcs:e.arcs.map((e=>Object.assign({},e,{x2:i(e.x2),y2:c(e.y2)})))})))}}const tt={selectionColor:"#ffa500",color:"#000000",hasSelectionColor:"",opacity:1,hasSelectionOpacity:-1,textColor:"#000000",hoverHintColor:"#cccccc",notMemberColor:"#d3d3d3",alternatingBackgroundColor:"rgba(0,0,0,0.05)",valueTextColor:"#000000",strokeColor:"#000000",backgroundColor:"#ffffff",filled:!1},nt={selectionColor:"#ffa500",color:"#cccccc",hasSelectionColor:"",opacity:1,hasSelectionOpacity:-1,textColor:"#ffffff",hoverHintColor:"#d9d9d9",notMemberColor:"#666666",alternatingBackgroundColor:"rgba(255, 255, 255, 0.2)",valueTextColor:"#ffffff",strokeColor:"#ffffff",backgroundColor:"#303030",filled:!1},rt={selectionColor:"#4c78a8",color:"#4c78a8",hasSelectionColor:"#c9d6e5",opacity:1,hasSelectionOpacity:-1,textColor:"#000000",hoverHintColor:"#cccccc",notMemberColor:"#d3d3d3",alternatingBackgroundColor:"rgba(0,0,0,0.05)",valueTextColor:"#000000",strokeColor:"#000000",backgroundColor:"#ffffff",filled:!0};function at(e){return"vega"===e?rt:"dark"===e?nt:tt}function st(e,t,n={}){const r=at(t.theme);return Object.assign(e,{queryLegend:null!=t.queries&&t.queries.length>0,theme:"light",padding:20,selection:null,title:"",description:"",fontFamily:"sans-serif",queries:_e,exportButtons:!0,className:"",fontSizes:Te,classNames:Ie,style:Ie,styles:Ie,toKey:G,tooltips:!0},r,t,n,t.fontSizes?{fontSizes:Object.assign({},Te,t.fontSizes)}:Ie)}function ot(e){return st({barPadding:.3,dotPadding:.7,combinations:Ke,combinationName:null==e.combinations||(t=e.combinations,Array.isArray(t))||"union"!==e.combinations.type?"Intersection Size":"Union Size",barLabelOffset:2,setNameAxisOffset:"auto",combinationNameAxisOffset:"auto",setName:"Set Size",widthRatios:Be,heightRatios:Fe,setLabelAlignment:"center",numericScale:"linear",bandScale:"band",childrenFactories:Ie,setAddons:_e,combinationAddons:_e,setAddonPadding:1,combinationAddonPadding:1,emptySelection:!0},e);var t}function lt(e){return e.toLocaleString()}function it(e){return ot(e)}function ct(e){return st({valueFormat:lt,layout:Xe},e,{exportButtons:!1!==e.exportButtons&&Object.assign({},!0===e.exportButtons?{}:e.exportButtons,{vega:!1})})}function ut(e){return ct(e)}function dt(e){return st({numericScale:"linear",barPadding:.3,barLabelOffset:2,combinationName:"Intersection Size",combinationNameAxisOffset:"auto"},e,{exportButtons:!1!==e.exportButtons&&Object.assign({},!0===e.exportButtons?{}:e.exportButtons,{vega:!1})})}function mt(e){return dt(e)}function yt(e,t){const n=e.cloneNode(!0);return n.style.backgroundColor=at(e.dataset.theme).backgroundColor,t&&Array.from(n.querySelectorAll(t)).forEach((e=>e.remove())),(new XMLSerializer).serializeToString(n)}function ft(e,{type:t="png",title:n,toRemove:r}){const a=new Blob([yt(e,r)],{type:"image/svg+xml;charset=utf-8"}),s=je(e),o=null!=n?n:qe(e,s),l=URL.createObjectURL(a);return"svg"===t?(pt(l,`${o}.${t}`,e.ownerDocument),URL.revokeObjectURL(l),Promise.resolve()):function(e,t){const n=t.ownerDocument.createElement("canvas"),r=t.getBoundingClientRect();n.width=r.width,n.height=r.height;const a=n.getContext("2d"),s=new Image(n.width,n.height);return new Promise((t=>{s.onload=()=>{a.drawImage(s,0,0);const e=n.toDataURL("image/png");t(e)},s.src=e}))}(l,e).then((n=>{pt(n,`${o}.${t}`,e.ownerDocument),URL.revokeObjectURL(l)}))}function pt(e,t,n){const r=n.createElement("a");r.href=e,r.style.position="absolute",r.style.left="-10000px",r.style.top="-10000px",r.download=t,n.body.appendChild(r),r.click(),r.remove()}function ht(e,{title:t}={}){const n=function(e,t){var n,r,a,s,o;const l=null!==(a=e.getComputedStyle||(null===(r=null===(n=e.ownerDocument)||void 0===n?void 0:n.defaultView)||void 0===r?void 0:r.getComputedStyle))&&void 0!==a?a:window.getComputedStyle,i=je(e),c=null!=t?t:qe(e,i),u=Array.from(e.querySelectorAll("[data-upset=sets] [data-cardinality]")).map((e=>({name:e.querySelector(`text.setTextStyle-${i}`).textContent,cardinality:Number.parseInt(e.dataset.cardinality,10)}))).reverse(),d=-Number.parseFloat(e.querySelector(`.sBarTextStyle-${i}`).getAttribute("dx")),m=l(e.querySelector(`.fillPrimary-${i}`)).fill,y=l(e.querySelector(`.fillNotMember-${i}`)).fill,f=l(e.querySelector("text")).fill,p=e.querySelector(`.cChartTextStyle-${i}`).textContent,h=e.querySelector(`.sChartTextStyle-${i}`).textContent,g=Array.from(e.querySelectorAll("[data-upset=cs] [data-cardinality]")).map((e=>({name:e.querySelector(`text.hoverBarTextStyle-${i}`).textContent,cardinality:Number.parseInt(e.dataset.cardinality,10),sets:Array.from(e.querySelectorAll(`.fillPrimary-${i} > title`)).map((e=>e.textContent))}))),x=e=>Number.parseFloat(e.getAttribute("transform").match(/([\d.]+),/)[1]),b=e.querySelector("[data-upset=base]"),v=x(b),$=x(e.querySelector("[data-upset=csaxis]")),w=Number.parseFloat(b.querySelector("g").firstElementChild.children[1].getAttribute("x2")),S=(E=e.querySelector("[data-upset=setaxis]"),Number.parseFloat(E.getAttribute("transform").match(/,([\d.]+)/)[1]));var E;const k=Number.parseFloat(e.querySelector("defs rect").getAttribute("width")),C=Number.parseFloat(e.querySelector("defs rect").getAttribute("height")),O=Number.parseFloat(e.querySelector(`[data-cardinality] circle.fillPrimary-${i}`).getAttribute("r")),M=null!=e.querySelector("[data-upset=sets-s] [data-cardinality]"),N=null!=e.querySelector("[data-upset=sets-q] [data-cardinality]"),A=M||N;let L="orange";A&&(Array.from(e.querySelectorAll(`[data-upset=sets-${M?"s]":"q]:first-of-type"} [data-cardinality]`)).forEach((e=>{const t=u.length-Number.parseInt(e.dataset.i,10)-1;u[t].selection=Number.parseInt(e.dataset.cardinality,10)})),Array.from(e.querySelectorAll(`[data-upset=cs-${M?"s]":"q]:first-of-type"} [data-cardinality]`)).forEach((e=>{const t=Number.parseInt(e.dataset.i,10);g[t].selection=Number.parseInt(e.dataset.cardinality,10)})),L=l(e.querySelector(`[data-upset=sets-${M?"s":"q"}] [data-cardinality]`)).fill);const j=Number.parseInt(null!==(o=null===(s=e.querySelector("[data-upset=cs-ss]"))||void 0===s?void 0:s.dataset.i)&&void 0!==o?o:"-1",10),q=j>=0?{field:"partOf",oneOf:[1,2]}:{field:"partOf",equal:1};return{$schema:"https://vega.github.io/schema/vega-lite/v4.json",title:c,description:ze(e,i),datasets:{sets:u,combinations:g.map(((e,t)=>Object.assign({},e,{partOf:j===t?2:1,nsets:[""]}))).concat(g.map((e=>({name:e.name,cardinality:e.cardinality,partOf:0,sets:[""],nsets:u.filter((t=>!e.sets.includes(t.name))).map((e=>e.name))}))))},vconcat:[{hconcat:[{mark:"bar",width:$+k-40,height:S},{width:w,height:S,data:{name:"combinations"},transform:[{filter:q}],layer:[{mark:{type:"bar",tooltip:!0}},{mark:{type:"text",align:"center",baseline:"bottom",dy:-d},encoding:{text:{field:"cardinality",type:"quantitative"}}},A&&{mark:{type:"bar",fill:L,tooltip:!0},encoding:{y:{field:"selection",type:"quantitative"}}}].filter(Boolean),encoding:{x:{field:"name",type:"ordinal",axis:null,sort:null},y:{field:"cardinality",type:"quantitative",axis:{grid:!1},title:p}}}]},{hconcat:[{width:$,height:C,data:{name:"sets"},layer:[{mark:{type:"bar",tooltip:!0}},{mark:{type:"text",align:"right",baseline:"middle",dx:-d},encoding:{text:{field:"cardinality",type:"quantitative"}}},A&&{mark:{type:"bar",fill:L,tooltip:!0},encoding:{x:{field:"selection",type:"quantitative"}}}].filter(Boolean),encoding:{y:{field:"name",type:"ordinal",axis:null,sort:null},x:{field:"cardinality",type:"quantitative",title:h,sort:"descending",axis:{grid:!1}}}},{data:{name:"sets"},width:k,height:C,mark:{type:"text",align:"center",baseline:"middle",fontSize:Number.parseInt(l(e.querySelector(`.setTextStyle-${i}`)).fontSize,10)},encoding:{y:{field:"name",type:"ordinal",axis:null,sort:null},text:{field:"name",type:"ordinal"}}},{width:w,height:C,data:{name:"combinations"},transform:[{flatten:["sets"],as:["has_set"]},{flatten:["nsets"],as:["has_not_set"]},{calculate:"datum.has_set+datum.has_not_set",as:"set"}],layer:[{mark:{type:"circle",size:O*O*Math.PI,tooltip:!0},encoding:{color:{field:"partOf",type:"nominal",legend:null,scale:{range:[y,m].concat(j>=0?[L]:[])}},y:{field:"set",type:"ordinal",axis:null,sort:null,scale:{domain:u.map((e=>e.name))}}}},{mark:"rule",transform:[{filter:q},{calculate:"datum.sets[datum.sets.length -1]",as:"set_end"}],encoding:Object.assign({y:{field:"sets[0]",type:"ordinal",axis:null,sort:null},y2:{field:"set_end"}},j<0?{}:{color:{field:"partOf",type:"nominal",legend:null,scale:{range:[m,L]}}})}],encoding:{x:{field:"name",type:"ordinal",axis:null,sort:null}}}]}],config:{padding:v,background:at(e.dataset.theme).backgroundColor,concat:{spacing:0},view:{stroke:null},bar:{fill:m},circle:{opacity:1},rule:{stroke:m,strokeWidth:Number.parseInt(l(e.querySelector("[data-upset=cs] [data-cardinality] line")).strokeWidth,10)},axis:{labelColor:f,labelFontSize:Number.parseInt(l(e.querySelector(`.axisTextStyle-${i}`)).fontSize,10),titleColor:f,titleFontSize:Number.parseInt(l(e.querySelector(`.cChartTextStyle-${i}`)).fontSize,10)},title:{color:f},text:{fill:f,fontSize:Number.parseInt(l(e.querySelector(`.sBarTextStyle-${i}`)).fontSize,10)}}}}(e,t),r=URL.createObjectURL(new Blob([JSON.stringify(n,null,2)],{type:"application/json"}));pt(r,`${n.title}.json`,e.ownerDocument),URL.revokeObjectURL(r)}const gt=["bandScale","numericScale"].concat(["selectionColor","color","textColor","hoverHintColor","notMemberColor","alternatingBackgroundColor","hasSelectionColor","hasSelectionOpacity","opacity","strokeColor","valueTextColor"],["padding","barPadding","dotPadding","widthRatios","heightRatios"],["fontSizes","combinationName","setName","barLabelOffset","setNameAxisOffset","combinationNameAxisOffset","theme","fontFamily","emptySelection","exportButtons","queryLegend"]);function xt(e){var t;const n=it({width:0,height:0,sets:null!==(t=e.sets)&&void 0!==t?t:[],combinations:e.combinations,theme:e.theme}),r={};return gt.forEach((t=>{const a=e[t],s=n[t];if("theme"!==t||"light"===a){if(null!=a&&a!==s)if("fontSizes"===t){let e=!0;const n={};He.forEach((t=>{const r=a[t];r!==s[t]&&(n[t]=r,e=!1)})),e||(r[t]=n)}else r[t]=a}else r[t]=a})),r}function bt(e,t,n,r,a){return Object.assign({$schema:"https://upset.js.org/schema.1.0.0.json",name:"string"==typeof n.title?n.title:"UpSetJS",description:"string"==typeof n.description?n.description:"",mode:a,author:r,elements:t,attrs:[],props:xt(n)},e)}function vt(e,t,n,r){return Object.assign({$schema:"https://upset.js.org/schema-static.1.0.0.json",name:"string"==typeof t.title?t.title:"UpSetJS",description:"string"==typeof t.description?t.description:"",mode:r,author:n,props:xt(t)},e)}function $t(e,t,n=!1,r){var a,s;const o=[],l=new Map;return bt(we({sets:e.sets,queries:null!==(s=null===(a=e.queries)||void 0===a?void 0:a.filter((e=>h(e)||x(e))))&&void 0!==s?s:[],toElemIndex:e=>l.has(e)?l.get(e):(l.set(e,o.length),o.push(e),o.length-1),selection:e.selection&&E(e.selection)?e.selection:void 0,combinations:t.cs.v,combinationOptions:Array.isArray(e.combinations)?{}:e.combinations},{compress:n?"yes":"no"}),o,e,void 0,r)}function wt(e,t,n,r){const a=$t(t,n,!1,r),s=URL.createObjectURL(new Blob([JSON.stringify(a,null,2)],{type:"application/json"}));pt(s,`${a.name}.json`,e.ownerDocument),URL.revokeObjectURL(s)}function St(e,t,n){const r=$t(e,t,!0,n);delete r.$schema;const a=Le.a.compressToEncodedURIComponent(JSON.stringify(r)),s=new URL("https://upset.js.org/app/embed.html");if(s.searchParams.set("p",a),s.toString().length<4096)return window.open(s.toString(),"_blank"),!0;const o=function(e,t,n=!1,r){var a,s;return vt(Ce({sets:e.sets,queries:null!==(s=null===(a=e.queries)||void 0===a?void 0:a.filter((e=>h(e)||x(e))))&&void 0!==s?s:[],selection:e.selection&&E(e.selection)?e.selection:void 0,combinations:t.cs.v},{compress:n?"yes":"no"}),e,void 0,r)}(e,t,!0,n);delete o.$schema;const l=Le.a.compressToEncodedURIComponent(JSON.stringify(o));if(s.searchParams.set("p",l),s.toString().length<4096)return window.open(s.toString(),"_blank"),!0;s.searchParams.delete("p");const i=window.open(s.toString(),"_blank");return null==i||i.addEventListener("load",(()=>{null==i||i.postMessage(r,s.origin)})),!1}function Et(...e){return e.filter(Boolean).join(" ")}function kt(e){return`upset-${Math.random().toString(36).slice(4)}`}function Ct(e){return null!=e&&!Array.isArray(e)}function Ot(e,t){const n=d(e,t);return e=>n(e.elems).intersection}function Mt(e,t){if(!e)return At;if("function"==typeof e)return e;if(Array.isArray(e))return Ot(e,t);const n=e;if(n.overlap)return n.overlap.bind(n);const r=Ot(n.elems,t);return e=>e.overlap?e.overlap(n):r(e)}function Nt(e){var t;return Array.isArray(e)?`Array(${e.length})`:"function"==typeof e?"?":null===(t=e)||void 0===t?void 0:t.name}function At(){return 0}function Lt(e){return null==e?10:e.endsWith("pt")?Math.floor(4/3*Number.parseInt(e,10)):Number.parseInt(e,10)}function jt(e){return"linear"===e?me:"log"===e?ge:e}function qt(e){return Array.isArray(e)}function zt(e,t,n,r,a,s,o,l,i,c,u,d,m,y,f){var p;const h=jt(r),g="band"===(x=a)?ae:x;var x;const b=qt(t)?t:W(e,Object.assign({toElemKey:d},Ke,t)),v=g(b.map(u),n.cs.w,n.padding),$=b.reduce(((e,t)=>Math.max(e,t.cardinality)),0),w=null!=f?f:$,S=w>$?0:s,E=h(w,[n.cs.h,S],{orientation:"vertical",fontSizeHint:i}),k=e=>Math.floor(s/1.4*.7*e.length),C=e=>k(E.tickFormat()(e)),O=e.reduce(((e,t)=>Math.max(e,t.cardinality)),0),M=null!=y?y:O,N=C(M);let A=C(w);for(const T of c){if(!T.scale)continue;const e=T.scale.ticks(3),t=T.scale.tickFormat();for(const n of e){const e="number"==typeof n?t(n):null!==(p=n.label)&&void 0!==p?p:t(n.value),r=k(e);r>A&&(A=r)}}const L=M>O?0:N,j=h(M,[n.sets.w,L],{orientation:"horizontal",fontSizeHint:i}),q=e.map(u),z=g(q.slice().reverse(),n.sets.h,n.padding),I=Math.min(z.bandwidth(),v.bandwidth())/2*o,_=Math.max(2,Math.min(z.bandwidth(),v.bandwidth())/2*l);return{id:m||kt(),r:I,triangleSize:_,sets:{v:e,keys:q,rv:e.slice().reverse(),x:j,xAxisWidth:n.sets.w-L,y:e=>z(u(e)),max:M,bandWidth:z.bandwidth(),cy:z.bandwidth()/2+n.cs.h,format:j.tickFormat(),labelOffset:s+9+2},cs:{v:b,keys:b.map(u),x:e=>v(u(e)),max:w,y:E,yAxisWidth:n.cs.h-S,cx:v.bandwidth()/2,bandWidth:v.bandwidth(),format:E.tickFormat(),has:(e,t)=>{const n=u(t);return Array.from(e.sets).some((e=>u(e)===n))},labelOffset:A+9+6},toKey:u,toElemKey:d}}function It({transform:e,styleId:t,exportButtons:n,exportChart:r}){if(!n)return null;let a=0;const s=[];return!0!==n&&!1===n.svg||(a+=26,s.push(c.a.createElement("g",{key:"svg",className:`exportButton-${t}`,onClick:r,"data-type":"svg",transform:`translate(-${a}, 0)`},c.a.createElement("title",null,"Download SVG Image"),c.a.createElement("rect",{y:-9,width:26,height:11,rx:2,ry:2}),c.a.createElement("text",{className:`exportTextStyle-${t}`,x:13},"SVG"))),a+=2),!0!==n&&!1===n.png||(a+=26,s.push(c.a.createElement("g",{key:"png",className:`exportButton-${t}`,onClick:r,"data-type":"png",transform:`translate(-${a}, 0)`},c.a.createElement("title",null,"Download PNG Image"),c.a.createElement("rect",{y:-9,width:26,height:11,rx:2,ry:2}),c.a.createElement("text",{className:`exportTextStyle-${t}`,x:13},"PNG"))),a+=2),!0!==n&&!1===n.vega||(a+=34,s.push(c.a.createElement("g",{key:"vega",className:`exportButton-${t}`,onClick:r,"data-type":"vega",transform:`translate(-${a}, 0)`},c.a.createElement("title",null,"Download VEGA-Lite Specification"),c.a.createElement("rect",{y:-9,width:34,height:11,rx:2,ry:2}),c.a.createElement("text",{className:`exportTextStyle-${t}`,x:17},"VEGA"))),a+=2),!0!==n&&!1===n.dump||(a+=34,s.push(c.a.createElement("g",{key:"dump",className:`exportButton-${t}`,onClick:r,"data-type":"dump",transform:`translate(-${a}, 0)`},c.a.createElement("title",null,"Download UpSet.js JSON Dump"),c.a.createElement("rect",{y:-9,width:34,height:11,rx:2,ry:2}),c.a.createElement("text",{className:`exportTextStyle-${t}`,x:17},"DUMP"))),a+=2),!0!==n&&!1===n.share||(a+=42,s.push(c.a.createElement("g",{key:"share",className:`exportButton-${t}`,onClick:r,"data-type":"share",transform:`translate(-${a}, 0)`},c.a.createElement("title",null,"Open a shareable URL"),c.a.createElement("rect",{y:-9,width:42,height:11,rx:2,ry:2}),c.a.createElement("text",{className:`exportTextStyle-${t}`,x:21},"SHARE"))),a+=2),c.a.createElement("g",{className:`exportButtons-${t}`,transform:e},s)}const _t=c.a.memo((function({queries:e,x:t,style:n,data:r}){return c.a.createElement("text",{transform:`translate(${t},4)`,style:n.styles.legend,className:Et(`legendTextStyle-${n.id}`,n.classNames.legend)},e.map(((e,t)=>{let n=null;return x(e)?n=e.set.cardinality:h(e)&&(n=e.elems instanceof Set?e.elems.size:e.elems.length),c.a.createElement(c.a.Fragment,{key:e.name},c.a.createElement("tspan",{className:`fillQ${t}-${r.id}`},"  \u2b24 "),c.a.createElement("tspan",null,e.name,null!=n?`: ${r.sets.format(n)}`:""))})))})),Tt=c.a.memo((function({pos:e,spacing:t,tickSizeInner:n,orient:r,name:a,style:s}){const o="top"===r||"left"===r?-1:1;return c.a.createElement("g",{transform:`translate(0, ${e+.5})`},a&&c.a.createElement("text",{x:o*t,dy:"0.32em",className:Et(`axisTextStyle-${s.id}`,"right"===r?`startText-${s.id}`:`endText-${s.id}`,s.classNames.axisTick),style:s.styles.axisTick},a),c.a.createElement("line",{x2:o*n,className:`axisLine-${s.id}`}))})),Bt=c.a.memo((function({pos:e,name:t,spacing:n,orient:r,tickSizeInner:a,style:s}){const o="top"===r||"left"===r?-1:1;return c.a.createElement("g",{transform:`translate(${e+.5}, 0)`},t&&c.a.createElement("text",{y:o*n,dy:"top"===r?"0em":"0.71em",className:Et(`axisTextStyle-${s.id}`,s.classNames.axisTick),style:s.styles.axisTick},t),c.a.createElement("line",{y2:o*a,className:`axisLine-${s.id}`}))}));function Ft({scale:e,orient:t,tickSizeInner:n=6,tickSizeOuter:r=6,tickPadding:a=3,size:s,start:o,style:l,transform:i}){const u=Math.max(n,0)+a,d=o,m=s,y="top"===t||"left"===t?-1:1,f="left"===t||"right"===t?Tt:Bt,p=e.ticks().map((e=>"number"==typeof e?{value:e,label:String(e)}:e));return c.a.createElement("g",{transform:i},p.map((r=>c.a.createElement(f,{key:r.value,pos:e(r.value),name:r.label,spacing:u,tickSizeInner:n,orient:t,style:l}))),c.a.createElement("path",{className:`axisLine-${l.id}`,d:"left"===t||"right"===t?r?`M${y*r},${d}H0.5V${m}H${y*r}`:`M0.5,${d}V${m}`:r?`M${d},${y*r}V0.5H${m}V${y*r}`:`M${d},0.5H${m}`}))}const Kt=c.a.memo((function({width:e,text:t,dy:n,x:r,style:a,className:s}){const o=Object(i.useRef)(null),[l,u]=Object(i.useState)("string"==typeof t?[t]:[]);return Object(i.useLayoutEffect)((()=>{u("string"==typeof t?[t]:[])}),[t]),Object(i.useLayoutEffect)((()=>{if(!o.current||o.current.childElementCount>0||"string"!=typeof t)return;const n=o.current.getComputedTextLength(),r=[];let a=e,s=0;const l=o.current.getStartPositionOfChar(0);for(;n>a;){l.x=a;const n=o.current.getCharNumAtPosition(l),i=t.lastIndexOf(" ",n);if(i<s)break;r.push(t.slice(s,i+1));s=i+1,a=o.current.getEndPositionOfChar(i+1).x+e}r.push(t.slice(s)),u(r)}),[o,t,e]),t?c.a.createElement("tspan",{ref:o,dy:n,style:a,x:r,className:s},l.length>1?l.map(((e,t)=>c.a.createElement("tspan",{key:e,x:0,dy:t>0?"1.2em":n},e))):t):null}));var Ht=c.a.memo((function({width:e,descriptionWidth:t=e,style:n}){return n.title||n.description?c.a.createElement("text",null,c.a.createElement(Kt,{text:n.title,width:e,dy:"10px",className:Et(`titleTextStyle-${n.id}`,n.classNames.title),style:n.styles.title}),c.a.createElement(Kt,{x:0,width:t,dy:n.title?"2em":"10px",text:n.description,className:Et(`descTextStyle-${n.id}`,n.classNames.description),style:n.styles.description})):null}));function Pt(){}function Rt(e){return e?(t,n)=>function(r){return e.call(this,t,r.nativeEvent,n.map((e=>e.createOnHandlerData?e.createOnHandlerData(t):null)))}:Pt}function Dt(e,t){let n=0,r=0;return a=>{let s=0;return"before"===a.position?(n+=a.size+t,s=-n):(s=e+r+t,r+=a.size+t),s}}function Wt(e,t,n="fill"){return t?e?Object.assign({[n]:t},e):t?{[n]:t}:void 0:e}var Ut=c.a.memo((function({size:e,style:t,data:n}){const r=Dt(e.sets.w+e.labels.w+e.cs.w,e.sets.addonPadding),a=Dt(e.cs.h+e.sets.h,e.cs.addonPadding),s="auto"===t.cs.offset?n.cs.labelOffset:t.cs.offset,o="auto"===t.sets.offset?n.sets.labelOffset:t.sets.offset;return c.a.createElement("g",null,c.a.createElement(Ht,{style:t,width:e.cs.x-s-20}),c.a.createElement("g",{transform:`translate(${e.cs.x},${e.cs.y})`,"data-upset":"csaxis"},c.a.createElement(Ft,{scale:n.cs.y,orient:"left",size:e.cs.h,start:e.cs.h-n.cs.yAxisWidth,style:t}),c.a.createElement("line",{x1:0,x2:e.cs.w,y1:e.cs.h+1,y2:e.cs.h+1,className:`axisLine-${t.id}`}),c.a.createElement("text",{className:Et(`cChartTextStyle-${t.id}`,t.classNames.chartLabel),style:t.styles.chartLabel,transform:`translate(${-s}, ${e.cs.h/2})rotate(-90)`},t.cs.name),e.cs.addons.map((e=>{const n=a(e),r=c.a.createElement("text",{key:e.name,className:Et(`cChartTextStyle-${t.id}`,t.classNames.chartLabel),style:t.styles.chartLabel,transform:`translate(${-s}, ${n+e.size/2})rotate(-90)`},e.name);return e.scale?c.a.createElement(c.a.Fragment,{key:e.name},c.a.createElement(Ft,{scale:e.scale,orient:"left",size:e.size,start:0,style:t,transform:`translate(0,${n})`}),r):r}))),c.a.createElement("g",{transform:`translate(${e.sets.x},${e.sets.y})`,"data-upset":"setaxis"},c.a.createElement(Ft,{scale:n.sets.x,orient:"bottom",size:e.sets.w,start:e.sets.w-n.sets.xAxisWidth,transform:`translate(0, ${e.sets.h})`,style:t}),c.a.createElement("text",{className:Et(`sChartTextStyle-${t.id}`,t.classNames.chartLabel),style:t.styles.chartLabel,transform:`translate(${e.sets.w/2}, ${e.sets.h+o})`},t.sets.name),e.sets.addons.map((n=>{const a=r(n),s=c.a.createElement("text",{key:n.name,className:Et(`sChartTextStyle-${t.id}`,t.classNames.chartLabel),style:t.styles.chartLabel,transform:`translate(${a+n.size/2}, ${e.sets.h+o})`},n.name);return n.scale?c.a.createElement(c.a.Fragment,{key:n.name},c.a.createElement(Ft,{scale:n.scale,orient:"bottom",size:n.size,start:0,transform:`translate(${a}, ${e.sets.h})`,style:t}),s):s}))))}));const Vt=c.a.memo((function({cx:e,r:t,cy:n,name:r,className:a,style:s,fill:o}){return c.a.createElement("circle",{r:t,cx:e,cy:n,className:a,style:Wt(s,o)},r&&c.a.createElement("title",null,r))}));function Qt(e,t,n){const r=[n(e)];for(let a=0;a<We.length&&e>t;a++)e-=t,r.push(n(e));return r}const Gt=c.a.memo((function({d:e,h:t,className:n,data:r,size:a,style:s,children:o}){const l=Qt(e.cardinality,r.cs.max,r.cs.y),i=Dt(a.cs.h+a.sets.h,a.cs.addonPadding);return c.a.createElement("g",{transform:`translate(${r.cs.x(e)}, 0)`,onMouseEnter:t.onMouseEnter(e,a.cs.addons),onMouseLeave:t.onMouseLeave,onClick:t.onClick(e,a.cs.addons),onContextMenu:t.onContextMenu(e,a.cs.addons),onMouseMove:t.onMouseMove(e,a.cs.addons),className:n,"data-cardinality":e.cardinality},s.tooltips&&c.a.createElement("title",null,e.name,": ",r.cs.format(e.cardinality)),c.a.createElement("rect",{y:-a.cs.before,width:r.cs.bandWidth,height:a.sets.h+a.cs.h+a.cs.before+a.cs.after,className:`hoverBar-${s.id}`}),l.map(((t,n)=>{const o=n>0?Math.floor(r.cs.bandWidth*We[n-1]):0;return c.a.createElement("rect",{key:n,x:o,y:t,height:a.cs.h-t,width:r.cs.bandWidth-2*o,className:Et(`fillPrimary-${s.id}`,n<l.length-1&&`fillOverflow${l.length-1-n}-${s.id}`,s.classNames.bar),style:Wt(s.styles.bar,e.color)})})),c.a.createElement("text",{y:l[0]-s.barLabelOffset,x:r.cs.bandWidth/2,style:s.styles.barLabel,className:Et(`cBarTextStyle-${s.id}`,s.classNames.barLabel)},r.cs.format(e.cardinality)),c.a.createElement("text",{y:-s.barLabelOffset-a.cs.before,x:r.cs.bandWidth/2,style:s.styles.barLabel,className:Et(`hoverBarTextStyle-${s.id}`,s.classNames.barLabel)},e.name),r.sets.v.map(((t,n)=>r.cs.has(e,t)?null:c.a.createElement(Vt,{key:r.sets.keys[n],r:r.r,cx:r.cs.cx,cy:r.sets.y(t)+r.sets.cy,name:s.tooltips?e.name:"",style:s.styles.dot,fill:void 0,className:Et(`fillNotMember-${s.id}`,s.classNames.dot)}))),e.sets.size>1&&c.a.createElement("line",{x1:r.cs.cx,y1:r.sets.y(r.sets.v.find((t=>r.cs.has(e,t))))+r.sets.cy-(r.r-1),x2:r.cs.cx,y2:r.sets.y(r.sets.rv.find((t=>r.cs.has(e,t))))+r.sets.cy+(r.r-1),style:e.color?{stroke:e.color}:void 0,className:`upsetLine-${r.id}`}),r.sets.v.map(((t,n)=>{var a;return r.cs.has(e,t)?c.a.createElement(Vt,{key:r.sets.keys[n],r:r.r,cx:r.cs.cx,cy:r.sets.y(t)+r.sets.cy,name:s.tooltips?t.name:"",style:s.styles.dot,fill:null!==(a=t.color)&&void 0!==a?a:e.color,className:Et(`fillPrimary-${s.id}`,s.classNames.dot)}):null})),a.cs.addons.map((t=>c.a.createElement("g",{key:t.name,transform:`translate(0,${i(t)})`},t.render({set:e,width:r.cs.bandWidth,height:t.size,theme:s.theme})))),o)})),Jt=c.a.memo((function({d:e,i:t,h:n,className:r,size:a,data:s,style:o,children:l}){const i=Qt(e.cardinality,s.sets.max,s.sets.x),u=Dt(a.sets.w+a.labels.w+a.cs.w,a.sets.addonPadding),d="center"===o.setLabelAlignment?a.labels.w/2:"left"===o.setLabelAlignment?2:a.labels.w-2;return c.a.createElement("g",{transform:`translate(0, ${s.sets.y(e)})`,onMouseEnter:n.onMouseEnter(e,a.sets.addons),onMouseLeave:n.onMouseLeave,onClick:n.onClick(e,a.sets.addons),onContextMenu:n.onContextMenu(e,a.sets.addons),onMouseMove:n.onMouseMove(e,a.sets.addons),className:r,"data-cardinality":e.cardinality},o.tooltips&&c.a.createElement("title",null,e.name,": ",s.sets.format(e.cardinality)),c.a.createElement("rect",{x:-a.sets.before,width:a.sets.w+a.labels.w+a.cs.w+a.sets.after,height:s.sets.bandWidth,className:`hoverBar-${o.id}`}),t%2==1&&c.a.createElement("rect",{x:a.sets.w,width:a.labels.w+a.cs.w+a.sets.after,height:s.sets.bandWidth,className:`fillAlternating-${o.id}`}),i.map(((t,n)=>{const r=n>0?Math.floor(s.sets.bandWidth*We[n-1]):0;return c.a.createElement("rect",{key:n,x:t,y:r,width:a.sets.w-t,height:s.sets.bandWidth-2*r,className:Et(`fillPrimary-${o.id}`,n<i.length-1&&`fillOverflow${i.length-1-n}-${o.id}`,o.classNames.bar),style:Wt(o.styles.bar,e.color)})})),c.a.createElement("text",{x:i[0],dx:-o.barLabelOffset,y:s.sets.bandWidth/2,style:o.styles.barLabel,className:Et(`sBarTextStyle-${o.id}`,o.classNames.barLabel)},s.sets.format(e.cardinality)),c.a.createElement("text",{x:a.sets.w+d,y:s.sets.bandWidth/2,className:Et(`setTextStyle-${o.id}`,o.classNames.setLabel),style:o.styles.setLabel,clipPath:`url(#clip-${a.id})`},e.name),a.sets.addons.map((t=>c.a.createElement("g",{key:t.name,transform:`translate(${u(t)},0)`},t.render({set:e,width:t.size,height:s.sets.bandWidth,theme:o.theme})))),l)})),Yt=c.a.memo((function({data:e,size:t,style:n,h:r,setChildrenFactory:a,combinationChildrenFactory:s}){return c.a.createElement("g",{className:r.hasClick?`clickAble-${n.id}`:void 0},c.a.createElement("g",{transform:`translate(${t.sets.x},${t.sets.y})`,"data-upset":"sets"},e.sets.v.map(((s,o)=>c.a.createElement(Jt,{key:e.sets.keys[o],d:s,i:o,h:r,className:r.hasClick||r.hasHover?`interactive-${n.id}`:void 0,data:e,style:n,size:t},a&&a(s))))),c.a.createElement("g",{transform:`translate(${t.cs.x},${t.cs.y})`,"data-upset":"cs"},e.cs.v.map(((a,o)=>c.a.createElement(Gt,{key:e.cs.keys[o],d:a,h:r,className:r.hasClick||r.hasHover?`interactive-${n.id}`:void 0,data:e,style:n,size:t},s&&s(a))))))}));function Zt({data:e,size:t,style:n,elemOverlap:r,secondary:a,tooltip:s,suffix:o,transform:l,empty:i,combinationAddons:u}){const d=e.cs.bandWidth,m=t.cs.h+t.sets.h,y=t.cs.h,f=Et(`fill${o}`,!s&&`pnone-${n.id}`,n.classNames.bar);return c.a.createElement("g",{transform:l,"data-upset":a?"cs-q":"cs-s"},e.cs.v.map(((o,l)=>{const p=e.cs.x(o),h=e.cs.keys[l];if(i&&!a)return c.a.createElement("rect",{key:h,x:p,y:y,height:0,width:d,className:f,style:Wt(n.styles.bar,n.selectionColor?void 0:o.color)},s&&c.a.createElement("title",null));const g=r(o);if(0===g)return null;const x=Qt(g,e.cs.max,e.cs.y),b=s&&c.a.createElement("title",null,`${o.name} \u2229 ${s}: ${g}`),v=a?c.a.createElement("path",{key:h,transform:`translate(${p}, ${x[0]})`,d:`M0,-1 l${d},0 l0,2 l${-d},0 L-${e.triangleSize},-${e.triangleSize} L-${e.triangleSize},${e.triangleSize} Z`,className:f,"data-i":l,"data-cardinality":g,style:Wt(void 0,n.selectionColor?void 0:o.color)},b):x.map(((t,r)=>{const a=r>0?Math.floor(e.cs.bandWidth*We[r-1]):0;return c.a.createElement("rect",{key:r,x:p+a,y:t,height:y-t,width:d-2*a,"data-i":r>0?null:l,"data-cardinality":r>0?null:g,className:Et(f,r<x.length-1&&`fillOverflow${x.length-1-r}-${n.id}`),style:Wt(n.styles.bar,n.selectionColor?void 0:o.color)},b)})),$=Dt(m,t.cs.addonPadding),w=u.map((e=>{const t=$(e),r=e.render({set:o,width:d,height:e.size,theme:n.theme});return r?c.a.createElement("g",{key:e.name,transform:`translate(${p},${t})`},r):null})).filter(Boolean);return 0===w.length?v:c.a.createElement("g",{key:h},v,w)})))}function Xt({data:e,size:t,style:n,elemOverlap:r,suffix:a,secondary:s,empty:o,tooltip:l,setAddons:i,transform:u}){const d=t.sets.w,m=t.sets.w+t.labels.w+t.cs.w,y=e.sets.bandWidth,f=Et(`fill${a}`,!l&&` pnone-${n.id}`,n.classNames.bar);return c.a.createElement("g",{transform:u,"data-upset":s?"sets-q":"sets-s"},e.sets.v.map(((a,u)=>{const p=e.sets.y(a),h=e.sets.keys[u];if(o&&!s)return c.a.createElement("rect",{key:h,x:d,y:p,width:0,height:y,className:f,style:Wt(n.styles.bar,n.selectionColor?void 0:a.color)},n.tooltips&&l&&c.a.createElement("title",null));const g=r(a);if(0===g)return null;const x=Qt(g,e.sets.max,e.sets.x),b=n.tooltips&&l&&c.a.createElement("title",null,`${a.name} \u2229 ${l}: ${g}`),v=s?c.a.createElement("path",{key:h,transform:`translate(${x[0]}, ${p+y})`,d:`M1,0 l0,${-y} l-2,0 l0,${y} L-${e.triangleSize},${e.triangleSize} L${e.triangleSize},${e.triangleSize} Z`,"data-i":u,"data-cardinality":g,className:f,style:Wt(void 0,n.selectionColor?void 0:a.color)},b):x.map(((t,r)=>{const s=r>0?Math.floor(e.sets.bandWidth*We[r-1]):0;return c.a.createElement("rect",{key:r,"data-i":r>0?null:u,"data-cardinality":r>0?null:g,x:t,y:p+s,width:d-t,height:y-2*s,className:Et(f,r<x.length-1&&`fillOverflow${x.length-1-r}-${n.id}`),style:Wt(n.styles.bar,n.selectionColor?void 0:a.color)},b)})),$=Dt(m,t.sets.addonPadding),w=i.map((e=>{const t=$(e),r=e.render({set:a,width:e.size,height:y,theme:n.theme});return r?c.a.createElement("g",{key:e.name,transform:`translate(${t},${p})`},r):null})).filter(Boolean);return 0===w.length?v:c.a.createElement("g",{key:h},v,w)})))}const en=[];var tn=c.a.memo((function({size:e,data:t,style:n,hasHover:r,secondary:a,queries:s}){const o=e.sets.addons.some((e=>null!=e.renderQuery))||e.cs.addons.some((e=>null!=e.renderQuery)),l=Object(i.useMemo)((()=>s.map((e=>Object.assign(Object.assign({},e),{overlap:b(e,"intersection",t.toElemKey),elemOverlap:o?v(e,"intersection",t.toElemKey):null})))),[s,o,t.toElemKey]);function u(e,t,n,r,a){return Object.assign(Object.assign({},e),{render:s=>{const o=r(s.set);return e.renderQuery?e.renderQuery(Object.assign({query:t,overlap:o,index:n,secondary:a},s)):null}})}return c.a.createElement("g",{className:r&&!a?`pnone-${n.id}`:void 0},c.a.createElement("g",{transform:`translate(${e.sets.x},${e.sets.y})`},l.map(((s,o)=>c.a.createElement(Xt,{key:s.name,data:t,size:e,style:n,elemOverlap:s.overlap,suffix:`Q${o}-${t.id}`,secondary:a||o>0,tooltip:r&&!(a||o>0)?void 0:s.name,setAddons:0===e.sets.addons.length?en:e.sets.addons.map(((e,t)=>u(e,s,t,s.elemOverlap,a||t>0)))})))),c.a.createElement("g",{transform:`translate(${e.cs.x},${e.cs.y})`},l.map(((s,o)=>c.a.createElement(Zt,{key:s.name,data:t,size:e,style:n,elemOverlap:s.overlap,suffix:`Q${o}-${t.id}`,secondary:a||o>0,tooltip:r&&!(a||o>0)?void 0:s.name,combinationAddons:0===e.cs.addons.length?en:e.cs.addons.map(((e,t)=>u(e,s,t,s.elemOverlap,a||t>0)))})))))}));function nn({data:e,size:t,style:n,selection:r}){if(!r||"set"!==r.type||!e.sets.keys.includes(e.toKey(r)))return null;const a=r;return c.a.createElement("rect",{y:e.sets.y(a),width:t.labels.w+t.cs.w+t.sets.after,height:e.sets.bandWidth,className:`selectionHint-${n.id}`})}function rn({data:e,size:t,style:n,selection:r}){const a=e.sets.bandWidth/2,s=e.cs.cx,o=e.r,l=t.sets.h+t.sets.after,i=e.cs.bandWidth;if(!r||"set"===r.type||!e.cs)return null;const u=r,d=e.cs.keys.indexOf(e.toKey(u));return d<0?null:c.a.createElement("g",{transform:`translate(${t.labels.w+e.cs.x(u)}, 0)`,"data-upset":"cs-ss","data-i":d},c.a.createElement("rect",{width:i,height:l,className:`selectionHint-${n.id}`}),u.sets.size>1&&c.a.createElement("line",{x1:s,y1:e.sets.y(e.sets.v.find((t=>e.cs.has(u,t))))+a-(e.r-1),x2:s,y2:e.sets.y(e.sets.rv.find((t=>e.cs.has(u,t))))+a+(e.r-1),className:`upsetSelectionLine-${e.id}`,style:Wt(void 0,n.selectionColor?void 0:u.color,"stroke")}),e.sets.v.filter((t=>e.cs.has(u,t))).map((t=>c.a.createElement(Vt,{key:e.toKey(t),r:1.1*o,cx:s,cy:e.sets.y(t)+a,name:n.tooltips?t.name:"",className:Et(`fillSelection-${n.id}`,`pnone-${n.id}`,n.classNames.dot),style:Wt(n.styles.dot,n.selectionColor?void 0:t.color)}))))}const an=[];function sn({size:e,data:t,style:n,selection:r,hasHover:a}){const s=n.emptySelection,o=Mt(r,t.toElemKey),l=Nt(r),i=e.sets.addons.some((e=>null!=e.renderSelection))||e.cs.addons.some((e=>null!=e.renderSelection)),u=r&&"function"!=typeof r&&i?function(e,t){const n=y(e,t);return e=>n(e.elems).intersection}(Array.isArray(r)?r:r.elems,t.toElemKey):null;function d(e){return Object.assign(Object.assign({},e),{render:t=>{const a=u?u(t.set):null;return e.renderSelection?e.renderSelection(Object.assign({selection:r,selectionColor:n.selectionColor||t.set.color||"orange",overlap:a},t)):null}})}return c.a.createElement("g",{className:a?`pnone-${n.id}`:void 0},(r||s)&&c.a.createElement(Zt,{data:t,size:e,style:n,transform:`translate(${e.cs.x},${e.cs.y})`,empty:s&&!r,elemOverlap:o,suffix:`Selection-${n.id}`,tooltip:a?void 0:l,combinationAddons:0===e.cs.addons.length?an:e.cs.addons.map(d)}),(r||s)&&c.a.createElement(Xt,{data:t,size:e,style:n,transform:`translate(${e.sets.x},${e.sets.y})`,empty:s&&!r,elemOverlap:o,suffix:`Selection-${n.id}`,tooltip:a?void 0:l,setAddons:0===e.sets.addons.length?an:e.sets.addons.map(d)}),c.a.createElement("g",{transform:`translate(${e.labels.x},${e.labels.y})`},Ct(r)&&c.a.createElement(nn,{data:t,size:e,style:n,selection:r}),Ct(r)&&c.a.createElement(rn,{data:t,size:e,style:n,selection:r})))}function on(e,t="font-size"){return e?`${t}: ${e};`:""}function ln(e,t,n,r){const a=[];t.hasSelectionColor&&a.push(`fill: ${t.hasSelectionColor};`);const s=null!=t.hasSelectionOpacity&&t.hasSelectionOpacity>=0;return s&&a.push(`fill-opacity: ${t.hasSelectionOpacity};`),{p:on,root:`\n  .root-${e} {\n    ${on(n,"font-family")}\n  }\n  `,text:`\n  .titleTextStyle-${e} {\n    fill: ${t.textColor};\n    ${on(r.title)}\n  }\n  .descTextStyle-${e} {\n    fill: ${t.textColor};\n    ${on(r.description)}\n  }\n\n  .legendTextStyle-${e} {\n    fill: ${t.textColor};\n    ${on(r.legend)}\n    text-anchor: middle;\n    dominant-baseline: hanging;\n    pointer-events: none;\n  }\n  `,hasSFill:a.join(" "),hasSStroke:a.join(" ").replace("fill:","stroke:").replace("fill-","stroke-"),fill:`\n  .fillPrimary-${e} { fill: ${t.color}; fill-opacity: ${t.opacity}; }\n  .fillOverflow1-${e} { fill-opacity: ${t.opacity*De[0]}; }\n  .fillOverflow2-${e} { fill-opacity: ${t.opacity*De[1]}; }\n  ${a.length>0?`.root-${e}[data-selection] .fillPrimary-${e} { ${a.join(" ")} }`:""}\n  ${s?`\n      .root-${e}[data-selection] .fillOverflow1-${e} { fill-opacity: ${t.opacity*De[0]}; }\n      .root-${e}[data-selection] .fillOverflow2-${e} { fill-opacity: ${t.opacity*De[1]}; }`:""}\n  ${t.selectionColor?`.fillSelection-${e} { fill: ${t.selectionColor}; }`:""}\n  .fillTransparent-${e} { fill: transparent; }\n\n  .selectionHint-${e} {\n    fill: transparent;\n    pointer-events: none;\n    ${on(t.selectionColor,"stroke")}\n  }\n  .clickAble-${e} {\n    cursor: pointer;\n  }\n\n  .startText-${e} {\n    text-anchor: start;\n  }\n  .endText-${e} {\n    text-anchor: end;\n  }\n  .pnone-${e} {\n    pointer-events: none;\n  }`,export:`\n  .exportTextStyle-${e} {\n    fill: ${t.textColor};\n    ${on(r.exportLabel)}\n  }\n  .exportButtons-${e} {\n    text-anchor: middle;\n  }\n  .exportButton-${e} {\n    cursor: pointer;\n    opacity: 0.5;\n  }\n  .exportButton-${e}:hover {\n    opacity: 1;\n  }\n  .exportButton-${e} > rect {\n    fill: none;\n    stroke: ${t.textColor};\n  }\n  `}}function cn(e){const t=e.onClick;return Object(i.useMemo)((()=>({hasClick:null!=t,hasHover:null!=e.onHover,onClick:Rt(t),onMouseEnter:Rt(e.onHover),onContextMenu:Rt(e.onContextMenu),onMouseLeave:e.onHover?t=>e.onHover(null,t.nativeEvent,[]):void 0,onMouseMove:Rt(e.onMouseMove),reset:e=>t?t(null,e.nativeEvent,[]):null})),[t,e.onHover,e.onContextMenu,e.onMouseMove])}const un=c.a.forwardRef((function(e,t){var n;const r=it(e),{selection:a=null,queries:s=[],fontSizes:o}=r,l=Object(i.useMemo)((()=>r.id?r.id:kt((r.fontFamily,o.axisTick,o.barLabel,o.chartLabel,o.legend,o.setLabel,o.title,o.exportLabel,o.description,r.textColor,r.hoverHintColor,r.color,r.hasSelectionColor,r.selectionColor,r.notMemberColor,r.alternatingBackgroundColor,r.opacity,r.hasSelectionOpacity))),[r.id,r.fontFamily,o.axisTick,o.barLabel,o.chartLabel,o.legend,o.setLabel,o.title,o.exportLabel,o.description,r.textColor,r.hoverHintColor,r.color,r.hasSelectionColor,r.selectionColor,r.notMemberColor,r.alternatingBackgroundColor,r.opacity,r.hasSelectionOpacity]),u=Object(i.useMemo)((()=>function(e,t,n,r,a,s,o,l,i,c,u,d,m,y,f){return{theme:e,styles:t,classNames:n,cs:{name:r,offset:a},sets:{name:s,offset:o},emptySelection:u,id:l,barLabelOffset:i,selectionColor:c,title:d,description:m,tooltips:y,setLabelAlignment:f}}(r.theme,r.styles,r.classNames,r.combinationName,r.combinationNameAxisOffset,r.setName,r.setNameAxisOffset,l,r.barLabelOffset,r.selectionColor,r.emptySelection,r.title,r.description,r.tooltips,r.setLabelAlignment)),[r.theme,r.styles,r.classNames,r.barLabelOffset,r.combinationName,r.combinationNameAxisOffset,r.setName,r.setNameAxisOffset,l,r.selectionColor,r.emptySelection,r.title,r.description,r.tooltips,r.setLabelAlignment]),d=Object(i.useMemo)((()=>function(e,t,n,r,a,s,o,l,i,c,u){const d=o.reduce(((e,t)=>e+("before"===t.position?t.size+c:0)),0),m=o.reduce(((e,t)=>e+("before"!==t.position?t.size+c:0)),0),y=l.reduce(((e,t)=>e+("before"===t.position?t.size+c:0)),0),f=l.reduce(((e,t)=>e+("before"!==t.position?t.size+c:0)),0),p=t-2*n-20-f-y,h=e-2*n-d-m,g=a[0]>1?a[0]:h*a[0],x=a[1]>1?a[1]:h*a[1],b=s[0]>1?s[0]:p*s[0];return{id:i||kt(),cs:{before:y,after:f,x:d+g+x,y:y,w:h-g-x,h:b,addons:l,addonPadding:u},labels:{x:d+g,y:y+b,w:x,h:p-b},sets:{before:d,after:m,x:d,y:y+b,w:g,h:p-b,addons:o,addonPadding:c},padding:r,legend:{x:e/2},margin:n,w:e,h:t}}(r.width,r.height,r.padding,r.barPadding,r.widthRatios,r.heightRatios,r.setAddons,r.combinationAddons,r.id,r.setAddonPadding,r.combinationAddonPadding)),[r.width,r.height,r.padding,r.barPadding,r.widthRatios,r.heightRatios,r.setAddons,r.combinationAddons,r.id,r.setAddonPadding,r.combinationAddonPadding]),m=Object(i.useMemo)((()=>zt(r.sets,r.combinations,d,r.numericScale,r.bandScale,r.barLabelOffset+Lt(o.barLabel),r.dotPadding,r.barPadding,Lt(o.axisTick),r.combinationAddons,r.toKey,r.toElemKey,r.id,r.setMaxScale,r.combinationMaxScale)),[r.sets,r.combinations,d,r.numericScale,r.bandScale,r.barLabelOffset,o.barLabel,r.dotPadding,r.barPadding,o.axisTick,r.combinationAddons,r.toKey,r.toElemKey,r.id,r.setMaxScale,r.combinationMaxScale]),y=ln(l,r,r.fontFamily,o),f=cn(r),p=`\n  ${y.root}\n  ${y.text}\n\n  .axisTextStyle-${l} {\n    fill: ${r.textColor};\n    ${y.p(o.axisTick)}\n    text-anchor: middle;\n  }\n  .barTextStyle-${l} {\n    fill: ${r.textColor};\n    ${y.p(o.barLabel)}\n  }\n  .cBarTextStyle-${l} {\n    fill: ${r.textColor};\n    ${y.p(o.barLabel)}\n    text-anchor: middle;\n  }\n  .sBarTextStyle-${l} {\n    fill: ${r.textColor};\n    ${y.p(o.barLabel)}\n    text-anchor: end;\n    dominant-baseline: central;\n  }\n  .hoverBarTextStyle-${l} {\n    ${y.p(o.barLabel)}\n    fill: ${r.hoverHintColor};\n    display: none;\n    text-anchor: middle;\n  }\n  .setTextStyle-${l} {\n    fill: ${r.textColor};\n    ${y.p(o.setLabel)}\n    text-anchor: ${function(e){var t;return null!==(t={left:"start",center:"middle",right:"end"}[e])&&void 0!==t?t:"middle"}(r.setLabelAlignment)};\n    dominant-baseline: central;\n  }\n  .cChartTextStyle-${l} {\n    fill: ${r.textColor};\n    ${y.p(o.chartLabel)}\n    text-anchor: middle;\n  }\n  .sChartTextStyle-${l} {\n    fill: ${r.textColor};\n    ${y.p(o.chartLabel)}\n    text-anchor: middle;\n    dominant-baseline: hanging;\n  }\n\n  ${y.fill}\n  .fillNotMember-${l} { fill: ${r.notMemberColor}; }\n  .fillAlternating-${l} { fill: ${r.alternatingBackgroundColor||"transparent"}; }\n\n  .axisLine-${l} {\n    fill: none;\n    stroke: ${r.textColor};\n  }\n  .hoverBar-${l} {\n    fill: transparent;\n  }\n\n  .interactive-${l}:hover > .hoverBar-${l} {\n    stroke: ${r.hoverHintColor};\n  }\n  .interactive-${l}:hover > .hoverBarTextStyle-${l} {\n    display: unset;\n  }\n\n  ${y.export}\n\n  .upsetLine-${m.id} {\n    stroke-width: ${.6*m.r};\n    stroke: ${r.color};\n    stroke-opacity: ${r.opacity};\n  }\n  ${y.hasSStroke?`.root-${l}[data-selection] .upsetLine-${m.id} { ${y.hasSStroke} }`:""}\n\n  .upsetSelectionLine-${m.id} {\n    stroke-width: ${.6*m.r*1.1};\n    ${y.p(r.selectionColor,"stroke")}\n    pointer-events: none;\n  }\n\n  ${s.map(((e,t)=>`.fillQ${t}-${m.id} {\n    fill: ${e.color};\n  }`)).join("\n")}\n  `,h=Object(i.useCallback)((t=>{const n=t.currentTarget.closest("svg"),r=t.currentTarget.dataset.type||"png";switch(r){case"vega":ht(n);break;case"dump":wt(n,e,m);break;case"share":St(e,m);break;case"svg":case"png":ft(n,{type:r,toRemove:`.${t.currentTarget.getAttribute("class")}`})}}),[m,e]),g=Nt(a);return c.a.createElement("svg",{id:r.id,className:Et(`root-${l}`,r.className),style:r.style,width:r.width,height:r.height,ref:t,viewBox:`0 0 ${r.width} ${r.height}`,"data-theme":null!==(n=r.theme)&&void 0!==n?n:"light","data-selection":g||void 0},c.a.createElement("style",null,p),c.a.createElement("defs",null,c.a.createElement("clipPath",{id:`clip-${d.id}`},c.a.createElement("rect",{x:d.sets.w,y:0,width:d.labels.w,height:d.sets.h}))),r.queryLegend&&c.a.createElement(_t,{queries:s,x:d.legend.x,style:u,data:m}),c.a.createElement(It,{transform:`translate(${d.w-2},${d.h-3})`,styleId:l,exportButtons:r.exportButtons,exportChart:h}),c.a.createElement("g",{transform:`translate(${r.padding},${r.padding})`,"data-upset":"base"},r.onClick&&c.a.createElement("rect",{width:d.cs.x,height:d.sets.y,onClick:f.reset,className:`fillTransparent-${l}`}),c.a.createElement(Ut,{size:d,style:u,data:m}),c.a.createElement(Yt,{size:d,style:u,data:m,h:f,setChildrenFactory:r.setChildrenFactory,combinationChildrenFactory:r.combinationChildrenFactory}),c.a.createElement(sn,{size:d,style:u,data:m,hasHover:f.hasHover,selection:a}),c.a.createElement(tn,{size:d,style:u,data:m,hasHover:f.hasHover,queries:s,secondary:null!=r.onHover||null!=a})),e.children)}));function dn({rules:e,style:t,size:n,p:r,data:a,tRef:s,children:o,exportChart:l,selectionName:i,h:u}){var d,m;return c.a.createElement("svg",{id:r.id,className:Et(`root-${t.id}`,r.className),style:r.style,width:r.width,height:r.height,ref:s,viewBox:`0 0 ${r.width} ${r.height}`,"data-theme":null!==(d=r.theme)&&void 0!==d?d:"light","data-selection":i||void 0},c.a.createElement("style",null,e),r.onClick&&c.a.createElement("rect",{width:n.w,height:n.h,onClick:u.reset,className:`fillTransparent-${t.id}`}),r.queryLegend&&c.a.createElement(_t,{queries:null!==(m=r.queries)&&void 0!==m?m:[],x:n.legend.x,style:t,data:a}),c.a.createElement(It,{transform:`translate(${n.w-2},${n.h-3})`,styleId:t.id,exportButtons:r.exportButtons,exportChart:l}),c.a.createElement("g",{transform:`translate(${r.padding},${r.padding})`,"data-upset":"base"},o),r.children)}function mn(e){var t;if(e.v>=1||e.v<=0)return null;const n=Math.round(10*e.v)/100;return c.a.createElement("defs",null,c.a.createElement("pattern",{id:e.id,width:"1",height:"0.1",patternContentUnits:"objectBoundingBox",patternTransform:`rotate(${null!==(t=e.rotate)&&void 0!==t?t:0})`},e.bgFilled&&c.a.createElement("rect",{x:"0",y:"0",width:"1",height:"0.1",style:{fill:e.bgFill},className:`fillPrimary-${e.styleId}`}),c.a.createElement("rect",{x:"0",y:"0",width:"1",height:n,className:`fill${e.suffix}`,style:e.fill?{fill:e.fill}:void 0})))}function yn({slice:e,d:t,i:n,data:r,style:a,elemOverlap:s,selected:o,selectionName:l,h:i,queries:u,size:d,fill:m,qs:y}){const f=function(e,t,n=0){return e.path?e.path:`M ${e.x1-n},${e.y1-n} ${e.arcs.map((e=>{const r=t[e.ref].l,a=Ze(r)?r.rx:r.r,s=Ze(r)?r.ry:r.r,o=Ze(r)?r.rotation:0;return`A ${a-n} ${s-n} ${o} ${e.large?1:0} ${e.sweep?1:0} ${e.x2-n} ${e.y2-n}`})).join(" ")}`}(e,r.sets.d),p=function(e,t){return e.text.x===t.cx?0:e.text.x>t.cx?e.text.y<=t.cy?60:-60:e.text.y<=t.cy?-60:60}(e,d.area),h=s?s(t):0,g=h===t.cardinality&&t.cardinality>0||o,x=Et(`arc-${a.id}`,0===h&&!o&&`${m?"fillPrimary":"arcP"}-${a.id}`,g&&`fillSelection-${a.id}`,a.classNames.set),b=`upset-${a.id}-${n}`,v=null!=s||null!=i.onMouseLeave,$=y.map((e=>e(t))),{title:w,tooltip:S}=function(e,t,n,r,a,s,o,l){const i=o.format(e.cardinality),u=n?`${e.name} \u2229 ${n}`:e.name,d=n?`${o.format(t)}/${i}`:i;if(0===a.length)return{tooltip:`${u}: ${d}`,title:"set"===e.type?c.a.createElement(c.a.Fragment,null,c.a.createElement("tspan",{dy:"-0.6em"},e.name),c.a.createElement("tspan",{x:l,dy:"1.2em"},d)):d};if(1===a.length&&!r&&!n)return{tooltip:`${e.name} \u2229 ${s[0].name}: ${o.format(a[0])}/${i}`,title:"set"===e.type?c.a.createElement(c.a.Fragment,null,c.a.createElement("tspan",{dy:"-0.6em"},e.name),c.a.createElement("tspan",{x:l,dy:"1.2em"},`${o.format(a[0])}/${i}`)):`${o.format(a[0])}/${i}`};const m=c.a.createElement("tspan",{x:l,dy:"1.2em"},s.map(((e,t)=>c.a.createElement(c.a.Fragment,{key:e.name},c.a.createElement("tspan",{className:`fillQ${t}-${o.id}`},"\u2b24"),c.a.createElement("tspan",null,` ${o.format(a[t])}/${i}${t<s.length-1?" ":""}`)))));return{tooltip:`${u}: ${d}\n${s.map(((t,n)=>`${e.name} \u2229 ${t.name}: ${o.format(a[n])}/${i}`)).join("\n")}`,title:"set"===e.type?c.a.createElement(c.a.Fragment,null,c.a.createElement("tspan",{dy:"-1.2em"},e.name),c.a.createElement("tspan",{x:l,dy:"1.2em"},d),m):c.a.createElement(c.a.Fragment,null,c.a.createElement("tspan",{dy:"-0.6em"},d),m)}}(t,h,l,v,$,u,r,e.text.x);return c.a.createElement("g",null,c.a.createElement(mn,{id:b,v:0===h?0:h/t.cardinality,suffix:`Selection-${a.id}`,rotate:p,bgFill:t.color,bgFilled:null!=t.color||m,fill:a.selectionColor?void 0:t.color,styleId:a.id}),c.a.createElement("path",{onMouseEnter:i.onMouseEnter(t,[]),onMouseLeave:i.onMouseLeave,onClick:i.onClick(t,[]),onContextMenu:i.onContextMenu(t,[]),onMouseMove:i.onMouseMove(t,[]),d:f,className:x,style:Wt(a.styles.set,h>0&&h<t.cardinality?`url(#${b})`:g&&a.selectionColor?void 0:t.color)},a.tooltips&&c.a.createElement("title",null,S)),c.a.createElement("text",{x:e.text.x,y:e.text.y,className:Et(`${"set"===t.type?"set":"value"}TextStyle-${a.id}`,`pnone-${a.id}`)},w))}function fn(e,t,n,r,a,s,o,l){const i=e.length>r.maxSets?e.slice(0,r.maxSets):e,{cs:c,setKeys:u,csKeys:d}=function(e,t,n,r={min:1}){const a=e.map(t);let s=[];if(qt(n)){const a=new Map(n.map((e=>[Array.from(e.sets).map(t).sort().join("#"),e])));s=W(e.map((e=>({type:"set",cardinality:0,elems:[],name:e.name,s:e}))),Object.assign({type:"distinctIntersection",empty:!0,order:["degree:asc","group:asc"]},r)).map((e=>{const n=Array.from(e.sets).map((e=>t(e.s))).sort().join("#");return a.has(n)?a.get(n):{name:e.name,cardinality:0,degree:e.degree,elems:[],sets:new Set(Array.from(e.sets).map((e=>e.s))),type:"distinctIntersection"}}))}else s=W(e,Object.assign({type:"distinctIntersection",empty:!0,order:["degree:asc","group:asc"]},r,null!=n?n:{}));const o=s.map(t);return{cs:s,setKeys:a,csKeys:o}}(i,s,t),m=r.compute(i,c,n.area.w,n.area.h);return{id:l||kt(),sets:{d:m.sets.map(((e,t)=>({v:i[t],l:e,key:u[t]}))),v:i,format:a},format:a,cs:{d:m.intersections.map(((e,t)=>({v:c[t],l:e,key:d[t]}))),v:c,has:(e,t)=>{const n=s(t);return Array.from(e.sets).some((e=>s(e)===n))}},toKey:s,toElemKey:o}}function pn(e,t,n,r){const a=t-2*n,s=e-2*n,o=Math.min(s,a)/2;return{id:r||kt(),legend:{x:e/2},area:{w:s,h:a,cx:s/2,cy:a/2,r:o},margin:n,w:e,h:t}}function hn(e,t,n){return Object(i.useCallback)((r=>{const a=r.currentTarget.closest("svg"),s=r.currentTarget.dataset.type||"png";switch(s){case"dump":wt(a,t,e,n);break;case"share":St(t,e,n);break;case"svg":case"png":ft(a,{type:s,toRemove:`.${r.currentTarget.getAttribute("class")}`})}}),[e,t,n])}const gn=c.a.forwardRef((function(e,t){const n=ut(e),{selection:r=null,queries:a=[],fontSizes:s}=n,o=function(e){const{selection:t=null,queries:n=[],fontSizes:r}=e,a=Object(i.useMemo)((()=>e.id?e.id:kt((e.fontFamily,r.valueLabel,r.legend,r.setLabel,r.title,r.exportLabel,r.description,e.textColor,e.color,e.hasSelectionColor,e.strokeColor,e.valueTextColor,e.selectionColor,e.opacity,e.hasSelectionOpacity))),[e.id,e.fontFamily,r.valueLabel,r.legend,r.setLabel,r.title,r.exportLabel,r.description,e.textColor,e.color,e.hasSelectionColor,e.strokeColor,e.valueTextColor,e.selectionColor,e.opacity,e.hasSelectionOpacity]),s=Object(i.useMemo)((()=>function(e,t,n,r,a,s,o,l){return{theme:e,styles:t,classNames:n,id:r,selectionColor:a,title:s,description:o,tooltips:l}}(e.theme,e.styles,e.classNames,a,e.selectionColor,e.title,e.description,e.tooltips)),[e.theme,e.styles,e.classNames,a,e.selectionColor,e.title,e.description,e.tooltips]),o=Object(i.useMemo)((()=>pn(e.width,e.height,e.padding,e.id)),[e.width,e.height,e.padding,e.id]),l=cn(e),u=null!=t&&Ct(t)?e.toKey(t):null,d=null==t?null:Mt(t,e.toElemKey),m=Nt(t),y=c.a.useMemo((()=>n.map((t=>b(t,"intersection",e.toElemKey)))),[n,e.toElemKey]),f=ln(a,e,e.fontFamily,r);return{styleId:a,size:o,style:s,h:l,selectionKey:u,selectionName:m,selectionOverlap:d,qs:y,rulesHelper:f}}(n),{size:l,style:u,rulesHelper:d}=o,m=Object(i.useMemo)((()=>fn(n.sets,n.combinations,l,n.layout,n.valueFormat,n.toKey,n.toElemKey,n.id)),[n.sets,n.combinations,l,n.valueFormat,n.toKey,n.toElemKey,n.id,n.layout]),y=`\n  ${d.root}\n  ${d.text}\n\n  .valueTextStyle-${u.id} {\n    fill: ${n.valueTextColor};\n    ${d.p(s.valueLabel)}\n    text-anchor: middle;\n    dominant-baseline: central;\n  }\n  .setTextStyle-${u.id} {\n    fill: ${n.textColor};\n    ${d.p(s.setLabel)}\n    text-anchor: middle;\n  }\n\n  .topText-${u.id} {\n    dominant-baseline: hanging;\n  }\n\n  .stroke-circle-${u.id} {\n    fill: none;\n    stroke: ${n.strokeColor};\n  }\n\n  .arc-${u.id} {\n    fill-rule: evenodd;\n  }\n  .arcP-${u.id} {\n    fill: transparent;\n    fill-opacity: ${n.opacity};\n  }\n  ${d.fill}\n  ${d.export}\n\n  ${d.hasSFill?`.root-${u.id}[data-selection] .arcP-${u.id} { ${d.hasSFill} }`:""}\n\n  ${a.map(((e,t)=>`.fillQ${t}-${m.id} {\n    fill: ${e.color};\n  }`)).join("\n")}\n  `,f=hn(m,n,"venn"),p=m.sets.d.reduce(((e,t)=>Math.min(e,t.l.cx-(Ze(t.l)?t.l.rx:t.l.r))),l.area.w);return c.a.createElement(dn,{rules:y,style:u,selectionName:o.selectionName,size:l,p:n,data:m,tRef:t,h:o.h,exportChart:f},c.a.createElement(Ht,{style:u,width:p}),c.a.createElement("g",{className:Et(n.onClick&&`clickAble-${u.id}`)},m.sets.d.map(((e,t)=>c.a.createElement("text",{key:e.key,x:e.l.text.x,y:e.l.text.y,onClick:o.h.onClick(m.sets.v[t],[]),onMouseEnter:o.h.onMouseEnter(m.sets.v[t],[]),onMouseLeave:o.h.onMouseLeave,onContextMenu:o.h.onContextMenu(m.sets.v[t],[]),onMouseMove:o.h.onMouseMove(m.sets.v[t],[]),className:Et(`setTextStyle-${u.id}`,`${e.l.align}Text-${u.id}`,`${e.l.verticalAlign}Text-${u.id}`)},m.sets.v[t].name)))),c.a.createElement("g",{className:Et(n.onClick&&`clickAble-${u.id}`)},m.cs.d.map(((e,t)=>c.a.createElement(yn,{key:e.key,d:e.v,i:t,slice:e.l,size:l,style:u,data:m,fill:n.filled,h:o.h,selectionName:o.selectionName,selected:o.selectionKey===e.key||w(r)&&m.cs.has(e.v,r),elemOverlap:o.selectionOverlap,queries:a,qs:o.qs})))),c.a.createElement("g",null,m.sets.d.map((e=>Ze(e.l)?c.a.createElement("ellipse",{key:e.key,rx:e.l.rx,ry:e.l.ry,transform:`translate(${e.l.cx},${e.l.cy})rotate(${e.l.rotation})`,className:Et(`stroke-circle-${u.id}`,u.classNames.set),style:u.styles.set}):c.a.createElement("circle",{key:e.key,cx:e.l.cx,cy:e.l.cy,r:e.l.r,className:Et(`stroke-circle-${u.id}`,u.classNames.set),style:u.styles.set})))))})),xn=c.a.memo((function({d:e,i:t,h:n,className:r,data:a,style:s}){const o=a.cs.l[t],l=a.cs.scale(e.cardinality),i=(a.cell-a.cs.bandWidth)/2;return c.a.createElement("g",{transform:`translate(${o.x}, ${o.y})`,onMouseEnter:n.onMouseEnter(e,[]),onMouseLeave:n.onMouseLeave,onClick:n.onClick(e,[]),onContextMenu:n.onContextMenu(e,[]),onMouseMove:n.onMouseMove(e,[]),className:r,"data-cardinality":e.cardinality},s.tooltips&&c.a.createElement("title",null,e.name,": ",a.sets.format(e.cardinality)),c.a.createElement("rect",{width:a.cell,height:a.cell,className:`fillTransparent-${s.id}`}),c.a.createElement("rect",{x:i,y:l,height:a.cell-l,width:a.cs.bandWidth,className:Et(`fillPrimary-${s.id}`,s.classNames.bar),style:Wt(s.styles.bar,e.color)}),c.a.createElement("text",{y:l-s.barLabelOffset,x:a.cell/2,style:s.styles.barLabel,className:Et(`barTextStyle-${s.id}`,s.classNames.barLabel)},a.sets.format(e.cardinality)))}));function bn(e,t,n,r){const a=e*t,s=e*n;return[r.x.map((t=>`M ${t*e},0 l0,${a}`)),r.y.map((t=>`M 0,${t*e} l${s},0`))].flat().join(" ")}var vn=c.a.memo((function({data:e,style:t,size:n,h:r}){const a="auto"===t.cs.offset?e.cs.labelOffset:t.cs.offset;return c.a.createElement("g",null,c.a.createElement("g",{transform:`translate(${n.w-a-2}, ${n.h-e.cell-50})`},c.a.createElement(Ft,{scale:e.cs.scale,orient:"left",size:e.cell,start:e.cs.barLabelFontSize,style:t}),c.a.createElement("text",{className:Et(`cChartTextStyle-${t.id}`,t.classNames.chartLabel),style:t.styles.chartLabel,transform:`translate(${-a}, ${e.cell})rotate(-90)`},t.cs.name)),c.a.createElement("g",null,e.sets.l.map(((n,a)=>{const s=e.sets.v[a],o=s.name;return c.a.createElement("g",{key:o,onClick:r.onClick(s,[]),onMouseEnter:r.onMouseEnter(s,[]),onMouseLeave:r.onMouseLeave,onContextMenu:r.onContextMenu(s,[]),onMouseMove:r.onMouseMove(s,[]),className:Et(r.hasClick&&`clickAble-${t.id}`)},n.text.map(((e,r)=>c.a.createElement("text",{key:r,transform:`translate(${e.x},${e.y})${n.hor?"":"rotate(-90)"}`,className:Et(`setTextStyle-${t.id}`)},o))))})),e.sets.l.map(((n,r)=>{const a=e.sets.v[r].name;return c.a.createElement(c.a.Fragment,{key:a},n.notText.map(((e,r)=>c.a.createElement("text",{key:r,transform:`translate(${e.x},${e.y})${n.hor?"":"rotate(-90)"}`,className:Et(`setTextStyle-${t.id}`,`not-${t.id}`)},a))))}))),c.a.createElement("g",{className:Et(r.hasClick&&`clickAble-${t.id}`)},e.cs.v.map(((n,a)=>c.a.createElement(xn,{key:e.cs.keys[a],d:n,i:a,h:r,style:t,data:e})))),c.a.createElement("g",{transform:`translate(${e.grid.x}, ${e.grid.y})`},e.grid.levels.map(((n,r)=>c.a.createElement("path",{key:r,d:bn(e.cell,e.grid.vCells,e.grid.hCells,n),className:`gridStyle-${t.id} gridStyle-${t.id}-${r}`})))))}));function $n({data:e,style:t,elemOverlap:n,secondary:r,tooltip:a,suffix:s,empty:o}){const l=e.cs.bandWidth,i=(e.cell-l)/2,u=Et(`fill${s}`,!a&&`pnone-${t.id}`,t.classNames.bar);return c.a.createElement("g",{"data-upset":r?"cs-q":"cs-s"},e.cs.v.map(((s,d)=>{const m=e.cs.l[d],y=e.cs.keys[d];if(o&&!r)return c.a.createElement("rect",{key:y,x:m.x+i,y:m.y+e.cell,height:0,width:l,className:u,style:Wt(t.styles.bar,t.selectionColor?void 0:s.color)},a&&c.a.createElement("title",null));const f=n(s);if(0===f)return null;const p=e.cs.scale(f),h=a&&c.a.createElement("title",null,`${s.name} \u2229 ${a}: ${f}`);return r?c.a.createElement("path",{key:y,transform:`translate(${m.x+i}, ${m.y+p})`,d:`M0,-1 l${l},0 l0,2 l${-l},0 L-${e.triangleSize},-${e.triangleSize} L-${e.triangleSize},${e.triangleSize} Z`,className:u,"data-i":d,"data-cardinality":f,style:Wt(void 0,t.selectionColor?void 0:s.color)},h):c.a.createElement("rect",{key:y,x:m.x+i,y:m.y+p,height:e.cell-p,"data-i":d,"data-cardinality":f,width:l,className:u,style:Wt(t.styles.bar,t.selectionColor?void 0:s.color)},h)})))}var wn=c.a.memo((function({data:e,style:t,hasHover:n,secondary:r,queries:a}){const s=Object(i.useMemo)((()=>a.map((t=>Object.assign(Object.assign({},t),{overlap:b(t,"intersection",e.toElemKey)})))),[a,e.toElemKey]);return c.a.createElement("g",{className:n&&!r?`pnone-${t.id}`:void 0},s.map(((a,s)=>c.a.createElement($n,{key:a.name,data:e,style:t,elemOverlap:a.overlap,suffix:`Q${s}-${e.id}`,secondary:r||s>0,tooltip:n&&!(r||s>0)?void 0:a.name}))))}));function Sn({data:e,style:t,selection:n,hasHover:r}){const a=t.emptySelection,s=Mt(n,e.toElemKey),o=Nt(n);return c.a.createElement("g",{className:r?`pnone-${t.id}`:void 0},(n||a)&&c.a.createElement($n,{data:e,style:t,empty:a&&!n,elemOverlap:s,suffix:`Selection-${t.id}`,tooltip:r?void 0:o}))}function En(e,t){return Array(e).fill(0).map(((e,n)=>t(n)))}function kn(e){const t=Array(Math.pow(2,e)).fill(0);En(e,(e=>{const n=Math.pow(2,e);for(let r=0;r<t.length;r+=n)t[r]++}));const n=En(Math.max(e,1),(()=>[]));return t.forEach(((e,t)=>{const r=Math.max(0,e-1);n[r].push(t)})),n[n.length-1].push(t.length),n}function Cn(e,t,n,r){const{xBefore:a,yBefore:s,cell:o,hCells:l,vCells:i,horizontalSets:c,verticalSets:u}=On(e.length,r),d=function(e,t){const{xOffset:n,yOffset:r,cell:a,xBefore:s,yBefore:o,hCells:l,vCells:i}=On(e,t),c=t.width-n,u=t.height-r;return En(e,(e=>{const d=Math.floor(e/2),m=e%2==0,y=Math.pow(2,d),f=(m?l:i)/y/2,p=m?s:o,h=[{v:!0,x:p+f*a*.5},{v:!1,x:p+f*a*1.5}];for(let t=1;t<=d;t++){const e=f*Math.pow(2,t)*a,n=h.length-1;h.push(...h.map(((t,r)=>({v:h[n-r].v,x:t.x+e}))))}const g=d%2==1,x=Math.floor(d/2);let b=0;if(g){b=(m?u:c)-t.labelHeight*(.5+x)}else{b=(m?r:n)+t.labelHeight*(.5+x)}return m?{hor:!0,span:f,text:h.filter((e=>e.v)).map((e=>({x:e.x,y:b}))),notText:h.filter((e=>!e.v)).map((e=>({x:e.x,y:b})))}:{hor:!1,span:f,text:h.filter((e=>e.v)).map((e=>({x:b,y:e.x}))),notText:h.filter((e=>!e.v)).map((e=>({x:b,y:e.x})))}}))}(e.length,r),m=function(e,t,n,r){return e.map(((e,a)=>{const s=Math.floor(a/2),o=a%2==0,l=Math.pow(2,s),i=(o?t:n)/l/2;return(t,[n,a])=>r(t,e)?[n,a]:i>1?o?[i-1-n+i,a]:[n,i-1-a+i]:o?[n+i,a]:[n,a+i]}))}(e,l,i,n),y=t.map((e=>{const[t,n]=m.reduceRight(((t,n)=>n(e,t)),[0,0]);return{x:a+t*o,y:s+n*o}})),f=kn(c),p=kn(u);return{s:d,c:y,cell:o,grid:{x:a,y:s,hCells:l,vCells:i,levels:f.map(((e,t)=>({x:e,y:t<p.length?p[t]:[]})))}}}function On(e,t){const n=Math.ceil(e/2),r=Math.floor(e/2),a=Math.pow(2,n),s=Math.pow(2,r),o=Math.floor(Math.min((t.width-t.labelHeight*r)/a,(t.height-t.labelHeight*n)/s)),l=(t.width-a*o-t.labelHeight*r)/2,i=(t.height-s*o-t.labelHeight*n)/2;return{xOffset:l,horizontalSets:n,yOffset:i,verticalSets:r,cell:o,xBefore:l+Math.ceil(r/2)*t.labelHeight,yBefore:i+Math.ceil(n/2)*t.labelHeight,hCells:a,vCells:s}}const Mn=c.a.forwardRef((function(e,t){const n=mt(e),{queries:r=[],fontSizes:a,selection:s=null}=n,o=Object(i.useMemo)((()=>n.id?n.id:kt((n.fontFamily,a.axisTick,a.barLabel,a.legend,a.setLabel,a.title,a.exportLabel,a.description,n.textColor,n.color,n.hasSelectionColor,n.strokeColor,n.selectionColor,n.opacity,n.hasSelectionOpacity))),[n.id,n.fontFamily,a.axisTick,a.barLabel,a.legend,a.setLabel,a.title,a.exportLabel,a.description,n.textColor,n.color,n.hasSelectionColor,n.strokeColor,n.selectionColor,n.opacity,n.hasSelectionOpacity]),l=Object(i.useMemo)((()=>function(e,t,n,r,a,s,o,l,i,c,u,d){return{theme:e,styles:t,classNames:n,emptySelection:i,id:s,barLabelOffset:o,selectionColor:l,title:c,description:u,tooltips:d,cs:{name:r,offset:a}}}(n.theme,n.styles,n.classNames,n.combinationName,n.combinationNameAxisOffset,o,n.barLabelOffset,n.selectionColor,n.emptySelection,n.title,n.description,n.tooltips)),[n.theme,n.styles,n.classNames,n.combinationName,n.combinationNameAxisOffset,o,n.barLabelOffset,n.selectionColor,n.emptySelection,n.title,n.description,n.tooltips]),u=Object(i.useMemo)((()=>pn(n.width,n.height,n.padding,n.id)),[n.width,n.height,n.padding,n.id]),d=Object(i.useMemo)((()=>function(e,t,n,r,a,s,o,l,i,c,u,d){const m=jt(r),y=e.map(i),f=qt(t)?t:W(e,Object.assign({type:"distinctIntersection"},null!=t?t:{})),p=f.map(i),h=(e,t)=>{const n=i(t);return Array.from(e.sets).some((e=>i(e)===n))},g=Math.ceil(1.2*o),x=Cn(e,f,h,{width:n.area.w,height:n.area.h,labelHeight:g}),b=null!=d?d:f.reduce(((e,t)=>Math.max(e,t.cardinality)),0),v=m(b,[x.cell,a],{orientation:"vertical",fontSizeHint:l}),$=Math.round(x.cell*(1-s)),w=Math.min(Math.max(2,$/2*s),5),S=(E=b,Math.floor(a/1.4*.7*v.tickFormat()(E).length));var E;return{id:u||kt(),grid:x.grid,sets:{keys:y,l:x.s,v:e,labelHeight:g,format:v.tickFormat()},triangleSize:w,cell:x.cell,cs:{keys:p,l:x.c,v:f,barLabelFontSize:a,has:h,scale:v,bandWidth:$,labelOffset:S+9+6},toKey:i,toElemKey:c}}(n.sets,n.combinations,u,n.numericScale,n.barLabelOffset+Lt(a.barLabel),n.barPadding,Lt(a.setLabel),Lt(a.axisTick),n.toKey,n.toElemKey,n.id,n.combinationMaxScale)),[n.sets,n.combinations,u,n.numericScale,n.barLabelOffset,a.barLabel,n.barPadding,a.axisTick,a.setLabel,n.toKey,n.toElemKey,n.id,n.combinationMaxScale]),m=cn(n),y=Nt(s),f=ln(o,n,n.fontFamily,a),p=`\n  ${f.root}\n  ${f.text}\n\n  .axisTextStyle-${o} {\n    fill: ${n.textColor};\n    ${f.p(a.axisTick)}\n    text-anchor: end;\n  }\n  .barTextStyle-${o} {\n    fill: ${n.textColor};\n    ${f.p(a.barLabel)}\n    text-anchor: middle;\n  }\n  .setTextStyle-${l.id} {\n    fill: ${n.textColor};\n    ${f.p(a.setLabel)}\n    text-anchor: middle;\n    dominant-baseline: central;\n  }\n  .cChartTextStyle-${o} {\n    fill: ${n.textColor};\n    ${f.p(a.chartLabel)}\n  }\n\n  .not-${l.id} {\n    text-decoration: overline;\n  }\n\n  .axisLine-${o} {\n    fill: none;\n    stroke: ${n.textColor};\n  }\n\n  .gridStyle-${l.id} {\n    fill: none;\n    stroke: ${n.strokeColor};\n    stroke-linecap: round;\n  }\n  .gridStyle-${l.id}-1 {\n    stroke-width: 2;\n  }\n  .gridStyle-${l.id}-2 {\n    stroke-width: 3;\n  }\n\n  ${f.fill}\n  ${f.export}\n\n  ${r.map(((e,t)=>`.fillQ${t}-${d.id} {\n    fill: ${e.color};\n  }`)).join("\n")}\n  `,h=hn(d,n,"kmap"),g=d.sets.l.reduce(((e,t)=>Math.min(e,t.text[0].x-d.sets.labelHeight)),u.area.w);return c.a.createElement(dn,{rules:p,style:l,size:u,p:n,data:d,tRef:t,selectionName:y,h:m,exportChart:h},c.a.createElement(Ht,{style:l,width:g}),c.a.createElement(vn,{style:l,data:d,h:m,size:u}),c.a.createElement(Sn,{style:l,data:d,hasHover:m.hasHover,selection:s}),c.a.createElement(wn,{style:l,data:d,hasHover:m.hasHover,queries:r,secondary:m.hasHover||null!=s}))})),Nn="#F4F4F4",An="#A6A8AB",Ln="#E1E2E3";function jn(e){var t,n,r,a;const s=null!==(t=e.color)&&void 0!==t?t:An,o=null!==(n=e.secondaryColor)&&void 0!==n?n:Ln,l=Object.assign({},e),i=null!==(r=e.background)&&void 0!==r?r:Nn;return delete l.color,delete l.secondaryColor,delete l.background,i&&(l.style=Object.assign({background:i},null!==(a=l.style)&&void 0!==a?a:{})),{color:s,secondary:o,rest:l}}const qn=c.a.memo(c.a.forwardRef((function(e,t){const{color:n,secondary:r,rest:a}=jn(e),s=20,o=[10,20,35,60,65,80,90],l=[50,30,15];return c.a.createElement("svg",Object.assign({viewBox:"0 0 300 200",ref:t},a),o.map(((e,t)=>c.a.createElement("rect",{key:t,x:85+30*t,y:e,width:s,height:100-e,fill:n}))),l.map(((e,t)=>c.a.createElement("rect",{key:t,x:e,y:110+30*t,width:75-e,height:s,fill:n}))),o.map(((e,t)=>l.map(((e,a)=>{const s=a===2-t||3===t&&a>0||4===t&&1!==a||5===t&&a<2||6===t;return c.a.createElement("circle",{key:`${t}x${a}`,cx:85+30*t+10,cy:110+30*a+10,r:10,fill:s?n:r})})))),c.a.createElement("rect",{x:"182",y:"150",width:"6",height:"30",fill:n}),c.a.createElement("rect",{x:"212",y:"120",width:"6",height:"60",fill:n}),c.a.createElement("rect",{x:"242",y:"120",width:"6",height:"30",fill:n}),c.a.createElement("rect",{x:"272",y:"120",width:"6",height:"60",fill:n}))}))),zn=c.a.memo(c.a.forwardRef((function(e,t){const{color:n,secondary:r,rest:a}=jn(e),s=et(3,280,3180);return c.a.createElement("svg",Object.assign({viewBox:"0 0 300 200",ref:t},a),s.sets.map(((e,t)=>c.a.createElement("circle",{key:t,cx:e.cx,cy:e.cy+10,r:e.r,fill:r}))),s.sets.map(((e,t)=>c.a.createElement("circle",{key:t,cx:e.cx,cy:e.cy+10,r:e.r,stroke:n,fill:"none"}))))}))),In=c.a.memo(c.a.forwardRef((function(e,t){const{rest:n,color:r,secondary:a}=jn(e),{xBefore:s,yBefore:o,cell:l,hCells:i,vCells:u}=On(2,{width:270,height:170,labelHeight:20}),d=i*l,m=u*l;return c.a.createElement("svg",Object.assign({viewBox:"0 0 300 200",ref:t,fontFamily:"sans-serif"},n),c.a.createElement("g",{transform:`translate(${s+10},${o+10})`},c.a.createElement("text",{x:.5*l,y:-3,fill:r,textAnchor:"middle"},"A"),c.a.createElement("text",{x:1.5*l,y:-3,fill:r,textAnchor:"middle",style:{textDecoration:"overline"}},"A"),c.a.createElement("text",{x:-3,y:.5*l,fill:r,textAnchor:"end",dominantBaseline:"central"},"B"),c.a.createElement("text",{x:-3,y:1.5*l,fill:r,textAnchor:"end",dominantBaseline:"central",style:{textDecoration:"overline"}},"B"),c.a.createElement("rect",{x:.1*l,y:l*(1-.9),height:.9*l,width:.8*l,fill:a}),c.a.createElement("rect",{x:1.1*l,y:.5*l,height:.5*l,width:.8*l,fill:a}),c.a.createElement("rect",{x:.1*l,y:1.74*l,height:.26*l,width:.8*l,fill:a}),c.a.createElement("rect",{x:1.1*l,y:1.25*l,height:.75*l,width:.8*l,fill:a}),c.a.createElement("path",{d:`M0,0 l${d},0 l0,${m} l${-d},0 l0,${-m} M${d/2},0 l0,${m} M0,${m/2} l${d},0`,fill:"none",stroke:r})))}))),_n=1/180*Math.PI;function Tn(e,t,n,r){return{x:e+Math.cos(r*_n)*n,y:t+Math.sin(r*_n)*n}}function Bn(e,t){return{maxSets:1/0,compute(n,r,a,s){const o=r.map((e=>({sets:Array.from(e.sets).map((e=>e.name)),size:e.cardinality}))),l=e(o,Object.assign({},{width:a,height:s,distinct:!0},null!=t?t:{})),i=l.filter((e=>1===e.data.sets.length)),c=new Map(n.map(((e,t)=>[e.name,t]))),u=i.map((e=>e.circles[0])),d=function(e){const t=e.reduce(((e,t)=>e+t.x),0),n=e.reduce(((e,t)=>e+t.y),0);return{x:t/e.length,y:n/e.length}}(u),m=e=>({x2:e.p1.x,y2:e.p1.y,cx:e.circle.x,cy:e.circle.y,sweep:!0,large:e.width>e.circle.radius,ref:u.findIndex((t=>Math.abs(t.x-e.circle.x)<.05&&Math.abs(t.y-e.circle.y)<.05)),mode:"i"});return{sets:i.map((e=>{const t=e.circles[0],n=function(e,t){const n=e.x-t.x,r=e.y-t.y;return Math.atan2(r,n)/_n}(t,d);return{cx:t.x,cy:t.y,r:t.radius,align:n>90?"end":"start",verticalAlign:"bottom",text:Tn(t.x,t.y,1.1*t.radius,n)}})),intersections:l.map((e=>{const t=e.arcs,n={x:e.text.x,y:e.text.y};if(0===t.length)return{sets:e.data.sets.map((e=>c.get(e))),text:n,x1:0,y1:0,arcs:[]};if(1===t.length){const t=e.arcs[0].circle;return{sets:e.data.sets.map((e=>c.get(e))),text:n,x1:e.arcs[0].p2.x,y1:t.y-t.radius,arcs:[m(e.arcs[0]),Object.assign(m(e.arcs[0]),{y2:t.y-t.radius})],path:e.distinctPath||e.path}}return{sets:e.data.sets.map((e=>c.get(e))),text:n,x1:e.arcs[0].p2.x,y1:e.arcs[0].p2.y,arcs:e.arcs.map((e=>m(e))),path:e.distinctPath||e.path}}))}}}}var Fn=Object.freeze({__proto__:null,widthRatios:function(e){return null==e||Array.isArray(e)&&e.length>=2&&e.every((e=>"number"==typeof e))},heightRatios:function(e){return null==e||Array.isArray(e)&&e.length>=1&&e.every((e=>"number"==typeof e))},setLabelAlignment:function(e){return null==e||"left"===e||"center"===e||"right"===e},sets:function(e){return Array.isArray(e)&&e.every(w)},combinations:function(e){return null==e||Array.isArray(e)&&e.every(S)||k(e)},selection:function(e){return null==e||Array.isArray(e)||E(e)},onHover:function(e){return null==e||"function"==typeof e},onClick:function(e){return null==e||"function"==typeof e},onContextMenu:function(e){return null==e||"function"==typeof e},onMouseMove:function(e){return null==e||"function"==typeof e},queries:function(e){return!e||Array.isArray(e)&&e.every(C)},stringOrFalse:function(e){return null==e||"string"==typeof e||!1===e},theme:function(e){return null==e||"light"===e||"dark"===e||"vega"===e},classNames:function(e){return null==e||Object.keys(e).every((t=>Pe.includes(t)&&"string"==typeof e[t]))},fontSizes:function(e){return null==e||Object.keys(e).every((t=>He.includes(t)&&"string"==typeof e[t]))},numericScale:function(e){return null==e||"linear"===e||"log"===e||"function"==typeof e},bandScale:function(e){return null==e||"band"===e||"function"==typeof e},axisOffset:function(e){return null==e||"auto"===e||"number"==typeof e},style:function(e){return null==e||"object"==typeof e},styles:function(e){return null==e||Object.keys(e).every((e=>Pe.includes(e)))},exportButtons:function(e){return null==e||"boolean"==typeof e||Object.keys(e).every((t=>Re.includes(t)&&"boolean"==typeof e[t]))}}),Kn=un,Hn=n(292),Pn=n(148),Rn=n(195),Dn=n.n(Rn);function Wn(e){return Object.assign({theme:"light",title:"",description:""},at(e.theme),e)}function Un(e,t){if(g(e))return t=>e.overlap([t])>0;if(x(e)){const n=e.set.overlap;if(n)return e=>n([e])>0;if(t){const n=new Set(e.set.elems.map(t));return e=>n.has(e)}{const t=new Set(e.set.elems);return e=>t.has(e)}}if(h(e)){if(t){const n=new Set(Array.from(e.elems).map(t));return e=>n.has(e)}const n=new Set(e.elems);return e=>n.has(e)}return!1}function Vn(e,t){if(!e)return!1;if("function"==typeof e)return t=>e({type:"set",name:"S",cardinality:1,elems:[t]})>0;if(E(e)){const n=e.overlap;if(n)return e=>n([e])>0;if(t){const n=new Set(e.elems.map(t));return e=>n.has(e)}{const t=new Set(e.elems);return e=>t.has(e)}}if(Array.isArray(e)){if(t){const n=new Set(e.map(t));return e=>n.has(e)}const n=new Set(e);return e=>n.has(e)}return!1}function Qn(e){return!1!==e&&(()=>e)}function Gn(e,t="k"){return{test:`inSetStore(upset_signal, datum.${t})`,value:e}}function Jn(e="values",t="k"){return`countInSetStore(upset_signal, datum.${e}, '${t}')`}function Yn(e,t="values",n="k"){return`countInSetStore(upset_q${e}_signal, datum.${t}, '${n}')`}function Zn(e,t="k"){return(null!=e?e:[]).map(((e,n)=>({test:`inSetStore(upset_q${n}_signal, datum.${t})`,value:e.color})))}function Xn(e,t,n,r=!1){const a=Object(i.useRef)(null),s=Object(i.useRef)(n),o=Object(i.useCallback)((n=>(n.signals=n.signals||[],n.signals.push({name:"upset_signal",value:Qn(Vn(s.current,e))}),(null!=t?t:[]).forEach(((t,r)=>n.signals.push({name:`upset_q${r}_signal`,value:Qn(Un(t,e))}))),n)),[s,t,e]);Object(i.useLayoutEffect)((()=>{s.current=null!=n?n:null,a.current&&(a.current.signal("upset_signal",Vn(n,e)),(null!=t?t:[]).forEach(((t,n)=>a.current.signal(`upset_q${n}_signal`,Un(t,e)))),r&&!a.current._running&&a.current.resize().run())}),[a,n,t,r,e]);const l=Object(i.useCallback)((e=>{a.current=e}),[a]);return{viewRef:a,vegaProps:{patch:o,onNewView:l}}}function er(e,t,n){if(e.length!==t.length)return!1;if(n){const r=new Set(t.map(n));return e.every((e=>r.has(n(e))))}const r=new Set(t);return e.every((e=>r.has(e)))}function tr(e){return{name:"Vega Selection",type:"composite",cardinality:e.length,degree:0,elems:e,sets:new Set}}function nr(e,t){const n=t.signal(`${e}_tuple`);n&&Array.isArray(n.values)&&0!==n.values.length&&t.signal(`${e}_tuple`,null)}function rr(e,t,n,r,a,s){return(o,l)=>{if(!e.current)return;const i=l;if(!i||!i._vgsid_||0===i._vgsid_.length)return void r(null);const c=new Set(i._vgsid_),u=e.current.data(a).filter((e=>c.has(e._vgsid_))).map((e=>e[s]));if(0===u.length)return void r(null);if(t.current&&S(t.current)&&er(t.current.elems,u,n))return;const d=tr(u);r(d)}}function ar(e,t,n,r,a,s,{selectionName:o="select",transformedData:l="data_0",unitData:c="",elemField:u="e"}={}){const d=Object(i.useRef)(r),m=Object(i.useMemo)((()=>{if(!a&&!s)return;const e={};return a&&(e[o]=rr(t,d,n,a,l,u)),s&&(e[`${o}_hover`]=rr(t,d,n,s,l,u)),e}),[a,s,t,d,o,l,u,n]);Object(i.useLayoutEffect)((()=>{d.current=null!=r?r:null,t.current&&a&&(S(r)?function(e,t,n,r,a,s){const o=t.signal(`${e}_tuple`),l=t.data(r),i=new Set(n.elems),c=l.filter((e=>i.has(e[s]))).map((e=>e._vgsid_));if(er(o?o.values:[],c))return;const u=o?Object.assign({},o,{values:c}):{unit:a,fields:t.signal(`${e}_tuple_fields`,c)};t.signal(`${e}_tuple`,u)}(o,t.current,r,l,c,u):null==r&&nr(o,t.current))}),[t,r,o,a,l,c,u]);const y=Object(i.useMemo)((()=>Object.assign({},a?{[o]:{type:e,empty:"none"}}:{},s?{[`${o}_hover`]:{type:"single",empty:"none",on:"mouseover"}}:{})),[e,o,a,s]);return{signalListeners:m,hoverName:s?`${o}_hover`:null,selectionName:a?o:null,selection:y}}function sr(e){var t,n;const{title:r,description:a,selectionColor:s,color:o,theme:l}=Wn(e),{vAttr:u,iAttr:d,elems:m,width:y,height:f,orientation:p="vertical",actions:h,toElemKey:g}=e,x="horizontal"===p?"y":"x",b="horizontal"===p?"x":"y",v=(null!==(t=e.vLabel)&&void 0!==t?t:"function"==typeof u)?"v":u.toString(),$=(null!==(n=e.iLabel)&&void 0!==n?n:"function"==typeof d)?"i":d.toString(),w=Object(i.useMemo)((()=>{const e="function"==typeof u?u:e=>e[u],t="function"==typeof d?d:e=>e[d];return{table:m.map((n=>({e:n,v:e(n),i:t(n),k:g?g(n):n})))}}),[m,u,d,g]),{viewRef:S,vegaProps:E}=Xn(g,e.queries,e.selection,!0),{signalListeners:k,selection:C,selectionName:O,hoverName:M}=ar("multi",S,g,e.selection,e.onClick,e.onHover),N=Object(i.useMemo)((()=>({title:r,description:a,data:{name:"table"},selection:C,mark:{type:"bar",stroke:null,cursor:M?"pointer":void 0,tooltip:!0},encoding:{fill:{condition:[M&&{selection:M,value:s},O&&{selection:O,value:s},Gn(s),...Zn(e.queries)].filter(Boolean),value:o},[x]:{field:"i",type:"nominal",title:$,axis:{labelAngle:0}},[b]:{field:"v",type:"quantitative",title:v}}})),[$,v,r,a,s,o,e.queries,C,O,M,x,b]);return c.a.createElement(Hn.a,Object.assign({spec:N,signalListeners:k,width:y,height:f,data:w,theme:"dark"===l?"dark":void 0,actions:h},E))}function or(e,t,n){return null!=e&&E(e)&&"composite"===e.type&&"interval"===e.subType&&e.xAttr===t&&e.yAttr===n}function lr(e){return`[${Math.round(100*e[0])/100},${Math.round(100*e[1])/100}]`}function ir(e,t,n,r,a){return{name:`Vega Brush (${e}: ${lr(r)}, ${t}: ${lr(a)}`,type:"composite",subType:"interval",cardinality:n.length,degree:0,elems:n,sets:new Set,x:r,y:a,xAttr:e,yAttr:t}}function cr(e,t){return e===t||null!=e&&null!=t&&e[0]===t[0]&&e[1]===t[1]}function ur(e,t,n,r,a,s,o,{selectionName:l="select",transformedData:c="data_0",xField:u="x",yField:d="y",elemField:m="e"}={}){const y=Object(i.useRef)(t),f=Object(i.useMemo)((()=>{if(!s&&!o)return;const t={};return s&&(t[l]=Dn()(((t,a)=>{if(!e.current)return;const o=a;if(null==o[u])return void s(null);if(y.current&&or(y.current,n,r)&&(l=y.current,i=o[u],c=o[d],cr(l.x,i)&&cr(l.y,c)))return;var l,i,c;const f=e.current.data("table").filter((e=>e[u]>=o[u][0]&&e[u]<=o[u][1]&&e[d]>=o[d][0]&&e[d]<=o[d][1])).map((e=>e[m])),p=ir(n,r,f,o[u],o[d]);s(p)}),200)),o&&(t[`${l}_hover`]=rr(e,y,a,o,c,m)),t}),[l,s,o,a,e,n,r,y,c,u,d,m]);Object(i.useLayoutEffect)((()=>{y.current=null!=t?t:null,e.current&&s&&(or(t,n,r)?function(e,t,n,r,a){const s=t.signal(`${e}_${r}`),o=t.signal(`${e}_${a}`);s&&Array.isArray(s)&&cr(s,n.x)||t.signal(`${e}_${r}`,n.x);const l=[n.y[1],n.y[0]];o&&Array.isArray(o)&&cr(o,l)||t.signal(`${e}_${a}`,l)}(l,e.current,t,u,d):t||function(e,t,n,r){const a=t.signal(`${e}_${n}`),s=t.signal(`${e}_${r}`);a&&t.signal(`${e}_${n}`,null),s&&t.signal(`${e}_${r}`,null)}(l,e.current,u,d))}),[l,e,t,n,r,s,u,d]);const p=Object(i.useMemo)((()=>Object.assign({},s?{[l]:{type:"interval",empty:"none"}}:{},o?{[`${l}_hover`]:{type:"single",empty:"none",on:"mouseover"}}:{})),[l,s,o]);return{signalListeners:f,hoverName:o?`${l}_hover`:null,selectionName:s?l:null,selection:p}}function dr(e,t){return null!=e&&E(e)&&"composite"===e.type&&"aggregate"===e.subType&&e.attr===t}function mr(e,t,n,r){return{name:null!=r?r:`Vega Group ${e}: ${n.join(", ")}`,type:"composite",subType:"aggregate",cardinality:t.length,degree:0,elems:t,sets:new Set,groups:n,attr:e}}function yr(e,t,n,r,a,{selectionName:s="select",aggregatedData:o="data_0",unitData:l="layer_0",aggregateField:c="v",valuesField:u="values",elemField:d="e",nameGen:m}={}){const y=Object(i.useRef)(t),f=Object(i.useMemo)((()=>{if(!r&&!a)return;const t={},l=t=>(r,a)=>{if(!e.current)return;const s=a;if(!s||!s._vgsid_||0===s._vgsid_.length)return void t(null);const l=new Set(s._vgsid_),i=e.current.data(o).filter((e=>l.has(e._vgsid_))),f=i.map((e=>e[c]));if(y.current&&dr(y.current,n)&&er(y.current.groups,f))return;const p=i.map((e=>e[u]||[])).flat().map((e=>e[d])),h=mr(n,p,f,m?m(i):void 0);t(h)};return r&&(t[s]=l(r)),a&&(t[`${s}_hover`]=l(a)),t}),[r,a,e,n,y,s,o,d,c,u,m]);Object(i.useLayoutEffect)((()=>{y.current=null!=t?t:null,e.current&&r&&(dr(t,n)?function(e,t,n,r,a,s){const o=t.signal(`${e}_tuple`),l=t.data(r).filter((e=>n.groups.includes(e[s]))).map((e=>e._vgsid_));if(er(o&&o.values?o.values:[],l))return;const i=o?Object.assign({},o,{values:l}):{unit:a,fields:t.signal(`${e}_tuple_fields`),values:l};t.signal(`${e}_tuple`,i)}(s,e.current,t,o,l,c):null==t&&nr(s,e.current))}),[e,t,n,s,r,o,l,c]);const p=Object(i.useMemo)((()=>Object.assign({},r?{[s]:{type:"single",empty:"none"}}:{},a?{[`${s}_hover`]:{type:"single",empty:"none",on:"mouseover"}}:{})),[s,r,a]);return{signalListeners:f,hoverName:a?`${s}_hover`:null,selectionName:r?s:null,selection:p}}function fr(e,t,n,r,a,{selectionName:s="select",aggregatedData:o="data_1",unitData:l="layer_0",valueField:c="v",valuesField:u="values",elemField:d="e"}={}){const m=`bin_maxbins_10_${c}`,y=Object(i.useCallback)((e=>`Vega Bin ${n}: ${e.map((e=>`[${e[m]},${e[`${m}_end`]})`)).join(", ")}`),[m,n]);return yr(e,t,n,r,a,{selectionName:s,aggregatedData:o,unitData:l,valuesField:u,elemField:d,aggregateField:m,nameGen:y})}function pr(e){var t,n;const{title:r,description:a,selectionColor:s,color:o,theme:l}=Wn(e),{xAttr:u,yAttr:d,elems:m,width:y,height:f,actions:p,toElemKey:h}=e,g=(null!==(t=e.xLabel)&&void 0!==t?t:"function"==typeof u)?"x":u.toString(),x=(null!==(n=e.yLabel)&&void 0!==n?n:"function"==typeof d)?"y":d.toString(),b=Object(i.useMemo)((()=>{const e="function"==typeof u?u:e=>e[u],t="function"==typeof d?d:e=>e[d];return{table:m.map((n=>({e:n,x:e(n),y:t(n),k:h?h(n):n})))}}),[m,u,d,h]),{viewRef:v,vegaProps:$}=Xn(h,e.queries,e.selection),{signalListeners:w,selection:S,selectionName:E,hoverName:k}=ur(v,e.selection,g,x,h,e.onClick,e.onHover),C=Object(i.useMemo)((()=>({title:r,description:a,data:{name:"table"},selection:S,mark:{type:"point",stroke:null,cursor:k?"pointer":void 0,tooltip:!0},encoding:{fill:{condition:[k?[{selection:k,value:s}]:[],E?[{selection:E,value:s}]:[],Gn(s),Zn(e.queries)].flat(),value:o},x:{field:"x",type:"quantitative",title:g},y:{field:"y",type:"quantitative",title:x}}})),[g,x,r,a,s,o,e.queries,S,E,k]);return c.a.createElement(Hn.a,Object.assign({spec:C,signalListeners:w,width:y,height:f,data:b,theme:"dark"===l?"dark":void 0,actions:p},$))}function hr(e,t){return{transform:[{aggregate:[{op:"values",as:"values"}],groupby:["bin_maxbins_10_v","bin_maxbins_10_v_end"]}],mark:{type:"bar",tooltip:!1},encoding:{color:{value:t},x:{bin:!0,field:"v",type:"quantitative"},y:{datum:{signal:e},type:"quantitative",title:null},y2:{type:"quantitative",datum:0,title:null}}}}function gr(e){var t;const{title:n,description:r,selectionColor:a,color:s,theme:o}=Wn(e),{attr:l,elems:u,width:d,height:m,actions:y,toElemKey:f}=e,p=(null!==(t=e.label)&&void 0!==t?t:"function"==typeof l)?"v":l.toString(),h=Object(i.useMemo)((()=>{const e="function"==typeof l?l:e=>e[l];return{table:u.map((t=>({e:t,i:1,v:e(t),k:f?f(t):t})))}}),[u,l,f]),{viewRef:g,vegaProps:x}=Xn(f,e.queries,e.selection,!0),{selection:b,signalListeners:v,selectionName:$,hoverName:w}=fr(g,e.selection,p,e.onClick,e.onHover),S=Object(i.useMemo)((()=>{var t;return{title:n,description:r,data:{name:"table"},layer:[{selection:b,mark:{type:"bar",cursor:$||w?"pointer":void 0,tooltip:!0},encoding:{color:{condition:[w?[{selection:w,value:a}]:[],$?[{selection:$,value:a}]:[]].flat(),value:s},x:{bin:!0,field:"v",type:"quantitative",title:p},y:{aggregate:"sum",field:"i",type:"quantitative",title:"Count"}}},hr(Jn(),a),...(null!==(t=e.queries)&&void 0!==t?t:[]).map(((e,t)=>t>0||null!=w||null!=$?function(e,t){return{transform:[{aggregate:[{op:"values",as:"values"}],groupby:["bin_maxbins_10_v","bin_maxbins_10_v_end"]}],mark:{type:"point",shape:"triangle-right",tooltip:!1},encoding:{color:{value:t},x:{bin:!0,band:0,field:"v",type:"quantitative"},y:{datum:{signal:e},type:"quantitative"}}}}(Yn(t),e.color):hr(Yn(t),e.color)))],resolve:{scale:{y:"shared"}}}}),[p,n,r,a,s,e.queries,b,$,w]);return c.a.createElement(Hn.a,Object.assign({spec:S,width:d,height:m,data:h,signalListeners:v,theme:"dark"===o?"dark":void 0,actions:y},x))}function xr(e,t,n,r,a){return{mark:{type:"arc",tooltip:!1,innerRadius:a},encoding:Object.assign({theta:{field:"i_sum_start",type:"quantitative",title:null},theta2:{datum:{signal:`datum.i_sum_start + ${e}`},type:"quantitative",title:null}},n?{stroke:{value:t},color:{value:t},fillOpacity:{value:.3}}:{color:{value:t},stroke:{field:"v",type:"nominal",title:null,legend:null,scale:{scheme:"dark"===r?"dark2":"set2"}}})}}function br(e){var t;const{title:n,description:r,selectionColor:a,theme:s}=Wn(e),{attr:o,elems:l,width:u,height:d,innerRadius:m,actions:y,toElemKey:f}=e,p=(null!==(t=e.label)&&void 0!==t?t:"function"==typeof o)?"v":o.toString(),h=Object(i.useMemo)((()=>{const e="function"==typeof o?o:e=>e[o];return{table:l.map((t=>({e:t,i:1,v:e(t),k:f?f(t):t})))}}),[l,o,f]),{viewRef:g,vegaProps:x}=Xn(f,e.queries,e.selection,!0),{selection:b,signalListeners:v,selectionName:$,hoverName:w}=yr(g,e.selection,p,e.onClick,e.onHover),S=Object(i.useMemo)((()=>{var t;return{title:n,description:r,data:{name:"table"},transform:[{aggregate:[{op:"values",as:"values"},{op:"sum",field:"i",as:"i_sum"}],groupby:["v"]},{stack:"i_sum",as:["i_sum_start","i_sum_end"],sort:[{field:"v",order:"ascending"}],groupby:[]}],layer:[{selection:b,mark:{type:"arc",cursor:$||w?"pointer":void 0,tooltip:!0,innerRadius:m},encoding:{color:{condition:[w?[{selection:w,value:a}]:[],$?[{selection:$,value:a}]:[]].flat(),field:"v",type:"nominal",title:p,scale:{scheme:"dark"===s?"dark2":"set2"}},theta:{field:"i_sum",type:"quantitative",title:"Count"}}},xr(Jn(),a,!1,s,m),...(null!==(t=e.queries)&&void 0!==t?t:[]).map(((e,t)=>xr(Yn(t),e.color,t>0||null!=w||null!=$,s,m)))],resolve:{scale:{theta:"shared"}}}}),[p,n,r,a,e.queries,b,$,w,m,s]);return c.a.createElement(Hn.a,Object.assign({spec:S,width:u,height:d,data:h,signalListeners:v,theme:"dark"===s?"dark":void 0,actions:y},x))}Object(Pn.expressionFunction)("inSetStore",(function(e,t){return"function"==typeof e&&e(t)})),Object(Pn.expressionFunction)("countInSetStore",(function(e,t,n){return"function"==typeof e&&Array.isArray(t)?t.reduce(((t,r)=>t+(e(r[n])?1:0)),0):0}));var vr=n(192);const $r={hinges:vr.d,fivenum:vr.b,type7:vr.i,quantiles:vr.i,linear:vr.e,lower:vr.f,higher:vr.c,nearest:vr.h,midpoint:vr.g};function wr(e,t={}){const n=Object.assign({},t,{quantiles:"function"==typeof t.quantiles||null==t.quantiles?t.quantiles:$r[t.quantiles]});return null==n.quantiles&&delete n.quantiles,Object(vr.a)(e,n)}function Sr(e){const t=e[1]-e[0];return n=>n*t+e[0]}function Er(e){const t=e[1]-e[0];return n=>(n-e[0])/t}function kr(e,t){const n=new Map(e.map((e=>[e.value,0])));return t.forEach((e=>{if(null==e)return;const t=e.toString();n.has(t)&&n.set(t,n.get(t)+1)})),n}function Cr(e,t,n,r=!1){const a=function(e){const t=["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d"],n=["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494"],r=e?t.concat(n):n.concat(t);let a=0;return()=>r[a++%r.length]}(r),s=t.map((e=>{return Object.assign({count:0,acc:0,percentage:0},{value:t="string"==typeof e?e:e.value,label:t.length>0?`${t[0].toUpperCase()}${t.slice(1)}`:t,color:a()},"string"==typeof e?{}:e);var t})),o=kr(s,e),l=n?kr(s,n):null,i=Array.from(o.values()).reduce(((e,t)=>e+t),0);let c=0;return s.forEach((e=>{e.acc=c,e.count=o.get(e.value),e.percentage=e.count/i,c+=l?l.get(e.value):e.count})),s}function Or(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}function Mr(e){return Math.round(100*e)/100}function Nr(e,t,n="horizontal"){const r=Er(e),a=Sr(e),s=Sr(t),o=e=>s(r(e)),l="horizontal"===n?5:7;return o.ticks=(e=l)=>Array(e).fill(0).map(((t,n)=>{const r=a(n/(e-1));return{value:r,label:r.toFixed(2)}})),o.tickFormat=()=>e=>e.toFixed(2),o}const Ar=e=>e.toFixed(2);function Lr(e,t){return`Min: ${t(e.min)}, 25% Quantile: ${t(e.q1)}, Median: ${t(e.median)}, 75% Quantile: ${t(e.q3)}, Max: ${t(e.max)}`}const jr=e=>{const{theme:t="light",mode:n="normal",boxStyle:r,lineStyle:a,outlierStyle:s,margin:o=0,boxPadding:l=.1,outlierRadius:i=3,numberFormat:u=Ar}=e,d=Or(e,["theme","mode","boxStyle","lineStyle","outlierStyle","margin","boxPadding","outlierRadius","numberFormat"]),m=Array.isArray(e.values)?wr(e.values,d):e.values;if(Number.isNaN(m.median))return c.a.createElement("g",null);const y="vertical"!==e.orient,f=Er([e.min,e.max]),p=Sr([0,y?e.width:e.height]),h=e=>Mr(p(f(e))),g={max:h(m.max),avg:h(m.mean),med:h(m.median),min:h(m.min),q1:h(m.q1),q3:h(m.q3),wh:h(m.whiskerHigh),wl:h(m.whiskerLow)},x=!1!==e.tooltips&&c.a.createElement("title",null,Lr(m,u)),b=at(t).notMemberColor,v={box:Object.assign({fill:b},r),line:Object.assign({fill:"none",stroke:"light"===t?"black":"#cccccc"},a),outlier:Object.assign({fill:b},s)};if(y){const t=e.height/2,r=Mr(e.height*l)+o,a=e.height-r,s=`M${g.wl},${o} l0,${e.height-2*o} M${g.wl},${t} L${g.q1},${t}`,d=`M${g.q3},${t} L${g.wh},${t} M${g.wh},${o} L${g.wh},${e.height-o}`,y=`M${g.q1},${r} L${g.q3},${r} L${g.q3},${a} L${g.q1},${a} L${g.q1},${r} M${g.med},${r} l0,${a-r}`,f=c.a.createElement("path",{d:`${s} ${d} ${y}`,style:v.line});return"indicator"===n?f:c.a.createElement("g",null,x,"normal"===n&&c.a.createElement("rect",{x:g.q1,y:r,width:g.q3-g.q1,height:e.height-2*r,style:v.box}),f,m.outlier.map((e=>c.a.createElement("circle",{key:e,r:i,cy:t,cx:h(e),style:v.outlier},c.a.createElement("title",null,"$",u(e))))))}{const t=e.width/2,r=Mr(e.width*l)+o,a=e.width-r,s=`M${o},${g.wl} l${e.width-2*o},0 M${t},${g.wl} L${t},${g.q1}`,d=`M${t},${g.q3} L${t},${g.wh} M${o},${g.wh} L${e.width-o},${g.wh}`,y=`M${r},${g.q1} L${r},${g.q3} l${a-r},0 L${a},${g.q1} L${r},${g.q1} M${r},${g.med} l${a-r},0`,f=c.a.createElement("path",{d:`${s} ${d} ${y}`,style:v.line});return"indicator"===n?f:c.a.createElement("g",null,x,"normal"===n&&c.a.createElement("rect",{y:g.q1,x:r,height:g.q3-g.q1,width:e.width-2*r,style:v.box}),f,m.outlier.map((e=>c.a.createElement("circle",{key:e,r:i,cx:t,cy:h(e),style:v.outlier},c.a.createElement("title",null,"$",u(e))))))}},qr=c.a.memo(jr);function zr(e,t,n={}){var{size:r=100,position:a,name:s=e.toString()}=n,o=Or(n,["size","position","name"]);const l="function"==typeof e?e:t=>t[e];let i=Number.POSITIVE_INFINITY,u=Number.NEGATIVE_INFINITY;if(Array.isArray(t))t.forEach((e=>{const t=l(e);null==t||Number.isNaN(t)||(t<i&&(i=t),t>u&&(u=t))}));else{const e=t;i=e.min,u=e.max}const d=Nr([i,u],[0,r],o.orient);return{name:s,position:a,size:r,scale:d,createOnHandlerData:e=>{const t=wr(e.elems.map(l),o);return{id:"boxplot",name:s,value:Object.assign(Object.assign(Object.assign({},t),{toString(){var e;return Lr(this,null!==(e=o.numberFormat)&&void 0!==e?e:Ar)}}),t)}},render:({width:e,height:t,set:n,theme:r})=>{const a=n.elems.map(l);return c.a.createElement(qr,Object.assign({values:a,width:e,height:t,min:i,max:u,theme:r},o))},renderSelection:({width:e,height:t,overlap:n,selectionColor:r,theme:a})=>{if(null==n||0===n.length)return null;const s=n.map(l);return c.a.createElement(qr,Object.assign({values:s,width:e,height:t,min:i,max:u,mode:"box",lineStyle:{stroke:r,strokeWidth:2},outlierStyle:{fill:r},theme:a},o))},renderQuery:({width:e,height:t,overlap:n,query:r,secondary:a,index:s,theme:d})=>{if(null==n||0===n.length)return null;const m=n.map(l);return c.a.createElement(qr,Object.assign({values:m,width:e,height:t,min:i,max:u,mode:a?"indicator":"box",margin:a?s+2:0,lineStyle:{stroke:r.color,strokeWidth:a?1:2},outlierStyle:{fill:r.color},theme:d},o))}}}function Ir(e,t,n={}){var{size:r=100,position:a,name:s="BoxPlot"}=n,o=Or(n,["size","position","name"]);const l=t.min,i=t.max,u=Nr([l,i],[0,r],o.orient);return{name:s,position:a,size:r,scale:u,createOnHandlerData:t=>{const n=e(t.elems);return n.toString=function(){var e;return Lr(this,null!==(e=o.numberFormat)&&void 0!==e?e:Ar)},{id:"boxplot",name:s,value:n}},render:({width:t,height:n,set:r,theme:a})=>{const s=e(r.elems);return c.a.createElement(qr,Object.assign({values:s,width:t,height:n,min:l,max:i,theme:a},o))},renderSelection:({width:t,height:n,overlap:r,selectionColor:a,theme:s})=>{if(null==r||0===r.length)return null;const u=e(r);return c.a.createElement(qr,Object.assign({values:u,width:t,height:n,min:l,max:i,mode:"box",lineStyle:{stroke:a,strokeWidth:2},outlierStyle:{fill:a},theme:s},o))},renderQuery:({width:t,height:n,overlap:r,query:a,secondary:s,index:u,theme:d})=>{if(null==r||0===r.length)return null;const m=e(r);return c.a.createElement(qr,Object.assign({values:m,width:t,height:n,min:l,max:i,mode:s?"indicator":"box",margin:s?u+2:0,lineStyle:{stroke:a.color,strokeWidth:s?1:2},outlierStyle:{fill:a.color},theme:d},o))}}}function _r(e){return Array.isArray(e.bins)}function Tr(e){return e.map((e=>`${e.label}: ${e.count}`)).join(", ")}const Br=e=>{var t,n;const{margin:r=0,rectStyle:a={}}=e,s=_r(e)?e.bins:Cr(e.values,e.categories,e.base,"dark"===e.theme),o=Er([0,_r(e)?e.bins.reduce(((e,t)=>e+t.count),0):null!==(n=null===(t=e.base)||void 0===t?void 0:t.length)&&void 0!==n?n:e.values.length]),l="vertical"!==e.orient,i=Sr([0,l?e.width:e.height]),u=e=>i(o(e));return l?c.a.createElement("g",null,s.map((t=>c.a.createElement("rect",{key:t.value,x:u(t.acc),width:u(t.count),y:r,height:e.height-2*r,style:Object.assign({fill:t.color},a)},!1!==e.tooltips&&c.a.createElement("title",null,`${t.label}: ${t.count}`))))):c.a.createElement("g",null,s.map((t=>c.a.createElement("rect",{key:t.value,y:u(t.acc),height:u(t.count),x:r,width:e.width-2*r,style:Object.assign({fill:t.color},a)},!1!==e.tooltips&&c.a.createElement("title",null,`${t.label}: ${t.count}`)))))},Fr=c.a.memo(Br),Kr="rgba(255,255,255,0.2)",Hr="rgba(0,0,0,0.1)";function Pr(e,t,n={}){var{size:r=100,position:a,name:s=e.toString()}=n,o=Or(n,["size","position","name"]);const l="function"==typeof e?e:t=>t[e];let i=[];if(Array.isArray(t)){const e=new Set;t.forEach((t=>{const n=l(t);null!=n&&e.add(n.toString())})),i=Array.from(e).sort()}else i=t.categories;return{name:s,position:a,size:r,createOnHandlerData:e=>{const t=Cr(e.elems.map(l),i,void 0,"dark"===o.theme);return t.toString=function(){return Tr(this)},{id:"categorical",name:s,value:t}},render:({width:e,height:t,set:n,theme:r})=>{const a=n.elems.map(l);return c.a.createElement(Fr,Object.assign({values:a,categories:i,width:e,height:t,theme:r},o))},renderSelection:({width:e,height:t,set:n,theme:r,overlap:a,selectionColor:s})=>{if(null==a||0===a.length)return null;const u=n.elems.map(l),d=a.map(l);return c.a.createElement(Fr,Object.assign({values:d,base:u,categories:i,width:e,height:t,theme:r,rectStyle:{stroke:s,strokeWidth:2,fill:"light"===r?Hr:Kr}},o))},renderQuery:({width:e,height:t,overlap:n,set:r,query:a,secondary:s,index:u,theme:d})=>{if(null==n||0===n.length)return null;const m=r.elems.map(l),y=n.map(l);return c.a.createElement(Fr,Object.assign({values:y,base:m,categories:i,width:e,height:t,margin:s?u+2:0,rectStyle:{stroke:a.color,fill:"light"===d?Hr:Kr},theme:d},o))}}}function Rr(e,t={}){var{size:n=100,position:r,name:a="Histogram"}=t,s=Or(t,["size","position","name"]);return{name:a,position:r,size:n,createOnHandlerData:t=>{const n=e(t.elems);return{id:"categorical",name:a,value:Object.assign(Object.assign(Object.assign({},n),{toString(){return Tr(this)}}),n)}},render:({width:t,height:n,set:r,theme:a})=>{const o=e(r.elems);return c.a.createElement(Fr,Object.assign({bins:o,width:t,height:n,theme:a},s))},renderSelection:({width:t,height:n,theme:r,overlap:a,selectionColor:o})=>{if(null==a||0===a.length)return null;const l=e(a);return c.a.createElement(Fr,Object.assign({bins:l,width:t,height:n,theme:r,rectStyle:{stroke:o,strokeWidth:2,fill:"light"===r?Hr:Kr}},s))},renderQuery:({width:t,height:n,overlap:r,query:a,secondary:o,index:l,theme:i})=>{if(null==r||0===r.length)return null;const u=e(r);return c.a.createElement(Fr,Object.assign({bins:u,width:t,height:n,margin:o?l+2:0,rectStyle:{stroke:a.color,fill:"light"===i?Hr:Kr},theme:i},s))}}}const Dr=[{name:"Alton Lannister",sets:["was killed","Lannister","male"]},{name:"Arya Stark",sets:["Stark","female"]},{name:"Benjen Stark",sets:["was killed","Stark","male"]},{name:"Bran Stark",sets:["royal","Stark","male"]},{name:"Brandon Stark",sets:["was killed","Stark"]},{name:"Catelyn Stark",sets:["was killed","Stark","female"]},{name:"Cersei Lannister",sets:["royal","was killed","Lannister","female"]},{name:"Eddard Stark",sets:["was killed","Stark","male"]},{name:"Jaime Lannister",sets:["was killed","Lannister","male"]},{name:"Jon Snow",sets:["royal","was killed","Stark","male"]},{name:"Kevan Lannister",sets:["was killed","Lannister","male"]},{name:"Lancel Lannister",sets:["was killed","Lannister","male"]},{name:"Lyanna Stark",sets:["was killed","Stark","female"]},{name:"Martyn Lannister",sets:["was killed","Lannister","male"]},{name:"Rickard Stark",sets:["was killed","Stark","male"]},{name:"Rickon Stark",sets:["was killed","Stark","male"]},{name:"Robb Stark",sets:["royal","was killed","Stark","male"]},{name:"Sansa Stark",sets:["royal","Stark","female"]},{name:"Tyrion Lannister",sets:["Lannister","male"]},{name:"Tywin Lannister",sets:["was killed","Lannister","male"]},{name:"Willem Lannister",sets:["was killed","Lannister","male"]}],Wr=re(Dr,{order:"cardinality"}),Ur=[{name:"Q1",color:"steelblue",elems:Dr.filter((()=>Math.random()>.7))},{name:"Q2",color:"red",elems:Dr.filter((()=>Math.random()>.8))}],Vr=["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494"],Qr={React:c.a,GameOfThronesDataSet:l,...c.a,...r,...o,...s,...a};delete Qr.default;t.a=Qr},81:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),s=n(137),o=n(115),l=n(201),i=n(172);t.default=function(e){const{content:t}=e,{frontMatter:n,metadata:r}=t,{title:c,description:u,wrapperClassName:d,hide_table_of_contents:m}=n,{permalink:y}=r;return a.a.createElement(s.a,{title:c,description:u,permalink:y,wrapperClassName:d},a.a.createElement("main",null,a.a.createElement("div",{className:"container container--fluid"},a.a.createElement("div",{className:"margin-vert--lg padding-vert--lg"},a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"col col--8 col--offset-2"},a.a.createElement("div",{className:"container"},a.a.createElement(o.a,{components:l.a},a.a.createElement(t,null)))),!m&&t.toc&&a.a.createElement("div",{className:"col col--2"},a.a.createElement(i.a,{toc:t.toc})))))))}}}]);